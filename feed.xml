<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.3.3">Jekyll</generator><link href="https://piolabs.com/feed.xml" rel="self" type="application/atom+xml" /><link href="https://piolabs.com/" rel="alternate" type="text/html" /><updated>2024-01-04T14:48:04+02:00</updated><id>https://piolabs.com/feed.xml</id><title type="html">PlatformIO Labs</title><subtitle>A proven technology used by global innovators and by millions of embedded developers around the world.</subtitle><author><name>PlatformIO Labs</name><email>contact@piolabs.com</email></author><entry><title type="html">PlatformIO Open Source December Updates</title><link href="https://piolabs.com/blog/news/platformio-oss-december-2023-updates.html" rel="alternate" type="text/html" title="PlatformIO Open Source December Updates" /><published>2024-01-04T00:00:00+02:00</published><updated>2024-01-04T00:00:00+02:00</updated><id>https://piolabs.com/blog/news/platformio-oss-december-2023-updates</id><content type="html" xml:base="https://piolabs.com/blog/news/platformio-oss-december-2023-updates.html"><![CDATA[<p>Welcome to the December 2023 updates of <a href="https://platformio.org/">PlatformIO Open Source</a> professional collaborative platform for embedded development.
As we wrap up the year, December is bringing some cool changes our way. Amid all the holiday buzz, we’ve been busy making updates to give you a better experience. These changes show that we’re always trying to make things awesome for you.</p>

<!-- more -->

<p><img class="figure-img img-fluid rounded" src="/assets/posts/oss-updates/platformio-oss-december-news.jpg" alt="PlatformIO Open Source December Updates" /></p>

<p>During December, we added support for the latest Arduino ESP32 core v2.0.14 and ESP-IDF v5.1.2, rolled out updates for several popular development platforms, fixed a lot of issues. Some of the key highlights include:</p>

<ul id="markdown-toc">
  <li><a href="#esp-idf-v512" id="markdown-toc-esp-idf-v512">ESP-IDF v5.1.2</a></li>
  <li><a href="#espressif32-dev-platform-v65" id="markdown-toc-espressif32-dev-platform-v65">Espressif32 dev-platform v6.5</a></li>
  <li><a href="#st-stm32-dev-platform-v172" id="markdown-toc-st-stm32-dev-platform-v172">ST STM32 dev-platform v17.2</a></li>
  <li><a href="#nordic-nrf52-dev-platform-v103" id="markdown-toc-nordic-nrf52-dev-platform-v103">Nordic nRF52 dev-platform v10.3</a></li>
  <li><a href="#arduino-core-for-mbed-enabled-devices-v4010" id="markdown-toc-arduino-core-for-mbed-enabled-devices-v4010">Arduino Core for mbed-enabled devices v4.0.10</a></li>
</ul>

<h2 id="esp-idf-v512">ESP-IDF v5.1.2</h2>

<p>We’re happy to announce updated support for the latest release of <strong>ESP-IDF v5.1.2</strong> - the official development framework for the ESP32, ESP32-S and ESP32-C Series SoCs. It provides a self-sufficient SDK for any generic application development on these platforms, using programming languages such as C and C++. ESP-IDF currently powers millions of devices in the field, and enables building a variety of network-connected products, ranging from simple light bulbs and toys to big appliances and industrial devices.</p>

<p><strong>Major enhancements in v5.1.2:</strong></p>

<ul>
  <li>Added internal pull-up/downs option for gpio used for deepsleep wakeup for all chip types</li>
  <li>Added new deep sleep APIs that help to skip deep sleep if the wakeup source is set before the sleep request</li>
  <li>Supported PLL track on all targets.</li>
</ul>

<p>More information on project configuration for ESP-IDF can be found <a href="https://docs.platformio.org/en/latest/frameworks/espidf.html#configuration">here</a>.</p>

<p><strong>Related resources for ESP-IDF</strong>:</p>

<ul>
  <li><a href="https://github.com/espressif/esp-idf/releases/tag/v5.1.2">Release notes for v5.1.2</a></li>
  <li><a href="https://docs.platformio.org/en/latest/frameworks/espidf.html">Documentation for ESP-IDF</a></li>
  <li><a href="https://docs.platformio.org/en/latest/frameworks/espidf.html#boards">Supported boards</a></li>
</ul>

<h2 id="espressif32-dev-platform-v65">Espressif32 dev-platform v6.5</h2>

<p>The new release of the <a href="https://registry.platformio.org/platforms/platformio/espressif32">Espressif 32</a> dev-platform brings support for the latest Arduino Core and ESP-IDF, new boards and dev-kits, several fixes and improvements:</p>

<ul>
  <li>Added new boards and dev-kits: <a href="https://docs.platformio.org/en/latest/boards/espressif32/4d_systems_esp32s3_gen4_r8n16.html">4D Systems GEN4-ESP32 16MB</a>, <a href="https://docs.platformio.org/en/latest/boards/espressif32/adafruit_camera_esp32s3.html">Adafruit pyCamera S3</a>, <a href="https://docs.platformio.org/en/latest/boards/espressif32/adafruit_metro_esp32s3.html">Adafruit Metro ESP32-S3</a>, <a href="https://docs.platformio.org/en/latest/boards/espressif32/adafruit_qtpy_esp32s3_n4r2.html">Adafruit QT Py ESP32-S3 (4M Flash 2M PSRAM)</a>, <a href="https://docs.platformio.org/en/latest/boards/espressif32/adafruit_qualia_s3_rgb666.html">Adafruit Qualia ESP32-S3 RGB666</a>, <a href="https://docs.platformio.org/en/latest/boards/espressif32/atd147_s3.html">ArtronShop ATD1.47-S3</a>, <a href="https://docs.platformio.org/en/latest/boards/espressif32/ioxesp32.html">ArtronShop IOXESP32</a>, <a href="https://docs.platformio.org/en/latest/boards/espressif32/ioxesp32ps.html">ArtronShop IOXESP32PS</a>, <a href="https://docs.platformio.org/en/latest/boards/espressif32/aventen_s3_sync.html">Aventen S3 Sync</a>, <a href="https://docs.platformio.org/en/latest/boards/espressif32/esp32-pico-devkitm-2.html">Espressif ESP32-PICO-DevKitM-2</a>, <a href="https://docs.platformio.org/en/latest/boards/espressif32/esp32-s3-devkitm-1.html">Espressif ESP32-S3-DevKitM-1</a>, <a href="https://docs.platformio.org/en/latest/boards/espressif32/esp32s3usbotg.html">Espressif ESP32-S3-USB-OTG</a>, <a href="https://docs.platformio.org/en/latest/boards/espressif32/lionbits3.html">Lion:Bit S3 STEM Dev Board</a>, <a href="https://docs.platformio.org/en/latest/boards/espressif32/lilygo-t-display.html">LilyGo T-Display</a>, <a href="https://docs.platformio.org/en/latest/boards/espressif32/bee_data_logger.html">Smart Bee Data Logger</a>, <a href="https://docs.platformio.org/en/latest/boards/espressif32/namino_arancio.html">Namino Arancio</a>, <a href="https://docs.platformio.org/en/latest/boards/espressif32/namino_rosso.html">Namino Rosso</a>, <a href="https://docs.platformio.org/en/latest/boards/espressif32/um_nanos3.html">Unexpected Maker NanoS3</a></li>
  <li>Added support for Arduino v2.0.14 (<a href="https://github.com/espressif/arduino-esp32/releases/tag/2.0.14">release notes</a>)</li>
  <li>Updated ESP-IDF to v5.1.2 (<a href="https://github.com/espressif/esp-idf/releases/tag/v5.1.2">release notes</a>)</li>
  <li>Added default debug option for ESP32-S2-Kaluga-1 Kit (<a href="https://github.com/platformio/platform-espressif32/pull/1185">#1185</a>, <a href="https://github.com/platformio/platform-espressif32/pull/1130">#1130</a>)</li>
  <li>Added optional MMU page size flag to elf2bin if it’s configurable</li>
  <li>Fixed handling of precompiled static archives located outside IDF project root (<a href="https://github.com/platformio/platform-espressif32/pull/1230">#1230</a>)</li>
  <li>Fixed Lolin S2 USB CDC setup (<a href="https://github.com/platformio/platform-espressif32/pull/1251">#1251</a>)</li>
  <li>Fixed upload workflow for Lolin S3 (<a href="https://github.com/platformio/platform-espressif32/pull/1252">#1252</a>)</li>
  <li>Minor fixes and improvements (<a href="https://github.com/platformio/platform-espressif32/pull/1180">#1180</a>, <a href="https://github.com/platformio/platform-espressif32/pull/1198">#1198</a>)</li>
</ul>

<p><strong>Related resources for the Espressif32 dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/espressif32.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-espressif32/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 id="st-stm32-dev-platform-v172">ST STM32 dev-platform v17.2</h2>

<p>The new release of the <a href="https://registry.platformio.org/platforms/platformio/ststm32">ST STM32</a> v17.2 comes with support for the latest Arduino cores and several minor improvements:</p>

<ul>
  <li>Updated STM32 Arduino Core to the latest v2.7.1 (<a href="https://github.com/stm32duino/Arduino_Core_STM32/releases/tag/2.7.1">release notes</a>)</li>
  <li>Updated Arduino-mbed core to v4.0.10 (<a href="https://github.com/arduino/ArduinoCore-mbed/releases/tag/4.0.10">release notes</a>)</li>
  <li>Minor fixes and improvements</li>
</ul>

<p><strong>Related resources for the ST STM32 dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/ststm32.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-ststm32/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 id="nordic-nrf52-dev-platform-v103">Nordic nRF52 dev-platform v10.3</h2>

<p>The new release of the <a href="https://registry.platformio.org/platforms/platformio/nordicnrf52">Nordic nRF52</a> dev-platform v10.3 brings support for the latest Arduino cores and several minor improvements::</p>

<ul>
  <li>Updated Adafruit Arduino Core to the latest v1.6.0 (<a href="https://github.com/adafruit/Adafruit_nRF52_Arduino/releases/tag/1.6.0">release notes</a>)</li>
  <li>Updated Arduino-mbed core to v4.0.10 (<a href="https://github.com/arduino/ArduinoCore-mbed/releases/tag/4.0.10">release notes</a>)</li>
  <li>Downgraded GCC toolchain to v7 for Arduino-mbed boards (<a href="https://github.com/platformio/platform-nordicnrf52/issues/185">#185</a>)</li>
  <li>Minor fixes and improvements (<a href="https://github.com/platformio/platform-nordicnrf52/issues/187">#187</a>)</li>
</ul>

<p><strong>Related resources for the Nordic nRF52 dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/nordicnrf52.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-nordicnrf52/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 id="arduino-core-for-mbed-enabled-devices-v4010">Arduino Core for mbed-enabled devices v4.0.10</h2>

<p>The <a href="https://registry.platformio.org/platforms/platformio/ststm32">ST STM32</a>, <a href="https://registry.platformio.org/platforms/platformio/nordicnrf52">Nordic nRF52</a> and <a href="https://registry.platformio.org/platforms/platformio/raspberrypi">Raspberry Pi RP2040</a> dev-platforms have been updated to support the latest Arduino Core for mbed-enabled devices v4.0.10. According to the <a href="https://github.com/arduino/ArduinoCore-mbed/releases/tag/4.0.10">release notes</a>, v4.0.10 brings a lot of bugfixes and improvements in the core and accompanying libraries.</p>

<h2 class="no_toc" id="stay-in-touch-with-us">Stay in touch with us</h2>

<p>Stay tuned to this blog or follow us on <a href="https://www.linkedin.com/company/platformio" target="_blank">LinkedIn</a> and Twitter <a href="https://twitter.com/PlatformIO_Org" target="_blank">@PlatformIO_Org</a> to keep up to date with the latest news, articles and tips!</p>]]></content><author><name>Valerii Koval</name></author><category term="blog" /><category term="news" /><summary type="html"><![CDATA[New boards and dev-kits, Support for the latest ESP-IDF, Updates for Espressif32, ST STM32, Nordic nRF52 and Raspberry Pi RP2040 dev-platforms]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://piolabs.com/assets/posts/oss-updates/platformio-oss-december-news.jpg" /><media:content medium="image" url="https://piolabs.com/assets/posts/oss-updates/platformio-oss-december-news.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">PlatformIO Open Source November Updates</title><link href="https://piolabs.com/blog/news/platformio-oss-november-2023-updates.html" rel="alternate" type="text/html" title="PlatformIO Open Source November Updates" /><published>2023-12-04T00:00:00+02:00</published><updated>2023-12-04T00:00:00+02:00</updated><id>https://piolabs.com/blog/news/platformio-oss-november-2023-updates</id><content type="html" xml:base="https://piolabs.com/blog/news/platformio-oss-november-2023-updates.html"><![CDATA[<p>Welcome to the November 2023 updates of <a href="https://platformio.org/">PlatformIO Open Source</a> professional collaborative platform for embedded development.</p>

<p>This month we received a lot of helpful feedback from our community, which let us identify the most important parts of our OSS ecosystem that required our attention, so there are plenty of updates pushed in this month that we hope you will like.</p>

<!-- more -->

<p><img class="figure-img img-fluid rounded" src="/assets/posts/oss-updates/platformio-oss-november-news.jpg" alt="PlatformIO Open Source November Updates" /></p>

<p>During November, we added support for the latest Zephyr framework, rolled out updates for ST STM32, Renesas RA and Microchip AVR development platforms and fixed a lot of issues. Some of the key highlights include:</p>

<ul id="markdown-toc">
  <li><a href="#zephyr-rtos-v35" id="markdown-toc-zephyr-rtos-v35">Zephyr RTOS v3.5</a></li>
  <li><a href="#microchip-avr-dev-platform-v50" id="markdown-toc-microchip-avr-dev-platform-v50">Microchip AVR dev-platform v5.0</a></li>
  <li><a href="#renesas-ra-dev-platform-v13" id="markdown-toc-renesas-ra-dev-platform-v13">Renesas RA dev-platform v1.3</a></li>
  <li><a href="#st-stm32-dev-platform-v171" id="markdown-toc-st-stm32-dev-platform-v171">ST STM32 dev-platform v17.1</a></li>
</ul>

<h2 id="zephyr-rtos-v35">Zephyr RTOS v3.5</h2>

<p>We’re happy to announce updated support for the latest release v3.5.0 of <a href="https://www.zephyrproject.org/" target="_blank">Zephyr Project</a> - a scalable real-time operating system (RTOS) supporting multiple hardware architectures, optimized for resource-constrained devices, and built with safety and security in mind.</p>

<p>Major enhancements in v3.5.0:</p>

<ul>
  <li>Picolibc is now the default C standard library</li>
  <li>Added new modem subsystem</li>
  <li>Added support for linkable loadable extensions (llext)</li>
  <li>Added new hardware spinlock driver API</li>
</ul>

<p><strong>Related resources for Zephyr framework</strong>:</p>

<ul>
  <li><a href="https://github.com/zephyrproject-rtos/zephyr/releases/tag/v3.5.0">Release notes for v3.5.0</a></li>
  <li><a href="https://docs.platformio.org/en/latest/frameworks/zephyr.html">Documentation for Zephyr framework</a></li>
  <li><a href="https://docs.platformio.org/en/latest/frameworks/zephyr.html#platforms">Supported development platforms</a></li>
  <li><a href="https://docs.platformio.org/en/latest/frameworks/zephyr.html#boards">Supported boards</a></li>
</ul>

<h2 id="microchip-avr-dev-platform-v50">Microchip AVR dev-platform v5.0</h2>

<p>The latest release of the <a href="https://registry.platformio.org/platforms/platformio/atmelavr">Microchip AVR</a> v5.0 comes with updates for highly customizable Arduino cores by MCUdude, improved support for the <code class="language-plaintext highlighter-rouge">Urboot</code> bootloader and several minor improvements:</p>

<ul>
  <li>New board <a href="https://docs.platformio.org/en/latest/boards/atmelavr/uno_mini.html">Arduino Uno Mini</a></li>
  <li>Updated Arduino AVR core to v1.8.6 (<a href="https://github.com/platformio/platform-atmelavr/pull/314">#314</a>)</li>
  <li>Updated MCUdude’s cores (<a href="https://github.com/platformio/platform-atmelavr/pull/320">#320</a>):
    <ul>
      <li>MajorCore <code class="language-plaintext highlighter-rouge">v3.0.0</code> (<a href="https://github.com/MCUdude/MajorCore/releases/tag/v3.0.0">release notes</a>)</li>
      <li>MegaCore <code class="language-plaintext highlighter-rouge">v3.0.0</code> (<a href="https://github.com/MCUdude/MegaCore/releases/tag/v3.0.0">release notes</a>)</li>
      <li>MightyCore <code class="language-plaintext highlighter-rouge">v3.0.0</code> (<a href="https://github.com/MCUdude/MightyCore/releases/tag/v3.0.0">release notes</a>)</li>
      <li>MiniCore <code class="language-plaintext highlighter-rouge">v3.0.0</code> (<a href="https://github.com/MCUdude/MiniCore/releases/tag/v3.0.0">release notes</a>)</li>
    </ul>
  </li>
  <li>MCUdude cores switched to AVRDUDE v7.2</li>
  <li>Added initial support for the <code class="language-plaintext highlighter-rouge">Urboot</code> bootloader for MigntyCore, MiniCore, MegaCore, or MajorCore (<a href="https://github.com/platformio/platform-atmelavr/pull/321">#321</a>)</li>
  <li>Fixed an issue with excessive quotes when path to AVRDUDE contains a whitespace character (<a href="https://github.com/platformio/platform-atmelavr/pull/297">#297</a>)</li>
</ul>

<p>See <a href="https://github.com/platformio/platform-atmelavr/releases/tag/v5.0.0">Release Notes</a> for more detailed information.</p>

<p><strong>Related resources for the Microchip AVR dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/atmelavr.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-atmelavr/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 id="renesas-ra-dev-platform-v13">Renesas RA dev-platform v1.3</h2>

<p>The new release of the <a href="https://registry.platformio.org/platforms/platformio/renesas-ra">Renesas RA</a> dev-platform v1.3.0 brings support for the latest Arduino core and several bugfixes:</p>

<ul>
  <li>Updated Arduino core to v1.0.5 (<a href="https://github.com/arduino/ArduinoCore-renesas/releases/tag/1.0.5">release notes</a>)</li>
  <li>Downgraded GCC to v7 to avoid compatibility isues (<a href="https://github.com/platformio/platform-renesas-ra/issues/18">#18</a>)</li>
  <li>Minor fixes and improvements</li>
</ul>

<p><strong>Related resources for the Renesas RA dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/renesas-ra.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-renesas-ra/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 id="st-stm32-dev-platform-v171">ST STM32 dev-platform v17.1</h2>

<p>The new release of the <a href="https://registry.platformio.org/platforms/platformio/ststm32">ST STM32</a> v17.1 comes with support for the latest Zephyr and several minor improvements:</p>

<ul>
  <li>Updated Zephyr to the latest v3.5.0 (<a href="https://github.com/zephyrproject-rtos/zephyr/releases/tag/v3.5.0">release notes</a>)</li>
  <li>Added Mbed support for <code class="language-plaintext highlighter-rouge">nucelo_h723zg</code> (<a href="https://github.com/platformio/platform-ststm32/issues/740">#740</a>)</li>
  <li>Added missing macro for LoRa E5 Dev Board (<a href="https://github.com/platformio/platform-ststm32/issues/738">#738</a>)</li>
  <li>Minor fixes and improvements</li>
</ul>

<p>See <a href="https://github.com/platformio/platform-ststm32/releases/tag/v17.1.0">Release Notes</a> for more detailed information.</p>

<p><strong>Related resources for the ST STM32 dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/ststm32.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-ststm32/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 class="no_toc" id="stay-in-touch-with-us">Stay in touch with us</h2>

<p>Stay tuned to this blog or follow us on <a href="https://www.linkedin.com/company/platformio" target="_blank">LinkedIn</a> and Twitter <a href="https://twitter.com/PlatformIO_Org" target="_blank">@PlatformIO_Org</a> to keep up to date with the latest news, articles and tips!</p>]]></content><author><name>Valerii Koval</name></author><category term="blog" /><category term="news" /><summary type="html"><![CDATA[New boards and devkits, Support for the latest Zephyr RTOS 3.5, Updates for ST STM32, Renesas RA and Microchip AVR dev-platforms]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://piolabs.com/assets/posts/oss-updates/platformio-oss-november-news.jpg" /><media:content medium="image" url="https://piolabs.com/assets/posts/oss-updates/platformio-oss-november-news.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">PlatformIO Open Source September Updates</title><link href="https://piolabs.com/blog/news/platformio-oss-september-2023-updates.html" rel="alternate" type="text/html" title="PlatformIO Open Source September Updates" /><published>2023-10-02T00:00:00+03:00</published><updated>2023-10-02T00:00:00+03:00</updated><id>https://piolabs.com/blog/news/platformio-oss-september-2023-updates</id><content type="html" xml:base="https://piolabs.com/blog/news/platformio-oss-september-2023-updates.html"><![CDATA[<p>Welcome to the September 2023 updates of <a href="https://platformio.org/">PlatformIO Open Source</a> professional collaborative platform for embedded development.</p>

<p>This month we received a lot of helpful feedback from our community, which let us identify the most important parts of our OSS ecosystem that required our attention, so there are plenty of updates pushed in this month that we hope you will like.</p>

<!-- more -->

<p><img class="figure-img img-fluid rounded" src="/assets/posts/oss-updates/platformio-oss-september-news.jpg" alt="PlatformIO Open Source September Updates" /></p>

<p>During September, we added support for the latest Zephyr framework and rolled out updates for ST STM32, Renesas RA, Nordic nRF52 and Raspberry Pico development platforms, fixed a lot of issues. Some of the key highlights include:</p>

<ul id="markdown-toc">
  <li><a href="#zephyr-rtos-v34" id="markdown-toc-zephyr-rtos-v34">Zephyr RTOS v3.4</a></li>
  <li><a href="#st-stm32-dev-platform-v170" id="markdown-toc-st-stm32-dev-platform-v170">ST STM32 dev-platform v17.0</a></li>
  <li><a href="#renesas-ra-dev-platform-v12" id="markdown-toc-renesas-ra-dev-platform-v12">Renesas RA dev-platform v1.2</a></li>
  <li><a href="#arduino-core-for-mbed-enabled-devices-v406" id="markdown-toc-arduino-core-for-mbed-enabled-devices-v406">Arduino Core for mbed-enabled devices v4.0.6</a></li>
</ul>

<h2 id="zephyr-rtos-v34">Zephyr RTOS v3.4</h2>

<p>We’re happy to announce updated support for the latest release v3.4.0 of <a href="https://www.zephyrproject.org/" target="_blank">Zephyr Project</a> - a scalable real-time operating system (RTOS) supporting multiple hardware architectures, optimized for resource-constrained devices, and built with safety and security in mind.</p>

<p>The renewed integration brings enhanced compatibility and faster performance, but currently focuses only on two platforms – <a href="https://docs.platformio.org/en/latest/platforms/ststm32.html">ST STM32</a> and <a href="https://docs.platformio.org/en/latest/platforms/nxpimxrt.html">NXP iMXRT</a>. Stay tuned as we’re actively exploring opportunities to expand to more platforms in the future.</p>

<p><strong>Related resources for Zephyr framework</strong>:</p>

<ul>
  <li><a href="https://github.com/zephyrproject-rtos/zephyr/releases/tag/v3.4.0">Release notes for v3.4.0</a></li>
  <li><a href="https://docs.platformio.org/en/latest/frameworks/zephyr.html">Documentation for Zephyr framework</a></li>
  <li><a href="https://docs.platformio.org/en/latest/frameworks/zephyr.html#platforms">Supported development platforms</a></li>
  <li><a href="https://docs.platformio.org/en/latest/frameworks/zephyr.html#boards">Supported boards</a></li>
</ul>

<h2 id="st-stm32-dev-platform-v170">ST STM32 dev-platform v17.0</h2>

<p>The new release of the <a href="https://registry.platformio.org/platforms/platformio/ststm32">ST STM32</a> v17.0 comes with support for the latest Zephyr and Arduino cores, updated toolchain packages and several minor improvements:</p>

<ul>
  <li>New boards:
    <ul>
      <li><a href="https://docs.platformio.org/en/latest/boards/ststm32/leafony_ap03.html">Leafony AP03</a></li>
      <li><a href="https://docs.platformio.org/en/latest/boards/ststm32/lora_e5_dev_board.html">SeeedStudio LoRa E5 Dev Board</a></li>
      <li><a href="https://docs.platformio.org/en/latest/boards/ststm32/lora_e5_mini.html">SeeedStudio LoRa-E5 mini</a></li>
      <li><a href="https://docs.platformio.org/en/latest/boards/ststm32/sparkfun_micromod_f405.html">SparkFun MicroMod STM32F405</a></li>
      <li><a href="https://docs.platformio.org/en/latest/boards/ststm32/genericSTM32H750VB.html">STM32H750VB</a></li>
      <li><a href="https://docs.platformio.org/en/latest/boards/ststm32/genericSTM32G431CB.html">STM32G431CB</a></li>
    </ul>
  </li>
  <li>Updated Zephyr to the latest v3.4.0 (<a href="https://github.com/zephyrproject-rtos/zephyr/releases/tag/v3.4.0">release notes</a>)</li>
  <li>Updated STM32 Arduino Core to the latest v2.6.0 (<a href="https://github.com/stm32duino/Arduino_Core_STM32/releases/tag/2.6.0">release notes</a>)</li>
  <li>Updated Arduino-mbed core to v4.0.6 (<a href="https://github.com/arduino/ArduinoCore-mbed/releases/tag/4.0.6">release notes</a>)</li>
  <li>Updated toolchain packages to v12.3.1 for Arduino integration (<a href="https://github.com/platformio/platform-ststm32/issues/720">#720</a>)</li>
  <li>Fixed flash memory size for <code class="language-plaintext highlighter-rouge">nucleo_g0b1re</code> (<a href="https://github.com/platformio/platform-ststm32/issues/723">#723</a>)</li>
  <li>Minor fixes and improvements (<a href="https://github.com/platformio/platform-ststm32/issues/695">#695</a>, <a href="https://github.com/platformio/platform-ststm32/issues/715">#715</a>, <a href="https://github.com/platformio/platform-ststm32/issues/722">#722</a>, <a href="https://github.com/platformio/platform-ststm32/issues/728">#728</a>)</li>
</ul>

<p><strong>Related resources for the ST STM32 dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/ststm32.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-ststm32/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 id="renesas-ra-dev-platform-v12">Renesas RA dev-platform v1.2</h2>

<p>The new release of the <a href="https://registry.platformio.org/platforms/platformio/renesas-ra">Renesas RA</a> dev-platform v1.2.0 brings support for the latest Arduino core and several bugfixes:</p>

<ul>
  <li>Updated Arduino core to v1.0.4 (<a href="https://github.com/arduino/ArduinoCore-renesas/releases/tag/1.0.4">release notes</a>)</li>
  <li>Added missing ARCH macro for Uno boards (<a href="https://github.com/platformio/platform-renesas-ra/issues/11">#11</a>)</li>
  <li>Fixed broken linker flag for FPU (<a href="https://github.com/platformio/platform-renesas-ra/issues/13">#13</a>)</li>
  <li>Fixed J-Link device name for Portenta C33 (<a href="https://github.com/platformio/platform-renesas-ra/issues/14">#14</a>)</li>
</ul>

<p><strong>Related resources for the Renesas RA dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/renesas-ra.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-renesas-ra/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 id="arduino-core-for-mbed-enabled-devices-v406">Arduino Core for mbed-enabled devices v4.0.6</h2>

<p>The <a href="https://registry.platformio.org/platforms/platformio/ststm32">ST STM32</a>, <a href="https://registry.platformio.org/platforms/platformio/nordicnrf52">Nordic nRF52</a> and <a href="https://registry.platformio.org/platforms/platformio/raspberrypi">Raspberry Pi RP2040</a> dev-platforms have been updated to support the latest Arduino Core for mbed-enabled devices v4.0.6. According to the <a href="https://github.com/arduino/ArduinoCore-mbed/releases/tag/4.0.6">release notes</a>, v4.0.6 brings a lot of bugfixes and improvements in the core and accompanying libraries.</p>

<h2 class="no_toc" id="stay-in-touch-with-us">Stay in touch with us</h2>

<p>Stay tuned to this blog or follow us on <a href="https://www.linkedin.com/company/platformio" target="_blank">LinkedIn</a> and Twitter <a href="https://twitter.com/PlatformIO_Org" target="_blank">@PlatformIO_Org</a> to keep up to date with the latest news, articles and tips!</p>]]></content><author><name>Valerii Koval</name></author><category term="blog" /><category term="news" /><summary type="html"><![CDATA[New boards and devkits, Support for the latest Zephyr RTOS 3.4, Updates for ST STM32, Renesas RA and mbed-enabled dev-platforms]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://piolabs.com/assets/posts/oss-updates/platformio-oss-september-news.jpg" /><media:content medium="image" url="https://piolabs.com/assets/posts/oss-updates/platformio-oss-september-news.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">PlatformIO Open Source August Updates</title><link href="https://piolabs.com/blog/news/platformio-oss-august-2023-updates.html" rel="alternate" type="text/html" title="PlatformIO Open Source August Updates" /><published>2023-09-04T00:00:00+03:00</published><updated>2023-09-04T00:00:00+03:00</updated><id>https://piolabs.com/blog/news/platformio-oss-august-2023-updates</id><content type="html" xml:base="https://piolabs.com/blog/news/platformio-oss-august-2023-updates.html"><![CDATA[<p>Welcome to the August 2023 updates of <a href="https://platformio.org/">PlatformIO Open Source</a> professional collaborative platform for embedded development.
This month we received a lot of helpful feedback from our community, which let us identify the most important parts of our OSS ecosystem that required our attention, so there are plenty of updates pushed in this month that we hope you will like.</p>

<!-- more -->

<p><img class="figure-img img-fluid rounded" src="/assets/posts/oss-updates/platformio-oss-august-news.jpg" alt="PlatformIO Open Source August Updates" /></p>

<p>During August, we rolled out a bugfix release for PlatformIO Core, added support for the latest Arduino ESP32 core v2.0.11 and ESP-IDF v5.1.1, fixed a lot of issues. Some of the key highlights include:</p>

<ul id="markdown-toc">
  <li><a href="#platformio-core-6111" id="markdown-toc-platformio-core-6111">PlatformIO Core 6.1.11</a></li>
  <li><a href="#esp-idf-v51" id="markdown-toc-esp-idf-v51">ESP-IDF v5.1</a></li>
  <li><a href="#espressif32-dev-platform-v64" id="markdown-toc-espressif32-dev-platform-v64">Espressif32 dev-platform v6.4</a></li>
  <li><a href="#renesas-ra-dev-platform-v11" id="markdown-toc-renesas-ra-dev-platform-v11">Renesas RA dev-platform v1.1</a></li>
  <li><a href="#heltec-cubecell-dev-platform-v11" id="markdown-toc-heltec-cubecell-dev-platform-v11">Heltec Cubecell dev-platform v1.1</a></li>
</ul>

<h2 id="platformio-core-6111">PlatformIO Core 6.1.11</h2>

<p><a href="https://docs.platformio.org/en/latest/core/index.html">PlatformIO Core</a> is the heart of the whole PlatformIO ecosystem and we are excited to announce the next release with lots of great improvements and bugfixes:</p>

<ul>
  <li>Resolved an issue that caused generated projects for <a href="https://docs.platformio.org/en/latest/integration/ide/vscode.html">PlatformIO IDE for VSCode</a> to break when the <code class="language-plaintext highlighter-rouge">-iprefix</code> compiler flag was used</li>
  <li>Resolved an issue encountered while utilizing the <a href="https://docs.platformio.org/en/latest/core/userguide/pkg/cmd_exec.html">pio pkg exec</a> command on the Windows platform to execute Python scripts from a package</li>
  <li>Implemented a crucial improvement to the <a href="https://docs.platformio.org/en/latest/core/userguide/cmd_run.html">pio run</a> command, guaranteeing that the <code class="language-plaintext highlighter-rouge">monitor</code> target is not executed if any of the preceding targets, such as <code class="language-plaintext highlighter-rouge">upload</code>, encounter failures</li>
  <li><a href="https://docs.platformio.org/en/latest/plus/check-tools/cppcheck.html">Cppcheck</a> v2.11 with new checks, CLI commands and various analysis improvements</li>
  <li>Resolved a critical issue that arose on macOS ARM platforms due to the Python “requests” module, leading to a “ModuleNotFoundError: No module named ‘chardet’” (<a href="https://github.com/platformio/platformio-core/issues/4702">issue #4702</a>)</li>
  <li>Resolved a possible issue that may cause generated projects for <a href="https://docs.platformio.org/en/latest/integration/ide/vscode.html">PlatformIO IDE for VSCode</a> to fail to launch a debug session because of a missing “objdump” binary when GDB is not part of the toolchain package</li>
  <li>Resolved a regression issue that resulted in the malfunction of the Memory Inspection feature within <a href="https://docs.platformio.org/en/latest/home/index.html">PIO Home</a></li>
</ul>

<p>See <a href="https://github.com/platformio/platformio-core/releases/tag/v6.1.10">Release Notes</a> for more detailed information and use <a href="https://docs.platformio.org/en/latest/core/userguide/cmd_upgrade.html">pio upgrade</a> command to update to the latest version.</p>

<h2 id="esp-idf-v51">ESP-IDF v5.1</h2>

<p>We’re happy to announce updated support for the latest release of <strong>ESP-IDF v5.1.1</strong> - the official development framework for the ESP32, ESP32-S and ESP32-C Series SoCs. It provides a self-sufficient SDK for any generic application development on these platforms, using programming languages such as C and C++. ESP-IDF currently powers millions of devices in the field, and enables building a variety of network-connected products, ranging from simple light bulbs and toys to big appliances and industrial devices.</p>

<p><strong>Major enhancements in v5.1:</strong></p>

<ul>
  <li>Added Zigbee support for ESP32-C6</li>
  <li>Added support for ESP32-H2 MP chip</li>
</ul>

<p>More information on project configuration for ESP-IDF can be found <a href="https://docs.platformio.org/en/latest/frameworks/espidf.html#configuration">here</a>.</p>

<p><strong>Related resources for ESP-IDF</strong>:</p>

<ul>
  <li><a href="https://github.com/espressif/esp-idf/releases/tag/v5.1">Release notes for v5.1</a></li>
  <li><a href="https://github.com/espressif/esp-idf/releases/tag/v5.1.1">Release notes for v5.1.1</a></li>
  <li><a href="https://docs.platformio.org/en/latest/frameworks/espidf.html">Documentation for ESP-IDF</a></li>
  <li><a href="https://docs.platformio.org/en/latest/frameworks/espidf.html#boards">Supported boards</a></li>
</ul>

<h2 id="espressif32-dev-platform-v64">Espressif32 dev-platform v6.4</h2>

<p>The new release of the <a href="https://registry.platformio.org/platforms/platformio/espressif32">Espressif 32</a> dev-platform brings support for the latest Arduino Core and ESP-IDF, new boards and dev-kits, several minor fixes and improvements:</p>

<ul>
  <li>Added new boards and dev-kits:
    <ul>
      <li><a href="https://docs.platformio.org/en/latest/boards/espressif32/m5stack-adafruit_matrixportal_esp32s3.html">Adafruit MatrixPortal ESP32-S3</a></li>
      <li><a href="https://docs.platformio.org/en/latest/boards/espressif32/arduino_nano_esp32.html">Arduino Nano ESP32</a></li>
      <li><a href="https://docs.platformio.org/en/latest/boards/espressif32/esp32-c6-devkitm-1.html">Espressif ESP32-C6-DevKitM-1</a></li>
      <li><a href="https://docs.platformio.org/en/latest/boards/espressif32/dfrobot_romeo_esp32s3.html">DFRobot Romeo ESP32-S3</a></li>
      <li><a href="https://docs.platformio.org/en/latest/boards/espressif32/nebulas3.html">Kinetic Dynamics Nebula S3</a></li>
      <li><a href="https://docs.platformio.org/en/latest/boards/espressif32/m5stamp-pico.html">M5Stamp-Pico</a></li>
      <li><a href="https://docs.platformio.org/en/latest/boards/espressif32/m5stack-cores3.html">M5Stack-CoreS3</a></li>
    </ul>
  </li>
  <li>Added support for Arduino v2.0.11 (<a href="https://github.com/espressif/arduino-esp32/releases/tag/2.0.11">release notes</a>)</li>
  <li>Updated ESP-IDF to v5.1.1 (<a href="https://github.com/espressif/esp-idf/releases/tag/v5.1.1">release notes</a>)</li>
  <li>Initial support for ESP32-C6 (<a href="https://github.com/platformio/platform-espressif32/pull/1054">#1054</a>)</li>
  <li>Improved dynamic memory size calculation process (<a href="https://github.com/platformio/platform-espressif32/pull/1159">#1159</a>, <a href="https://github.com/platformio/platform-espressif32/issues/1178">#1178</a>)</li>
  <li>Support for custom application partition names (<a href="https://github.com/platformio/platform-espressif32/pull/1166">#1166</a>)</li>
  <li>Fixed OpenOCD configuration for Lolin S2 boards (<a href="https://github.com/platformio/platform-espressif32/pull/1139">#1139</a>)</li>
  <li>Minor fixes and improvements (<a href="https://github.com/platformio/platform-espressif32/pull/1146">#1146</a>, <a href="https://github.com/platformio/platform-espressif32/pull/1175">#1175</a>, <a href="https://github.com/platformio/platform-espressif32/pull/1176">#1176</a>)</li>
</ul>

<p>See <a href="https://github.com/platformio/platform-espressif32/releases/tag/v6.4.0">Release Notes</a> for more detailed information.</p>

<p><strong>Related resources for the Espressif32 dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/espressif32.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-espressif32/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 id="renesas-ra-dev-platform-v11">Renesas RA dev-platform v1.1</h2>

<p>The new release of the <a href="https://registry.platformio.org/platforms/platformio/renesas-ra">Renesas RA</a> dev-platform v1.9.0 brings support for the latest Arduino core:</p>

<ul>
  <li>Updated Arduino core to v1.0.2 (<a href="https://github.com/arduino/ArduinoCore-renesas/releases/tag/1.0.2">release notes</a>)</li>
  <li>Fixed broken uploader package selection (<a href="https://github.com/platformio/platform-renesas-ra/issues/9">#9</a>)</li>
</ul>

<p><strong>Related resources for the Renesas RA dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/renesas-ra.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-renesas-ra/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 id="heltec-cubecell-dev-platform-v11">Heltec Cubecell dev-platform v1.1</h2>

<p>The new release of the <a href="https://registry.platformio.org/platforms/heltecautomation/heltec-cubecell">Heltec CubeCell</a> dev-platform comes with support for the latest Arduino core and several minor fixes:</p>

<ul>
  <li>Added support for CubeCell core v1.6.0 (<a href="https://github.com/HelTecAutomation/CubeCell-Arduino/releases/tag/V1.6.0">release notes</a>)</li>
  <li>Minor fixes and improvements</li>
</ul>

<p><strong>Related resources for the Heltec CubeCell dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/heltec-cubecell.html">Documentation</a></li>
  <li><a href="https://github.com/HelTecAutomation/platform-heltec-cubecell/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 class="no_toc" id="stay-in-touch-with-us">Stay in touch with us</h2>

<p>Stay tuned to this blog or follow us on <a href="https://www.linkedin.com/company/platformio" target="_blank">LinkedIn</a> and Twitter <a href="https://twitter.com/PlatformIO_Org" target="_blank">@PlatformIO_Org</a> to keep up to date with the latest news, articles and tips!</p>]]></content><author><name>Valerii Koval</name></author><category term="blog" /><category term="news" /><summary type="html"><![CDATA[PlatformIO Core bugfix release, New boards and dev-kits, Support for the latest ESP-IDF v5.1, Updates for Espressif32, Renesas RA and Heltec CubeCell dev-platforms]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://piolabs.com/assets/posts/oss-updates/platformio-oss-august-news.jpg" /><media:content medium="image" url="https://piolabs.com/assets/posts/oss-updates/platformio-oss-august-news.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">PlatformIO Open Source July Updates</title><link href="https://piolabs.com/blog/news/platformio-oss-july-2023-updates.html" rel="alternate" type="text/html" title="PlatformIO Open Source July Updates" /><published>2023-08-07T00:00:00+03:00</published><updated>2023-08-07T00:00:00+03:00</updated><id>https://piolabs.com/blog/news/platformio-oss-july-2023-updates</id><content type="html" xml:base="https://piolabs.com/blog/news/platformio-oss-july-2023-updates.html"><![CDATA[<p>Welcome to the July 2023 updates of <a href="https://platformio.org/">PlatformIO Open Source</a> professional collaborative platform for embedded development.</p>

<p>This month we received a lot of helpful feedback from our community, which let us identify the most important parts of our OSS ecosystem that required our attention, so there are plenty of updates pushed in this month that we hope you will like.</p>

<!-- more -->

<p><img class="figure-img img-fluid rounded" src="/assets/posts/oss-updates/platformio-oss-july-news.jpg" alt="PlatformIO Open Source July Updates" /></p>

<p>During July, we have released a new dev-platform for Renesas RA MCUs, rolled out an updated version of PlatformIO IDE for Visual Studio Code, published a bugfix release for PlatformIO Core, added support for the latest Arm Mbed OS v6.17, resolved a lot of issues. Some of the key highlights include:</p>

<ul id="markdown-toc">
  <li><a href="#platformio-ide-33-for-visual-studio-code" id="markdown-toc-platformio-ide-33-for-visual-studio-code">PlatformIO IDE 3.3 for Visual Studio Code</a></li>
  <li><a href="#platformio-core-619" id="markdown-toc-platformio-core-619">PlatformIO Core 6.1.9</a></li>
  <li><a href="#new-renesas-ra-dev-platform" id="markdown-toc-new-renesas-ra-dev-platform">New Renesas RA dev-platform</a></li>
  <li><a href="#arm-mbed-os-v617" id="markdown-toc-arm-mbed-os-v617">Arm Mbed OS v6.17</a></li>
</ul>

<h2 id="platformio-ide-33-for-visual-studio-code">PlatformIO IDE 3.3 for Visual Studio Code</h2>

<p>We are pleased to announce a new stable release of PlatformIO IDE 3.3 for <a href="https://docs.platformio.org/en/latest/integration/ide/vscode.html">Visual Studio Code</a> with great improvements to the task management functionality:</p>

<p><img class="figure-img img-fluid rounded" src="https://raw.githubusercontent.com/platformio/platformio-vscode-ide/develop/.github/media/platformio-toggle-multienv-tasks.gif" alt="PlatformIO Open Source July Updates" /></p>

<ul>
  <li>Enhanced the user experience in the “Project Tasks” explorer by displaying tasks specific to the selected environment by default</li>
  <li>Introduced a new option that allows seamless switching between multi-environment project tasks</li>
  <li>Expanded the functionality of the “Activity Bar &gt; PlatformIO IDE &gt; Quick Access” menu by including a new item called <a href="https://marketplace.visualstudio.com/items?itemName=alexnesnes.teleplot">Serial &amp; UDP Plotter</a></li>
  <li>Updated the PlatformIO Core Installer Script to version <a href="https://github.com/platformio/platformio-core-installer/releases/tag/v1.2.0">1.2.0</a></li>
</ul>

<p>See <a href="https://github.com/platformio/platformio-vscode-ide/releases/tag/v3.3.0">Release Notes</a> for more detailed information.</p>

<h2 id="platformio-core-619">PlatformIO Core 6.1.9</h2>

<p><a href="https://docs.platformio.org/en/latest/core/index.html">PlatformIO Core</a> is the heart of the whole PlatformIO ecosystem and we are excited to announce the next v6.1.9 release with lots of great improvements and bugfixes:</p>

<ul>
  <li>Added a new <code class="language-plaintext highlighter-rouge">--lint</code> option to the <a href="https://docs.platformio.org/en/latest/core/userguide/project/cmd_config.html">pio project config</a> command, enabling users to efficiently perform linting on the <a href="https://docs.platformio.org/en/latest/projectconf.html">“platformio.ini”</a> configuration file</li>
  <li>Enhanced the parsing of the <a href="https://docs.platformio.org/en/latest/projectconf.html">“platformio.ini”</a> configuration file to provide comprehensive diagnostic information</li>
  <li>Expanded the functionality of the <a href="https://docs.platformio.org/en/latest/manifests/library-json/index.html">library.json</a> manifest by allowing the use of the underscore symbol in the <a href="https://docs.platformio.org/en/latest/manifests/library-json/fields/keywords.html">keywords</a> field</li>
  <li>Optimized project integration templates to address the issue of long paths on Windows (<a href="https://github.com/platformio/platformio-core/issues/4652">issue #4652</a>)</li>
  <li>Refactored <a href="https://docs.platformio.org/en/latest/advanced/unit-testing/index.html">Unit Testing</a> engine to resolve compiler warnings with “-Wpedantic” option (<a href="https://github.com/platformio/platformio-core/pull/4671">pull #4671</a>)</li>
  <li>Eliminated erroneous warning regarding the use of obsolete PlatformIO Core when downgrading to the stable version (<a href="https://github.com/platformio/platformio-core/issues/4664">issue #4664</a>)</li>
  <li>Updated the <a href="https://docs.platformio.org/en/latest/core/userguide/project/cmd_metadata.html">pio project metadata</a> command to return C/C++ flags as parsed Unix shell arguments when dumping project build metadata</li>
  <li>Resolved a critical issue related to the usage of the <code class="language-plaintext highlighter-rouge">-include</code> flag within the <a href="https://docs.platformio.org/en/latest/projectconf/sections/env/options/build/build_flags.html">build_flags</a> option, specifically when employing dynamic variables (<a href="https://github.com/platformio/platformio-core/issues/4682">issue #4682</a>)</li>
  <li>Removed PlatformIO IDE for Atom from the documentation as <a href="https://github.blog/2022-06-08-sunsetting-atom/">Atom has been deprecated</a></li>
  <li>Rectified a regression bug that occurred when the <code class="language-plaintext highlighter-rouge">-include</code> flag was passed via the <a href="https://docs.platformio.org/en/latest/projectconf/sections/env/options/build/build_flags.html">build_flags</a> option as a relative path and subsequently expanded (<a href="https://github.com/platformio/platformio-core/issues/4683">issue #4683</a>)</li>
  <li>Resolved an issue that resulted in unresolved absolute toolchain paths when generating the <a href="https://docs.platformio.org/en/latest/integration/compile_commands.html">Compilation database “compile_commands.json”</a> (<a href="https://github.com/platformio/platformio-core/issues/4684">issue #4684</a>)</li>
</ul>

<p>See <a href="https://github.com/platformio/platformio-core/releases/tag/v6.1.9">Release Notes</a> for more detailed information and use <a href="https://docs.platformio.org/en/latest/core/userguide/cmd_upgrade.html">pio upgrade</a> command to update to the latest version.</p>

<h2 id="new-renesas-ra-dev-platform">New Renesas RA dev-platform</h2>

<p><img class="figure-img img-fluid rounded" src="/assets/posts/2023-08-07-platformio-oss-july-2023-updates/renesas-ra-logo.gif" alt="New PlatformIO development platform for Renesas RA microcontrollers" /></p>

<p>During the last few months, we have received a lot of private and public inquiries from our community about the integration of the Renesas Advanced (RA) 32-bit microcontrollers into the PlatformIO ecosystem. At PlatformIO, we highly value the opinions and feedback of our community members. It is through their insights that we continually strive to enhance our offerings and meet their evolving needs.</p>

<p>With this integration, PlatformIO users gain access to a wider selection of powerful microcontrollers, enabling them to leverage the Renesas RA MCU series’ advanced features and capabilities. We encourage all developers to explore the newly added support for Renesas devices and provide us with valuable feedback to further refine our services.</p>

<p>The first stable release of the Renesas RA dev-platform brings initial support for several development boards and frameworks:</p>

<ul>
  <li>Supported boards:
    <ul>
      <li><a href="http://docs.platformio.org/en/latest/boards/renesas-ra/uno_r4_wifi.html">Arduino Uno R4 WiFi</a></li>
      <li><a href="http://docs.platformio.org/en/latest/boards/renesas-ra/uno_r4_minima.html">Arduino Uno R4 Minima</a></li>
      <li><a href="http://docs.platformio.org/en/latest/boards/renesas-ra/portenta_c33.html">Arduino Portenta C33</a></li>
    </ul>
  </li>
  <li>Initial support for Arduino framework (<a href="https://github.com/arduino/ArduinoCore-renesas/releases/tag/1.0.1">release notes</a>)</li>
  <li>Initial support for CMSIS framework (<a href="https://github.com/platformio/platform-renesas-ra/pull/7">#7</a>)</li>
  <li>Initial support for native FSP framework (<a href="https://github.com/platformio/platform-renesas-ra/pull/7">#7</a>)</li>
</ul>

<p><strong>Related resources for the Renesas RA dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/renesas-ra.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-renesas-ra/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 id="arm-mbed-os-v617">Arm Mbed OS v6.17</h2>

<p>We’re happy to announce updated support for the latest version of <strong>Mbed OS v6.17</strong> - an open source embedded operating system designed specifically for the “things” in the Internet of Things. It includes all the features you need to develop a connected product based on an Arm Cortex-M microcontroller, including security, connectivity, an RTOS and drivers for sensors and I/O devices.</p>

<p>More information on project configuration for the Mbed OS can be found <a href="https://docs.platformio.org/en/latest/frameworks/mbed.html#configuration-system">here</a>.</p>

<p><strong>Related resources for Arm Mbed OS</strong>:</p>

<ul>
  <li><a href="https://github.com/ARMmbed/mbed-os/releases/tag/mbed-os-6.17.0">Release notes for v6.17</a></li>
  <li><a href="https://docs.platformio.org/en/latest/frameworks/mbed.html">Documentation for Mbed OS</a></li>
  <li><a href="https://docs.platformio.org/en/latest/frameworks/mbed.html#platforms">Supported development platforms</a></li>
  <li><a href="https://docs.platformio.org/en/latest/frameworks/mbed.html#boards">Supported boards</a></li>
</ul>

<h2 class="no_toc" id="stay-in-touch-with-us">Stay in touch with us</h2>

<p>Stay tuned to this blog or follow us on <a href="https://www.linkedin.com/company/platformio" target="_blank">LinkedIn</a> and Twitter <a href="https://twitter.com/PlatformIO_Org" target="_blank">@PlatformIO_Org</a> to keep up to date with the latest news, articles and tips!</p>]]></content><author><name>Valerii Koval</name></author><category term="blog" /><category term="news" /><summary type="html"><![CDATA[Improved PlatformIO IDE for Microsoft VSCode, PlatformIO Core bugfix release, New Renesas RA dev-platform, New boards and dev-kits, support for the latest Mbed OS]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://piolabs.com/assets/posts/oss-updates/platformio-oss-july-news.jpg" /><media:content medium="image" url="https://piolabs.com/assets/posts/oss-updates/platformio-oss-july-news.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">PlatformIO Open Source June Updates</title><link href="https://piolabs.com/blog/news/platformio-oss-june-2023-updates.html" rel="alternate" type="text/html" title="PlatformIO Open Source June Updates" /><published>2023-07-03T00:00:00+03:00</published><updated>2023-07-03T00:00:00+03:00</updated><id>https://piolabs.com/blog/news/platformio-oss-june-2023-updates</id><content type="html" xml:base="https://piolabs.com/blog/news/platformio-oss-june-2023-updates.html"><![CDATA[<p>Welcome to the June 2023 updates of <a href="https://platformio.org/">PlatformIO Open Source</a> professional collaborative platform for embedded development.</p>

<p>This month we received a lot of helpful feedback from our community, which let us identify the most important parts of our OSS ecosystem that required our attention, so there are plenty of updates pushed in this month that we hope you will like.</p>

<!-- more -->

<p><img class="figure-img img-fluid rounded" src="/assets/posts/oss-updates/platformio-oss-june-news.jpg" alt="PlatformIO Open Source June Updates" /></p>

<p>During June, we rolled out an updated version of PlatformIO IDE for Visual Studio Code, added support for the latest Arduino cores for ST STM32, Nordic nRF52 and Microchip SAM development platforms, fixed a lot of issues. Some of the key highlights include:</p>

<ul id="markdown-toc">
  <li><a href="#platformio-ide-32-for-visual-studio-code" id="markdown-toc-platformio-ide-32-for-visual-studio-code">PlatformIO IDE 3.2 for Visual Studio Code</a></li>
  <li><a href="#st-stm32-v160" id="markdown-toc-st-stm32-v160">ST STM32 v16.0</a></li>
  <li><a href="#nordic-nrf52-v100" id="markdown-toc-nordic-nrf52-v100">Nordic nRF52 v10.0</a></li>
  <li><a href="#microchip-sam-v82" id="markdown-toc-microchip-sam-v82">Microchip SAM v8.2</a></li>
  <li><a href="#chips-alliance-v13" id="markdown-toc-chips-alliance-v13">CHIPS Alliance v1.3</a></li>
</ul>

<h2 id="platformio-ide-32-for-visual-studio-code">PlatformIO IDE 3.2 for Visual Studio Code</h2>

<p>We are pleased to announce a new stable release of PlatformIO IDE 3.2 for <a href="https://docs.platformio.org/en/latest/integration/ide/vscode.html">Visual Studio Code</a> that brings a new powerful linting feature that highlights syntactical and stylistic issues in the <a href="https://docs.platformio.org/en/latest/projectconf/index.html">“platformio.ini”</a> configuration file:</p>

<p><img class="figure-img img-fluid rounded" src="https://raw.githubusercontent.com/platformio/platformio-vscode-ide/develop/.github/media/platformio-ini-lint-demo.png" alt="PlatformIO Open Source June Updates" /></p>

<p>Other enhancements and bugfixes:</p>

<ul>
  <li>Improved project cleanup process by utilizing the <code class="language-plaintext highlighter-rouge">fullclean</code> target instead of <code class="language-plaintext highlighter-rouge">cleanall</code>. This ensures a thorough clean-up, including the removal of dependent libraries</li>
  <li>Updated PlatformIO Core Installer Script to <a href="https://github.com/platformio/platformio-core-installer/releases/tag/v1.1.3">v1.1.3</a></li>
  <li>Resolved an issue where certain buttons were missing from the status bar in VSCode 1.79 after the recent update (issue <a href="https://github.com/platformio/platformio-vscode-ide/issues/3736">#3736</a>)</li>
</ul>

<p>See <a href="https://github.com/platformio/platformio-vscode-ide/releases/tag/v3.2.0">Release Notes</a> for more detailed information.</p>

<h2 id="st-stm32-v160">ST STM32 v16.0</h2>

<p>The new release of the <a href="https://registry.platformio.org/platforms/platformio/ststm32">ST STM32</a> v16.0.0 comes with support for the latest Arduino core, updated packages and several minor improvements:</p>

<ul>
  <li>Updated STM32 Arduino Core to the latest v2.5.0 (<a href="https://github.com/stm32duino/Arduino_Core_STM32/releases/tag/2.5.0">release notes</a>)</li>
  <li>Updated OpenOCD package to the latest v0.12</li>
  <li>Switched Arduino Core to GCC v10.3 packages (<a href="https://github.com/platformio/platform-ststm32/issues/301">#301</a>, <a href="https://github.com/platformio/platform-ststm32/issues/486">#486</a>, <a href="https://github.com/platformio/platform-ststm32/issues/605">#605</a>, <a href="https://github.com/platformio/platform-ststm32/issues/650">#650</a>)</li>
  <li>Enabled CMSIS-DAP for genericSTM32F103C6 (<a href="https://github.com/platformio/platform-ststm32/issues/696">#696</a>)</li>
  <li>Various memory size corrections (<a href="https://github.com/platformio/platform-ststm32/issues/617">#617</a>, <a href="https://github.com/platformio/platform-ststm32/issues/649">#649</a>, <a href="https://github.com/platformio/platform-ststm32/issues/656">#656</a>, <a href="https://github.com/platformio/platform-ststm32/issues/699">#699</a>)</li>
  <li>Dropped support for legacy Mbed v5</li>
</ul>

<p><strong>Related resources for the ST STM32 dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/ststm32.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-ststm32/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 id="nordic-nrf52-v100">Nordic nRF52 v10.0</h2>

<p>The latest release of the <a href="https://registry.platformio.org/platforms/platformio/nordicnrf52">Nordic nRF52</a> dev-platform brings support for the latest Adafruit core and updated OpenOCD v0.12 packages:</p>

<ul>
  <li>Updated Arduino Adafruit core to v1.5.0 (<a href="https://github.com/adafruit/Adafruit_nRF52_Arduino/releases/tag/1.5.0">release notes</a>)</li>
  <li>Updated OpenOCD package to the latest v0.12</li>
  <li>Dropped support for legacy Mbed v5</li>
</ul>

<p><strong>Related resources for the Nordic nRF52 dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/nordicnrf52.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-nordicnrf52/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 id="microchip-sam-v82">Microchip SAM v8.2</h2>

<p>The new release of the <a href="https://registry.platformio.org/platforms/platformio/atmelsam">Microchip SAM</a> dev-platform brings updates for several Arduino cores, updated OpenOCD v0.12 and several minor improvements:</p>

<ul>
  <li>Updated Arduino Adafruit Core to v1.7.13 (<a href="https://github.com/adafruit/ArduinoCore-samd/releases/tag/1.7.13">release notes</a>)</li>
  <li>Updated Arduino Seeed Core to v1.8.4 (<a href="https://github.com/Seeed-Studio/ArduinoCore-samd/releases/tag/v1.8.4">release notes</a>)</li>
  <li>Updated Arduino SODAQ Core to v1.8.9</li>
  <li>Updated OpenOCD package to the latest v0.12</li>
  <li>Removed duplicate macro in Seeeduino Wio Terminal manifest</li>
</ul>

<p><strong>Related resources for the Microchip SAM dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/atmelsam.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-atmelsam/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 id="chips-alliance-v13">CHIPS Alliance v1.3</h2>

<p>The new release of the <a href="https://registry.platformio.org/platforms/platformio/chipsalliance">CHIPS Alliance</a> dev-platform comes with support for Verilator-based RVfpga-ViDBo and RVfpga-Pipeline simulation tools:</p>

<ul>
  <li>Added new option for supporting RVfpga-ViDBo and RVfpga-Pipeline (<a href="https://github.com/platformio/platform-chipsalliance/issues/12">#12</a>)</li>
  <li>Fixed “program_fpga” target errors (<a href="https://github.com/platformio/platform-chipsalliance/issues/11">#11</a>)</li>
</ul>

<p><strong>Related resources for the CHIPS Alliance dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/chipsalliance.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-chipsalliance/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 class="no_toc" id="stay-in-touch-with-us">Stay in touch with us</h2>

<p>Stay tuned to this blog or follow us on <a href="https://www.linkedin.com/company/platformio" target="_blank">LinkedIn</a> and Twitter <a href="https://twitter.com/PlatformIO_Org" target="_blank">@PlatformIO_Org</a> to keep up to date with the latest news, articles and tips!</p>]]></content><author><name>Valerii Koval</name></author><category term="blog" /><category term="news" /><summary type="html"><![CDATA[Improved PlatformIO IDE for Microsoft VSCode, Updates for ST STM32, Nordic nRF52 and Microchip SAM dev-platforms]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://piolabs.com/assets/posts/oss-updates/platformio-oss-june-news.jpg" /><media:content medium="image" url="https://piolabs.com/assets/posts/oss-updates/platformio-oss-june-news.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">PlatformIO Open Source May Updates</title><link href="https://piolabs.com/blog/news/platformio-oss-may-2023-updates.html" rel="alternate" type="text/html" title="PlatformIO Open Source May Updates" /><published>2023-06-05T00:00:00+03:00</published><updated>2023-06-05T00:00:00+03:00</updated><id>https://piolabs.com/blog/news/platformio-oss-may-2023-updates</id><content type="html" xml:base="https://piolabs.com/blog/news/platformio-oss-may-2023-updates.html"><![CDATA[<p>Welcome to the May 2023 updates of <a href="https://platformio.org/">PlatformIO Open Source</a> professional collaborative platform for embedded development.</p>

<p>This month we received a lot of helpful feedback from our community, which let us identify the most important parts of our OSS ecosystem that required our attention, so there are plenty of updates pushed in this month that we hope you will like.</p>

<!-- more -->

<p><img class="figure-img img-fluid rounded" src="/assets/posts/oss-updates/platformio-oss-may-news.jpg" alt="PlatformIO Open Source May Updates" /></p>

<p>During May, we published a bugfix release for PlatformIO Core, added support for the latest ESP-IDF v5.0.2, rolled out updates for the Espressif32 and Microchip AVR/megaAVR development platforms, resolved a lot of issues. Some of the key highlights include:</p>

<ul id="markdown-toc">
  <li><a href="#platformio-core-617" id="markdown-toc-platformio-core-617">PlatformIO Core 6.1.7</a></li>
  <li><a href="#esp-idf-v502" id="markdown-toc-esp-idf-v502">ESP-IDF v5.0.2</a></li>
  <li><a href="#espressif32-dev-platform-v63" id="markdown-toc-espressif32-dev-platform-v63">Espressif32 dev-platform v6.3</a></li>
  <li><a href="#microchip-avr-dev-platform-v42" id="markdown-toc-microchip-avr-dev-platform-v42">Microchip AVR dev-platform v4.2</a></li>
  <li><a href="#microchip-megaavr-dev-platform-v19" id="markdown-toc-microchip-megaavr-dev-platform-v19">Microchip megaAVR dev-platform v1.9</a></li>
</ul>

<h2 id="platformio-core-617">PlatformIO Core 6.1.7</h2>

<p><a href="https://docs.platformio.org/en/latest/core/index.html">PlatformIO Core</a> is the heart of the whole PlatformIO ecosystem and we are excited to announce the next v6.1.7 release with lots of great improvements and bugfixes:</p>

<ul>
  <li>Introduced a new <code class="language-plaintext highlighter-rouge">--sample-code</code> option to the <a href="https://docs.platformio.org/en/latest/core/userguide/project/cmd_init.html">pio project init</a> command, which allows users to include sample code in the newly created project</li>
  <li>Added validation for <a href="https://docs.platformio.org/en/latest/projectconf/sections/env/index.html#working-env-name">project working environment names</a> to ensure that they only contain lowercase letters <code class="language-plaintext highlighter-rouge">a-z</code>, numbers <code class="language-plaintext highlighter-rouge">0-9</code>, and special characters <code class="language-plaintext highlighter-rouge">_</code> (underscore) and <code class="language-plaintext highlighter-rouge">-</code> (hyphen)</li>
  <li>Added the ability to show a detailed library dependency tree only in <a href="https://docs.platformio.org/en/latest/core/userguide/cmd_run.html#cmdoption-pio-run-v">verbose mode</a>, which can help you understand the relationship between libraries and troubleshoot issues more effectively (<a href="https://github.com/platformio/platformio-core/issues/4517">issue #4517</a>)</li>
  <li>Added the ability to run only the <a href="https://docs.platformio.org/en/latest/core/userguide/device/cmd_monitor.html">device monitor</a> when using the <a href="https://docs.platformio.org/en/latest/core/userguide/cmd_run.html">pio run -t monitor</a> command, saving you time and resources by skipping the build process</li>
  <li>Implemented a new feature to store device monitor logs in the project’s <code class="language-plaintext highlighter-rouge">logs</code> folder, making it easier to access and review device monitor logs for your projects (<a href="https://github.com/platformio/platformio-core/issues/4596">issue #4596</a>)</li>
  <li>Improved support for projects located on Windows network drives, including Network Shared Folder, Dropbox, OneDrive, Google Drive, and other similar services (<a href="https://github.com/platformio/platformio-core/issues/3417">issue #3417</a>)</li>
  <li>Improved source file filtering functionality for the <a href="https://docs.platformio.org/en/latest/advanced/static-code-analysis/index.html">Static Code Analysis</a> feature, making it easier to analyze only the code you need to</li>
  <li>Upgraded the build engine to the latest version of SCons (4.5.2) to improve build performance, reliability, and compatibility with other tools and systems (<a href="https://github.com/SCons/scons/releases/tag/4.5.2">release notes</a>)</li>
  <li>Implemented a fix for shell injection vulnerabilities when converting INO files to CPP, ensuring your code is safe and secure (<a href="https://github.com/platformio/platformio-core/issues/4532">issue #4532</a>)</li>
  <li>Restored the project generator for the <a href="https://docs.platformio.org/en/latest/integration/ide/netbeans.html">NetBeans IDE</a>, providing you with more flexibility and options for your development workflow</li>
  <li>Resolved installation issues with PIO Remote on Raspberry Pi and other small form-factor PCs (<a href="https://github.com/platformio/platformio-core/issues/4425">issue #4425</a>, <a href="https://github.com/platformio/platformio-core/issues/4493">issue #4493</a>, <a href="https://github.com/platformio/platformio-core/issues/4607">issue #4607</a>)</li>
  <li>Resolved an issue where the <a href="https://docs.platformio.org/en/latest/projectconf/sections/platformio/options/directory/build_cache_dir.html">build_cache_dir</a> setting was not being recognized consistently across multiple environments (<a href="https://github.com/platformio/platformio-core/issues/4574">issue #4574</a>)</li>
  <li>Resolved an issue where organization details could not be updated using the <a href="https://docs.platformio.org/en/latest/core/userguide/org/cmd_update.html">pio org update</a> command</li>
  <li>Resolved an issue where the incorrect debugging environment was generated for VSCode in “Auto” mode (<a href="https://github.com/platformio/platformio-core/issues/4597">issue #4597</a>)</li>
  <li>Resolved an issue where native tests would fail if a custom program name was specified (<a href="https://github.com/platformio/platformio-core/issues/4546">issue #4546</a>)</li>
  <li>Resolved an issue where the PlatformIO <a href="https://docs.platformio.org/en/latest/plus/debugging.html">Debugging</a> solution was not escaping the tool installation process into MI2 correctly (<a href="https://github.com/platformio/platformio-core/issues/4565">issue #4565</a>)</li>
  <li>Resolved an issue where multiple targets were not executed sequentially (<a href="https://github.com/platformio/platformio-core/issues/4604">issue #4604</a>)</li>
  <li>Resolved an issue where upgrading PlatformIO Core fails on Windows with Python 3.11 (<a href="https://github.com/platformio/platformio-core/issues/4540">issue #4540</a>)</li>
</ul>

<p>See <a href="https://github.com/platformio/platformio-core/releases/tag/v6.1.7">Release Notes</a> for more detailed information and use <a href="https://docs.platformio.org/en/latest/core/userguide/cmd_upgrade.html">pio upgrade</a> command to update to the latest version.</p>

<h2 id="esp-idf-v502">ESP-IDF v5.0.2</h2>

<p>We’re happy to announce updated support for the latest patch update of <strong>ESP-IDF v5.0.2</strong> - the official development framework for the ESP32, ESP32-S and ESP32-C Series SoCs. It provides a self-sufficient SDK for any generic application development on these platforms, using programming languages such as C and C++. ESP-IDF currently powers millions of devices in the field, and enables building a variety of network-connected products, ranging from simple light bulbs and toys to big appliances and industrial devices.</p>

<p><strong>Major enhancements in v5.0.2:</strong></p>

<ul>
  <li>Support BLE privacy by controller</li>
  <li>Added custom GATT server functionality and encryption</li>
  <li>Improved the handling of station SA query procedures</li>
</ul>

<p>More information on project configuration for ESP-IDF can be found <a href="https://docs.platformio.org/en/latest/frameworks/espidf.html#configuration">here</a>.</p>

<p><strong>Related resources for ESP-IDF</strong>:</p>

<ul>
  <li><a href="https://github.com/espressif/esp-idf/releases/tag/v5.0.2">Release notes for v5.0.2</a></li>
  <li><a href="https://docs.platformio.org/en/latest/frameworks/espidf.html">Documentation for ESP-IDF</a></li>
  <li><a href="https://docs.platformio.org/en/latest/frameworks/espidf.html#boards">Supported boards</a></li>
</ul>

<h2 id="espressif32-dev-platform-v63">Espressif32 dev-platform v6.3</h2>

<p>The new release of the <a href="https://registry.platformio.org/platforms/platformio/espressif32">Espressif 32</a> dev-platform brings support for the latest ESP-IDF v5.0.2, updated Arduino core v2.0.9 and several minor fixes and improvements:</p>

<ul>
  <li>Added support for Arduino v2.0.9 (<a href="https://github.com/espressif/arduino-esp32/releases/tag/2.0.9">release notes</a>)</li>
  <li>Added support for ESP-IDF v5.0.2 (<a href="https://github.com/espressif/esp-idf/releases/tag/v5.0.2">release notes</a>)</li>
  <li>Better handling of macros exported from the IDF build system (<a href="https://github.com/platformio/platform-espressif32/issues/1080">#1080</a>)</li>
  <li>Improved integration with the upstream version of ESP32 Arduino core (<a href="https://github.com/platformio/platform-espressif32/issues/1092">#1092</a>)</li>
  <li>Fixed flash memory size for ESP32S3 CAM LCD board (<a href="https://github.com/platformio/platform-espressif32/issues/1095">#1095</a>)</li>
</ul>

<p>See <a href="https://github.com/platformio/platform-espressif32/releases/tag/v6.3.0">Release Notes</a> for more detailed information.</p>

<p><strong>Related resources for the Espressif32 dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/espressif32.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-espressif32/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 id="microchip-avr-dev-platform-v42">Microchip AVR dev-platform v4.2</h2>

<p>The latest release of the <a href="https://registry.platformio.org/platforms/platformio/atmelavr">Microchip AVR</a> v4.2.0 comes with updates for highly customizable Arduino cores by MCUdude and initial support for the <code class="language-plaintext highlighter-rouge">Urboot</code> bootloader:</p>

<ul>
  <li>Updated MCUdude’s cores (#302):
    <ul>
      <li>MajorCore <code class="language-plaintext highlighter-rouge">v2.2.2</code> (<a href="https://github.com/MCUdude/MajorCore/releases/tag/v2.2.2">release notes</a>)</li>
      <li>MegaCore <code class="language-plaintext highlighter-rouge">v2.2.3</code> (<a href="https://github.com/MCUdude/MegaCore/releases/tag/v2.2.3">release notes</a>)</li>
      <li>MightyCore <code class="language-plaintext highlighter-rouge">v2.2.2</code> (<a href="https://github.com/MCUdude/MightyCore/releases/tag/v2.2.2">release notes</a>)</li>
      <li>MiniCore <code class="language-plaintext highlighter-rouge">v2.2.2</code> (<a href="https://github.com/MCUdude/MiniCore/releases/tag/v2.2.2">release notes</a>)</li>
      <li>MicroCore <code class="language-plaintext highlighter-rouge">v2.3.0</code> (<a href="https://github.com/MCUdude/MicroCore/releases/tag/v2.3.0">release notes</a>)</li>
    </ul>
  </li>
  <li>Added initial support for the <code class="language-plaintext highlighter-rouge">Urboot</code> bootloader for MicroCore (<a href="https://github.com/platformio/platform-atmelavr/pull/311">#311</a>)</li>
  <li>Fixed an issue with missing <code class="language-plaintext highlighter-rouge">tool-avrdude</code> package when bootloader target is selected (<a href="https://github.com/platformio/platform-atmelavr/issues/269">#269</a>)</li>
</ul>

<p>See <a href="https://github.com/platformio/platform-atmelavr/releases/tag/v4.2.0">Release Notes</a> for more detailed information.</p>

<p><strong>Related resources for the Microchip AVR dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/atmelavr.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-atmelavr/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 id="microchip-megaavr-dev-platform-v19">Microchip megaAVR dev-platform v1.9</h2>

<p>The new release of the <a href="https://registry.platformio.org/platforms/platformio/atmelmegaavr">Microchip megaAVR</a> v1.9.0 brings several updated Arduino cores:</p>

<ul>
  <li>Updated <code class="language-plaintext highlighter-rouge">MegaCoreX</code> to v1.1.2 (<a href="https://github.com/MCUdude/MegaCoreX/releases/tag/v1.1.2">release notes</a>)</li>
  <li>Updated <code class="language-plaintext highlighter-rouge">megatinycore</code> to v2.6.7 (<a href="https://github.com/SpenceKonde/megaTinyCore/releases/tag/2.6.7">release notes</a>)</li>
  <li>Updated <code class="language-plaintext highlighter-rouge">Arduino</code> core to v1.8.8 (<a href="https://github.com/arduino/ArduinoCore-megaavr/releases/tag/1.8.8">release notes</a>)</li>
</ul>

<p><strong>Related resources for the Microchip megaAVR dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/atmelmegaavr.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-atmelmegaavr/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 class="no_toc" id="stay-in-touch-with-us">Stay in touch with us</h2>

<p>Stay tuned to this blog or follow us on <a href="https://www.linkedin.com/company/platformio" target="_blank">LinkedIn</a> and Twitter <a href="https://twitter.com/PlatformIO_Org" target="_blank">@PlatformIO_Org</a> to keep up to date with the latest news, articles and tips!</p>]]></content><author><name>Valerii Koval</name></author><category term="blog" /><category term="news" /><summary type="html"><![CDATA[PlatformIO Core bugfix release, Support for the latest ESP-IDF, Updated Arduino cores Espressif32 and Microchip AVR/megaAVR]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://piolabs.com/assets/posts/oss-updates/platformio-oss-may-news.jpg" /><media:content medium="image" url="https://piolabs.com/assets/posts/oss-updates/platformio-oss-may-news.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">A Deep Dive into the ARM Debug Access Port</title><link href="https://piolabs.com/blog/engineering/diving-into-arm-debug-access-port.html" rel="alternate" type="text/html" title="A Deep Dive into the ARM Debug Access Port" /><published>2023-05-09T00:00:00+03:00</published><updated>2023-05-09T00:00:00+03:00</updated><id>https://piolabs.com/blog/engineering/diving-into-arm-debug-access-port</id><content type="html" xml:base="https://piolabs.com/blog/engineering/diving-into-arm-debug-access-port.html"><![CDATA[<p><img class="figure-img img-fluid rounded" src="/assets/posts/2023-05-09-diving-into-arm-debug-access-port/title.jpg" alt="PlatformIO lowers the barriers to entry the IoT market as much as possible" /></p>

<p>The ARM Debug Access Port (DAP) is a crucial component of the ARM debugging architecture that allows developers to gain access to and debug embedded systems running on ARM-based processors. The DAP provides a standardized interface for accessing and controlling various debug-related features, including debugging and programming interfaces, trace data, and system registers.<!-- more --> Whether you are a seasoned embedded systems developer or just getting started with ARM-based SoC development, this article will provide valuable insights into the architecture of the ARM Debug Access Port and its functionality.</p>

<h3>Table of Contents</h3>

<ul id="markdown-toc">
  <li><a href="#debug-access-port-architecture" id="markdown-toc-debug-access-port-architecture">Debug Access Port Architecture</a></li>
  <li><a href="#debug-port-dp" id="markdown-toc-debug-port-dp">Debug Port (DP)</a>    <ul>
      <li><a href="#jtag-debug-port-jtag-dp" id="markdown-toc-jtag-debug-port-jtag-dp">JTAG Debug Port (JTAG-DP)</a></li>
      <li><a href="#debug-port-registers" id="markdown-toc-debug-port-registers">Debug Port Registers</a></li>
      <li><a href="#accessing-the-dp-registers" id="markdown-toc-accessing-the-dp-registers">Accessing the DP registers</a></li>
    </ul>
  </li>
  <li><a href="#access-ports" id="markdown-toc-access-ports">Access Ports</a>    <ul>
      <li><a href="#memory-access-port-registers" id="markdown-toc-memory-access-port-registers">Memory Access Port Registers</a></li>
      <li><a href="#addressing-of-ap-registers" id="markdown-toc-addressing-of-ap-registers">Addressing of AP Registers</a></li>
      <li><a href="#accessing-the-ap-registers" id="markdown-toc-accessing-the-ap-registers">Accessing the AP registers</a></li>
    </ul>
  </li>
  <li><a href="#practical-part" id="markdown-toc-practical-part">Practical Part</a>    <ul>
      <li><a href="#writing-a-variable-to-memory" id="markdown-toc-writing-a-variable-to-memory">Writing a variable to memory</a></li>
      <li><a href="#reading-a-variable-from-memory" id="markdown-toc-reading-a-variable-from-memory">Reading a variable from memory</a></li>
    </ul>
  </li>
  <li><a href="#links" id="markdown-toc-links">Links</a></li>
</ul>

<h2 id="debug-access-port-architecture">Debug Access Port Architecture</h2>

<p>The DAP is the primary “unit” of the ARM Debug Interface (ADI). DAP is a module that contains a set of registers and logic required to provide microcontroller debugging via a debug interface. DAP consists of two main components: <strong>Debug Port (DP)</strong> and <strong>Access Port (AP)</strong>.</p>

<div class="alert alert-warning" role="alert">
  <b>Important</b>: Currently, most processors are implementing <b>ADIv5</b> (specified in Arm IHI0031E), while the newer <b>ADIv6</b> (see Arm IHI0074C) is being slowly phased in. Because it is more popular, I'll be focusing here on the ADIv5 standard.
</div>

<p>The <strong>Debug Port</strong> provides control of the DAP and establishes a connection between the debugger and the target device. DP performs functions such as initialization, reset, and operation status checking. This module is conditionally divided into two parts: common and specific to a particular debugging protocol. The common part contains registers used to configure and operate the DP module, and the specific part is responsible for working with external debugging protocols. According to the documentation, our microcontroller supports two debugging protocols: SWD and JTAG, but in this series of articles, I decided to choose JTAG for consideration. Therefore, in the future, unless specifically stated otherwise, I will describe the operation of DAP specifically in the context of the JTAG protocol.</p>

<p>The <strong>Access Port</strong> provides access to various resources of the microcontroller, such as memory. The Access Port can have several data exchange interfaces, such as APB (Advanced Peripheral Bus), AHB (Advanced High-performance Bus), and AXI (Advanced eXtensible Interface), which are used to access various device resources. That is, access to all modules connected to the AHB bus, for example, will be provided through a special AHB-AP.</p>

<p>The approximate structural diagram of DAP is shown in the following figure:</p>

<figure class="figure mb-7">
    <a data-bigpicture="{&quot;imgSrc&quot;: &quot;/assets/posts/2023-05-09-diving-into-arm-debug-access-port/DAP_Diagram.png&quot;}" href="#">
      <img class="img-fluid screenshot mw-md-100" src="/assets/posts/2023-05-09-diving-into-arm-debug-access-port/DAP_Diagram.png" />
    </a>
  <figcaption class="figure-caption text-center">
    <br />Figure 1 - Debug Access Port (DAP)
  </figcaption>
</figure>

<p>Now let’s consider each component of DAP shown on this block diagram.</p>

<div class="alert alert-warning" role="alert">
  <b>Note:</b> Despite the fact that this article was written on the basis of official documentation from Arm, nevertheless, not all topics are covered in it, so for detailed information you need to refer to the documentation.
</div>

<h2 id="debug-port-dp">Debug Port (DP)</h2>

<h3 id="jtag-debug-port-jtag-dp">JTAG Debug Port (JTAG-DP)</h3>

<p>Since JTAG-DP must support the operation of the microcontroller via the JTAG protocol, external connection is made through the JTAG standard pins:</p>

<figure class="figure mb-7">
  <table class="table table-sm table-striped table-bordered" style="text-align: center">
    <thead class="thead">
      <tr class="table-dark">
        <th scope="col">JTAG-DP pin</th>
        <th scope="col">JTAG pin</th>
        <th scope="col">Direction</th>
        <th scope="col">Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>DBGTDI</td>
        <td>TDI</td>
        <td>INPUT</td>
        <td>Debug Data In</td>
      </tr>
      <tr>
        <td>DBGTDO</td>
        <td>TDO</td>
        <td>OUTPUT</td>
        <td>Debug Data Out</td>
      </tr>
      <tr>
        <td>TCK</td>
        <td>TCK</td>
        <td>INPUT</td>
        <td>Debug Clock</td>
      </tr>
      <tr>
        <td>DBGTMS</td>
        <td>TMS</td>
        <td>INPUT</td>
        <td>Debug Mode Select</td>
      </tr>
      <tr>
        <td>DBGTRSTn</td>
        <td>TRST</td>
        <td>INPUT</td>
        <td>Debug TAP Reset</td>
      </tr>
    </tbody>
  </table>
  <figcaption class="figure-caption text-center">
    Table 1 - JTAG pinout
  </figcaption>
</figure>

<p>The JTAG-DP wire-level interface is through scan chains and comprises:</p>

<ul>
  <li>
    <p>a Debug TAP State Machine (DBGTAPSM) - This state machine is the cornerstone of the JTAG protocol and will be discussed in detail in the next article dedicated to this protocol.</p>
  </li>
  <li>
    <p>an Instruction Register (IR) and associated IR scan chain, used to control the behavior of the JTAG-DP and the currently-selected data register. The specific data register we want to work with is selected by writing various commands to this register.</p>
  </li>
  <li>
    <p>several Data Registers (DRs) and associated DR scan chains.</p>
  </li>
</ul>

<h4 class="no_toc" id="jtag-registers">JTAG Registers</h4>

<h5 id="instruction-register-ir">Instruction Register (IR)</h5>

<p>The Debug TAP State Machine is implemented with a 4-bit instruction register (<code class="language-plaintext highlighter-rouge">IR</code>).</p>

<p>The Instruction Register contains the current command for the DAP controller. This register serves as a kind of entry point when working with DAP over the JTAG protocol. You need to write a command to this register that will determine the data register you want to work with.</p>

<p>The list of commands for the <code class="language-plaintext highlighter-rouge">IR</code> register is presented in the following table:</p>

<figure class="figure mb-7">
  <table class="table table-sm table-striped table-bordered" style="text-align: center">
    <thead class="thead">
      <tr class="table-dark">
        <th scope="col">IR instruction value</th>
        <th scope="col">DR name</th>
        <th scope="col">DR length</th>
        <th scope="col">Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>b1000</td>
        <td>ABORT</td>
        <td>35</td>
        <td>JTAG-DP Abort Register</td>
      </tr>
      <tr>
        <td>b1010</td>
        <td>DPACC</td>
        <td>35</td>
        <td>JTAG-DP DP Register</td>
      </tr>
      <tr>
        <td>b1011</td>
        <td>APACC</td>
        <td>35</td>
        <td>JTAG-DP AP Register </td>
      </tr>
      <tr>
        <td>b1110</td>
        <td>IDCODE</td>
        <td>32</td>
        <td>Device ID Code Register</td>
      </tr>
      <tr>
        <td>b1111</td>
        <td>BYPASS</td>
        <td>1</td>
        <td>JTAG-DP Bypass Register</td>
      </tr>
    </tbody>
  </table>
  <figcaption class="figure-caption text-center">
    Table 2 - List of standard JTAG commands supported by DAP
  </figcaption>
</figure>

<h5 id="abort-instruction">ABORT Instruction</h5>

<p>The <code class="language-plaintext highlighter-rouge">ABORT</code> command in JTAG-DP is used to interrupt the execution of the current debugging operation and return control to the debugger. It allows performing a so-called <em>debug reset</em> of the processor.</p>

<p>During the debugging of a processor, the debugger establishes a connection with JTAG-DP and sends commands to read and write registers, execute instructions, etc. In some situations, there may be a need to interrupt the execution of the current debugging operation and return control to the debugger.</p>

<p>For example, in case of program hang or when there is an error in the debugging script. In such situations, the debugger can use the <code class="language-plaintext highlighter-rouge">ABORT</code> register to perform a <em>debug reset</em> of the processor and return control to the debugger.</p>

<h5 id="bypass-instruction">BYPASS Instruction</h5>

<p>The <code class="language-plaintext highlighter-rouge">BYPASS</code> command connects the TDI and TDO pins directly through a one-bit register called <code class="language-plaintext highlighter-rouge">BYPASS</code>. This command can be used to bypass some components connected to the JTAG chain. It may not be very clear now, but this command is closely related to the operation principle of the JTAG protocol and it’s difficult to explain it without discussing this principle. The next article will be dedicated to the JTAG protocol, so let’s postpone the explanation of this command for now. It’s not necessary for understanding the information in the current article.</p>

<h5 id="idcode-instruction">IDCODE Instruction</h5>

<p>The <code class="language-plaintext highlighter-rouge">IDCODE</code> command is used to identify the microchip connected to the JTAG chain. This command connects the <code class="language-plaintext highlighter-rouge">IDCODE</code> register, which contains a unique 32-bit identifier for the microchip, as the data register.</p>

<p>Reading the <code class="language-plaintext highlighter-rouge">IDCODE</code> register can be useful for verifying that the microchip corresponds to the expected model or version, as well as for checking the integrity and proper functioning of the JTAG chain.</p>

<h5 id="dpacc-instruction">DPACC Instruction</h5>

<p>The <code class="language-plaintext highlighter-rouge">DPACC</code> command connects the 35-bit <code class="language-plaintext highlighter-rouge">DPACC</code> (Debug Port Access) register as the data register, which is used to access some Debug Port registers.</p>

<h5 id="apacc-instruction">APACC Instruction</h5>

<p>The <code class="language-plaintext highlighter-rouge">APACC</code> command connects the 35-bit <code class="language-plaintext highlighter-rouge">APACC</code> (Access Port Access) register as the data register, which is used to access registers of the selected Access Port.</p>

<h4 class="no_toc" id="data-register-dr">Data Register (DR)</h4>

<p>The Data Register is a JTAG register through which all communication with one of the five registers listed in Table 1 occurs. In other words, by specifying the code of one of the five registers in the <code class="language-plaintext highlighter-rouge">IR</code> register, you are connecting the <code class="language-plaintext highlighter-rouge">DR</code> register to the selected register and any read or write operation to the <code class="language-plaintext highlighter-rouge">DR</code> register will be mapped to the selected register.</p>

<h3 id="debug-port-registers">Debug Port Registers</h3>

<p>The DP is responsible for configuring the debug module, controlling power and reset, and monitoring various errors that may occur during DAP operation. Special registers, such as <code class="language-plaintext highlighter-rouge">ABORT</code>, <code class="language-plaintext highlighter-rouge">IDCODE</code>, <code class="language-plaintext highlighter-rouge">CTRL/STAT</code>, and <code class="language-plaintext highlighter-rouge">SELECT</code> are responsible for all of these tasks.</p>

<h4 class="no_toc" id="abort-register-abort">Abort Register (ABORT)</h4>

<p>The Abort Register is always present on all DP implementations. Its main purpose is to force a DAP abort.</p>

<figure class="figure mb-7">
  <table class="table table-sm table-striped table-bordered" style="text-align: center">
    <thead class="thead">
      <tr class="table-dark">
        <th scope="col">Bits</th>
        <th scope="col">Access</th>
        <th scope="col">Function</th>
        <th scope="col">Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>[1:31]</td>
        <td>RO</td>
        <td>-</td>
        <td>Reserved</td>
      </tr>
      <tr>
        <td>[0]</td>
        <td>WO</td>
        <td>DAPABORT</td>
        <td>Write 1 to this bit to generate a DAP abort. This aborts the current AP transaction. Do this only if the debugger has received WAIT responses over an extended period.</td>
      </tr>
    </tbody>
  </table>
  <figcaption class="figure-caption text-center">
    Table 3 - DP ABORT register bits
  </figcaption>
</figure>

<p>When working with this register within JTAG-DP, the only writable bit is the <code class="language-plaintext highlighter-rouge">DAPABORT</code> bit. Writing to the other bits of this register results in undefined behavior according to the documentation.</p>

<h4 class="no_toc" id="id-code-register-idcode">ID Code Register (IDCODE)</h4>

<p>The Identification Code Register is always present on all DP implementations. It provides identification information about the ARM Debug Interface.</p>

<figure class="figure mb-7">
  <table class="table table-sm table-striped table-bordered" style="text-align: center">
    <thead class="thead">
      <tr class="table-dark">
        <th scope="col">Bits</th>
        <th scope="col">Access</th>
        <th scope="col">Function</th>
        <th scope="col">Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>[31:28]</td>
        <td>RO</td>
        <td>Version</td>
        <td>Version code</td>
      </tr>
      <tr>
        <td>[27:12]</td>
        <td>RO</td>
        <td>PARTNO</td>
        <td>Part Number for the JTAG-DP - 0xBA00</td>
      </tr>
      <tr>
        <td>[11:1]</td>
        <td>RO</td>
        <td>DESIGNER</td>
        <td>JEDEC Designer ID, an 11-bit JEDEC code that identifies the designer of the ADI implementation - 0x23B</td>
      </tr>
      <tr>
        <td>[0]</td>
        <td>RO</td>
        <td>-</td>
        <td>Always</td>
      </tr>
    </tbody>
  </table>
  <figcaption class="figure-caption text-center">
    Table 4 - DP IDCODE register bits
  </figcaption>
</figure>

<h4 class="no_toc" id="controlstatus-register-ctrlstat">Control/Status Register (CTRL/STAT)</h4>

<p>The <code class="language-plaintext highlighter-rouge">CTRL/STAT</code> register is always present on all DP implementations. It provides control of the DP and status information about the DP.</p>

<figure class="figure mb-7">
  <table class="table table-sm table-striped table-bordered" style="text-align: center">
    <thead class="thead">
      <tr class="table-dark">
        <th scope="col">Bits</th>
        <th scope="col">Access</th>
        <th scope="col">Function</th>
        <th scope="col">Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>[31]</td>
        <td>RO</td>
        <td>CSYSPWRUPACK</td>
        <td>System power-up acknowledge</td>
      </tr>
      <tr>
        <td>[30]</td>
        <td>R/W</td>
        <td>CSYSPWRUPREQ</td>
        <td>System power-up request</td>
      </tr>
      <tr>
        <td>[29]</td>
        <td>RO</td>
        <td>CDBGPWRUPACK</td>
        <td>Debug power-up acknowledge</td>
      </tr>
      <tr>
        <td>[28]</td>
        <td>R/W</td>
        <td>CDBGPWRUPREQ</td>
        <td>Debug power-up request</td>
      </tr>
      <tr>
        <td>[27]</td>
        <td>RO</td>
        <td>CDBGRSTACK</td>
        <td>Debug reset acknowledge</td>
      </tr>
      <tr>
        <td>[26]</td>
        <td>R/W</td>
        <td>CDBGRSTREQ</td>
        <td>Debug reset request</td>
      </tr>
      <tr>
        <td>[25:24]</td>
        <td>-</td>
        <td>-</td>
        <td>Reserved, RAZ/SBZP</td>
      </tr>
      <tr>
        <td>[23:12]</td>
        <td>R/W</td>
        <td>TRNCNT</td>
        <td>Transaction counter</td>
      </tr>
      <tr>
        <td>[11:8]</td>
        <td>R/W</td>
        <td>MASKLANE</td>
        <td>Indicates the bytes to be masked in pushed compare and pushed verify operations</td>
      </tr>
      <tr>
        <td>[7]</td>
        <td>RO</td>
        <td>WDATAERR</td>
        <td>Set if a Write Data Error occurs</td>
      </tr>
      <tr>
        <td>[6]</td>
        <td>RO</td>
        <td>READOK</td>
        <td>This bit is set to 1 if the response to the previous AP or RDBUFF read was OK</td>
      </tr>
      <tr>
        <td>[5]</td>
        <td>RO</td>
        <td>STICKYERR</td>
        <td>Set if an error is returned by an AP transaction</td>
      </tr>
      <tr>
        <td>[4]</td>
        <td>RO</td>
        <td>STICKYCMP</td>
        <td>This bit is set to 1 when a match occurs on a pushed compare or a pushed verify operation</td>
      </tr>
      <tr>
        <td>[3:2]</td>
        <td>R/W</td>
        <td>TRNMODE</td>
        <td>Transfer mode for AP operations: 00 = Normal operation, 01 = Pushed verify operation, 10 = Pushed compare operation, 11 = Reserved.</td>
      </tr>
      <tr>
        <td>[1]</td>
        <td>RO</td>
        <td>STICKYORUN</td>
        <td>Overrun error flag</td>
      </tr>
      <tr>
        <td>[0]</td>
        <td>R/W</td>
        <td>ORUNDETECT</td>
        <td>This bit is set to 1 to enable overrun detection</td>
      </tr>
    </tbody>
  </table>
  <figcaption class="figure-caption text-center">
    Table 5 - DP CTRL/STAT register bits
  </figcaption>
</figure>

<p>Let’s take a closer look at the bits of this register.</p>

<h5 id="sticky-flags-and-dp-error-responses">Sticky flags and DP error responses</h5>

<p>A read or write error might occur within the DAP, or come from the resource being accessed. In either case, when the error is detected the Sticky Error flag, <code class="language-plaintext highlighter-rouge">STICKYERR</code>, in the <code class="language-plaintext highlighter-rouge">CTRL/STAT</code> Register is set to 1. A read/write error also might be generated if the debugger makes an AP transaction request while the debug power domain is powered down.</p>

<p>If a debugger issue <code class="language-plaintext highlighter-rouge">APACC</code> too fast, overrun may happen, the DP can be programmed so that if an overrun error occurs, the DP set the <code class="language-plaintext highlighter-rouge">STICKYORUN</code> flag in the <code class="language-plaintext highlighter-rouge">CTRL/STAT</code> register. But if overrun detection is on, the debugger must check for overrun errors after each sequence of APACC transactions, the DP will also no longer send FAULT response and WAIT response.</p>

<p>In any case, if a debugger receives a FAULT response from the DP, it must read the <code class="language-plaintext highlighter-rouge">CTRL/STAT</code> register to check the sticky flags.</p>

<h5 id="the-transaction-counter">The transaction counter</h5>

<p>The DP includes an AP transaction counter, <code class="language-plaintext highlighter-rouge">TRNCNT</code>, which enables a debugger to make a single AP transaction request to generate a sequence of AP transactions, thus accelerating code download or memory fill operations. The <code class="language-plaintext highlighter-rouge">TRNCNT</code> maps onto the <code class="language-plaintext highlighter-rouge">CTRL/STAT[23:12]</code> bitfield, and writing a value N (N&gt;=0) to this field generates N+1 AP transaction(s). If <code class="language-plaintext highlighter-rouge">TRNCNT</code> is not zero, it is decremented after each successful transaction, but it is not decremented when there are any sticky flags set. When reaches zero, <code class="language-plaintext highlighter-rouge">TRNCNT</code> does not auto-reload.</p>

<h5 id="power-control">Power control</h5>

<p>This is to enable an external debugger to connect to a potentially turned-off system and power up as much as required to get a basic level of debug access with a minimal understanding of the system.</p>

<p>The DAP model supports multiple power domains; there can be three power domains:</p>

<ul>
  <li>Always on domain</li>
  <li>System power domain</li>
  <li>Debug power domain</li>
</ul>

<p>The DP registers reside in the always-on domain, and there are two control bits in the <code class="language-plaintext highlighter-rouge">CTRL/STAT</code> register:</p>

<ul>
  <li>Bit [28], <code class="language-plaintext highlighter-rouge">CDBGPWRUPREQ</code>, used to request the system’s power manager to fully power up and enable clocks in the debug power domain.</li>
  <li>Bit [30], <code class="language-plaintext highlighter-rouge">CSYSPWRUPREQ</code>, used to request the system’s power manager to fully power up and enable clocks in the system power domain.</li>
</ul>

<div class="alert alert-warning" role="alert">
  <b>Note:</b> Both bits need to be set during initialization, to ensure the MCU is fully powered up and clocks are enabled.
</div>

<h5 id="debug-reset-control">Debug Reset Control</h5>

<p>The DP <code class="language-plaintext highlighter-rouge">CTRL/STAT</code> register provides bits [27:26], for reset control of the debug domain. The debug domain controlled by these signals covers the internal DAP and the connection between the DAP and the debug components, for example, the debug bus. The two bits provide a debug reset request, <code class="language-plaintext highlighter-rouge">CDBGRSTREQ</code>, and a reset acknowledge, <code class="language-plaintext highlighter-rouge">CDBGRSTACK</code>, and the associated signals provide a connection to a system reset controller. The DP registers are in the always-on power domain on the external interface side of the DP. Therefore, the registers can be driven at any time, to generate a reset request to the system reset controller.</p>

<h4 class="no_toc" id="ap-select-register-select">AP Select Register, SELECT</h4>

<p>The AP Select Register is always present on all DP implementations. Its main purpose is to select the current Access Port (AP) and the active four-word register bank within that AP.</p>

<figure class="figure mb-7">
  <table class="table table-sm table-striped table-bordered" style="text-align: center">
    <thead class="thead">
      <tr class="table-dark">
        <th scope="col">Bits</th>
        <th scope="col">Function</th>
        <th scope="col">Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>[31:24]</td>
        <td>APSEL</td>
        <td>Selects the current AP (AHB-AP, APB-AP, JTAG-AP)</td>
      </tr>
      <tr>
        <td>[23:8]</td>
        <td>-</td>
        <td>Reserved</td>
      </tr>
      <tr>
        <td>[7:4]</td>
        <td>APBANKSEL</td>
        <td>Select the active four-word register bank on the current AP</td>
      </tr>
      <tr>
        <td>[3:1]</td>
        <td>-</td>
        <td>Reserved</td>
      </tr>
      <tr>
        <td>[0]</td>
        <td>-</td>
        <td>Always</td>
      </tr>
    </tbody>
  </table>
  <figcaption class="figure-caption text-center">
    Table 6 - DP SELECT register bits
  </figcaption>
</figure>

<h5 id="ap-selection">AP selection</h5>

<p>As DAP can contain multiple APs, we need to have the ability to select a specific AP with which we want to work at the moment. And it is the <code class="language-plaintext highlighter-rouge">APSEL</code> bits that are responsible for this selection. They specify the number of the AP that will be used for access.</p>

<h5 id="bank-of-registers-selection">Bank of registers selection</h5>

<p>The <code class="language-plaintext highlighter-rouge">APBANKSEL</code> bits are used to select the register bank to which access will be made. Register banks are used to organize registers associated with specific functional blocks within the microcontroller. For example, a register bank may be allocated for the core processor debug registers, while another bank may be allocated for the peripheral device debug registers.</p>

<h3 id="accessing-the-dp-registers">Accessing the DP registers</h3>

<p>As mentioned earlier, to access the DP registers <code class="language-plaintext highlighter-rouge">CTRL/STAT</code> and <code class="language-plaintext highlighter-rouge">SELECT</code>, the <code class="language-plaintext highlighter-rouge">DPACC</code> register is used, and working with this register has its own peculiarities. Let’s take a closer look at the algorithm for accessing the DP registers.</p>

<p>DP registers can be divided into two categories: control registers and access registers. Control registers contain information about the state of the debug logic, such as the status of command execution or the reset state. Access registers are used to read and write data from registers that control the operation of the debug logic.</p>

<p>In this context, we will focus on the DP access registers, which provide access to the debug logic. DP access registers can be addressed through the <code class="language-plaintext highlighter-rouge">DPACC</code> register and include control registers (<code class="language-plaintext highlighter-rouge">CTRL/STAT</code> and <code class="language-plaintext highlighter-rouge">SELECT</code>), access registers to the application logic (<code class="language-plaintext highlighter-rouge">APACC</code>), bypass register (<code class="language-plaintext highlighter-rouge">BYPASS</code>), and device identification register (<code class="language-plaintext highlighter-rouge">IDCODE</code>). Working with these registers has its own peculiarities and requires knowledge of the <code class="language-plaintext highlighter-rouge">DPACC</code> register format, which we will discuss further.</p>

<h4 class="no_toc" id="dpacc-register-format">DPACC register format</h4>

<p>The <code class="language-plaintext highlighter-rouge">DPACC</code> register has a size of 35 bits and its format depends on the operation (read or write) we want to perform.</p>

<h5 id="format-for-writing">Format for writing:</h5>

<figure class="figure mb-7">
    <a data-bigpicture="{&quot;imgSrc&quot;: &quot;/assets/posts/2023-05-09-diving-into-arm-debug-access-port/DAP_dpacc_write_format.png&quot;}" href="#">
      <img class="img-fluid screenshot mw-md-100" src="/assets/posts/2023-05-09-diving-into-arm-debug-access-port/DAP_dpacc_write_format.png" />
    </a>
  <figcaption class="figure-caption text-center">
    <br />Picture 2 - DPACC register write format
  </figcaption>
</figure>

<ul>
  <li>D - these are data bits. That is, in these 32 bits, you store the value you want to write to the selected register.</li>
  <li>A - these are address bits of the DP register. These two bits determine the specific DP register you want to work with:</li>
</ul>

<figure class="figure mb-7">
  <table class="table table-sm table-striped table-bordered" style="text-align: center">
    <thead class="thead">
      <tr class="table-dark">
        <th scope="col">Address</th>
        <th scope="col">A[3:2]</th>
        <th scope="col">Register</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>0x04</td>
        <td>[01]</td>
        <td>CTRL/STAT</td>
      </tr>
      <tr>
        <td>0x08</td>
        <td>[10]</td>
        <td>SELECT</td>
      </tr>
    </tbody>
  </table>
  <figcaption class="figure-caption text-center">
    Table 7 - A[3:2] bits for DPACC
  </figcaption>
</figure>

<div class="alert alert-warning" role="alert">
  <b>Note:</b> <b>DR</b> register in JTAG-DP is like a common register for five data registers (<b>ABORT</b>, <b>BYPASS</b>, <b>IDCODE</b>, <b>DPACC</b>, <b>APACC</b>), and by writing or reading data from/to it, you write/read data to/from one of the five data registers selected by the command in the <b>IR</b> register. Similarly, for working with the <b>CTRL/STAT</b> and <b>SELECT</b> registers, when you select the <b>DPACC</b> register for operation with the <b>DPACC</b> command in the <b>IR</b> register, the <b>DR</b> register is mapped to the <b>DPACC</b> register, and the <b>DPACC</b> register is mapped to one of the shared DP registers: <b>CTRL/STAT</b> or <b>SELECT</b>. This results in a chain of registers: <b>DR --&gt; DPACC --&gt; CTRL/STAT</b> or <b>SELECT</b>, for example. Therefore, by writing/reading data to/from the <b>DR</b> register, you write/read data to/from the <b>CTRL/STAT</b> or <b>SELECT</b> register.
</div>

<ul>
  <li>RnW - this bit for the write operation has the value 0.</li>
</ul>

<h5 id="format-for-reading">Format for reading:</h5>

<figure class="figure mb-7">
    <a data-bigpicture="{&quot;imgSrc&quot;: &quot;/assets/posts/2023-05-09-diving-into-arm-debug-access-port/DAP_dpacc_read_format.png&quot;}" href="#">
      <img class="img-fluid screenshot mw-md-100" src="/assets/posts/2023-05-09-diving-into-arm-debug-access-port/DAP_dpacc_read_format.png" />
    </a>
  <figcaption class="figure-caption text-center">
    <br />Picture 3 - DPACC register read format
  </figcaption>
</figure>

<ul>
  <li>D - these are data bits. I.e. in these 32 bits you get the value read from the register.</li>
  <li>ACK[2:0] - Acknowledge of read operation:</li>
</ul>

<figure class="figure mb-7">
  <table class="table table-sm table-striped table-bordered" style="text-align: center">
    <thead class="thead">
      <tr class="table-dark">
        <th scope="col">ACK</th>
        <th scope="col">Value</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>0b010</td>
        <td>OK/FAULT</td>
      </tr>
      <tr>
        <td>0b001</td>
        <td>WAIT</td>
      </tr>
    </tbody>
  </table>
  <figcaption class="figure-caption text-center">
    Table 8 - Acknowledge codes
  </figcaption>
</figure>

<h4 class="no_toc" id="operation-algorithm">Operation algorithm</h4>

<p>Now let’s step by step go through the algorithms for writing/reading a new value to/from the DP register:</p>

<h5 id="algorithm-for-writing">Algorithm for writing</h5>

<ul>
  <li>Write the value <code class="language-plaintext highlighter-rouge">0b1010</code> (the code for the <code class="language-plaintext highlighter-rouge">DPACC</code> register) to the <code class="language-plaintext highlighter-rouge">IR</code> register.</li>
  <li>Write 35 bits to the <code class="language-plaintext highlighter-rouge">DR</code> register according to the format described above:
    <ul>
      <li>DATA[31:0] - the data we want to write</li>
      <li>A[3:2] - the selected register</li>
      <li>RnW - <code class="language-plaintext highlighter-rouge">0b0</code></li>
    </ul>
  </li>
</ul>

<h5 id="algorithm-for-reading">Algorithm for reading</h5>

<ul>
  <li>Write the value <code class="language-plaintext highlighter-rouge">0b1010</code> (the code for the <code class="language-plaintext highlighter-rouge">DPACC</code> register) to the <code class="language-plaintext highlighter-rouge">IR</code> register.</li>
  <li>Write a <strong>request</strong> to read the register to the <code class="language-plaintext highlighter-rouge">DR</code> register:
    <ul>
      <li>DATA[31:0] - <code class="language-plaintext highlighter-rouge">0x00</code></li>
      <li>A[3:2] - the selected register</li>
      <li>RnW - <code class="language-plaintext highlighter-rouge">0b1</code></li>
    </ul>
  </li>
  <li>Read 35 bits from the <code class="language-plaintext highlighter-rouge">DR</code> register:
    <ul>
      <li>DATA[31:0] - the data read from the register</li>
      <li>ACK[2:0] - Acknowledge code.</li>
    </ul>
  </li>
</ul>

<div class="alert alert-warning" role="alert">
  <b>Note:</b> As you may have noticed, during the read operation, we access the <b>DR</b> register twice. The first time, we form a <b>request</b> to read data from a specific register, i.e., we inform the microcontroller that we would like to read data from a particular register. The actual reading of the data happens during the second access to the <b>DR</b> register.
</div>

<h2 id="access-ports">Access Ports</h2>

<p>Access ports provide access to system resources such as debug registers, trace port registers, a ROM table, or system memory.</p>

<p>An ARM Debug Interface always includes at least one Access Port and might contain multiple APs. The simplest ARM Debug Interface uses a single AP to connect to a single debug component.</p>

<p>Multiple APs can be added to the DAP, depending on the needs. ARM provides specifications for two APs :</p>

<ul>
  <li><strong>Memory Access Port (MEM-AP)</strong>. This AP provides access to the core memory and registers.</li>
  <li><strong>JTAG Access Port (JTAG-AP)</strong>. This AP allows to connect a JTAG chain to the DAP.</li>
</ul>

<p>For this series of articles, the Memory Access Port is of the greatest interest, so we will focus on it. For information about the JTAG Access Port, please refer to the documentation.</p>

<h3 id="memory-access-port-registers">Memory Access Port Registers</h3>

<p>The specification for ARM DAP describes the following Memory Access Port registers:</p>

<figure class="figure mb-7">
  <table class="table table-sm table-striped table-bordered" style="text-align: center">
    <thead class="thead">
      <tr class="table-dark">
        <th scope="col">MEM-AP register</th>
        <th scope="col">Address</th>
        <th scope="col">Register bank (APBANKSEL)</th>
        <th scope="col">Offset (A[3:2])</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>CSW</td>
        <td>0x00</td>
        <td>0x00</td>
        <td>0b00</td>
      </tr>
      <tr>
        <td>TAR</td>
        <td>0x04</td>
        <td>0x00</td>
        <td>0b01</td>
      </tr>
      <tr>
        <td>DRW</td>
        <td>0x0C</td>
        <td>0x00</td>
        <td>0b11</td>
      </tr>
      <tr>
        <td>BD0</td>
        <td>0x10</td>
        <td>0x01</td>
        <td>0b00</td>
      </tr>
      <tr>
        <td>BD1</td>
        <td>0x14</td>
        <td>0x01</td>
        <td>0b01</td>
      </tr>
      <tr>
        <td>BD2</td>
        <td>0x18</td>
        <td>0x01</td>
        <td>0b10</td>
      </tr>
      <tr>
        <td>BD3</td>
        <td>0x1C</td>
        <td>0x01</td>
        <td>0b11</td>
      </tr>
      <tr>
        <td>CFG</td>
        <td>0xF4</td>
        <td>0x0F</td>
        <td>0b01</td>
      </tr>
      <tr>
        <td>BASE</td>
        <td>0xF8</td>
        <td>0x0F</td>
        <td>0b10</td>
      </tr>
      <tr>
        <td>IDR</td>
        <td>0xFC</td>
        <td>0x0F</td>
        <td>0b11</td>
      </tr>
    </tbody>
  </table>
  <figcaption class="figure-caption text-center">
    Table 9 - Memory Access Port registers
  </figcaption>
</figure>

<h4 class="no_toc" id="controlstatus-word-register-csw">Control/Status Word Register, CSW</h4>

<p>The <code class="language-plaintext highlighter-rouge">CSW</code> register is used to configure the access mode to the memory and peripheral devices of the ARM microcontroller.</p>

<p>Using the <code class="language-plaintext highlighter-rouge">CSW</code> register, you can configure parameters such as the size of the transmitted data (8, 16, or 32 bits), enable the auto-increment mode of the memory address to which access is made, and so on.</p>

<h4 class="no_toc" id="the-transfer-address-register-tar">The Transfer Address Register (TAR)</h4>

<p>This register is used to specify the address to be accessed through the AP. This address can be the address of a register, memory, or any other available address on the device.</p>

<p>When a new value is set in <code class="language-plaintext highlighter-rouge">TAR</code> in the AP, all subsequent read/write operations will be performed at the specified address until <code class="language-plaintext highlighter-rouge">TAR</code> is changed to another address and the auto-increment mode is turned off.</p>

<p>In general, before accessing any address through the AP, it is necessary to load this address into the <code class="language-plaintext highlighter-rouge">TAR</code>.</p>

<h4 class="no_toc" id="the-data-readwrite-register-drw">The Data Read/Write Register (DRW)</h4>

<p>The <code class="language-plaintext highlighter-rouge">DRW</code> (Data Register for Write) in the Access Port is used for writing data to or reading data from the target resource.</p>

<p>To write data to <code class="language-plaintext highlighter-rouge">DRW</code>, the address needs to be set in the <code class="language-plaintext highlighter-rouge">TAR</code> (Transfer Address Register), and the necessary access parameters need to be configured in <code class="language-plaintext highlighter-rouge">CSW</code>. After that, data can be written to <code class="language-plaintext highlighter-rouge">DRW</code> and transferred to the target resource. Similarly, to read data from the target resource, the access parameters in <code class="language-plaintext highlighter-rouge">CSW</code> need to be configured and the read address needs to be set in <code class="language-plaintext highlighter-rouge">TAR</code>. Then, the data from the target device will be transferred to <code class="language-plaintext highlighter-rouge">DRW</code>, ready to be read.</p>

<h4 class="no_toc" id="banked-data-registers-0-to-3-bd0-to-bd3">Banked Data Registers 0 to 3 (BD0 to BD3)</h4>

<p>The <code class="language-plaintext highlighter-rouge">BD0</code>, <code class="language-plaintext highlighter-rouge">BD1</code>, <code class="language-plaintext highlighter-rouge">BD2</code> and <code class="language-plaintext highlighter-rouge">BD3</code> registers in the Access Port are used for transferring/receiving data between the target device and the debugging system.</p>

<p>Using these registers can be useful when a large amount of data needs to be transferred or when a higher data transfer speed is required than what is possible with the <code class="language-plaintext highlighter-rouge">TAR</code> and <code class="language-plaintext highlighter-rouge">DRW</code> registers. Together, these four Banked Data Registers provide access to four words of memory space, starting at the address specified in the <code class="language-plaintext highlighter-rouge">TAR</code>. However, transferring data through the <code class="language-plaintext highlighter-rouge">BD0</code>, <code class="language-plaintext highlighter-rouge">BD1</code>, <code class="language-plaintext highlighter-rouge">BD2</code> and <code class="language-plaintext highlighter-rouge">BD3</code> registers requires more complex logic than transferring through the <code class="language-plaintext highlighter-rouge">TAR</code> and <code class="language-plaintext highlighter-rouge">DRW</code> registers and may require additional software to manage these registers.</p>

<h4 class="no_toc" id="configuration-register-cfg">Configuration Register (CFG)</h4>

<p>The CFG Register holds information about the configuration of the MEM-AP. In particular, it indicates whether accesses to the connected memory system are big-endian or little-endian.</p>

<h4 class="no_toc" id="debug-base-address-register-base">Debug Base Address Register (BASE)</h4>

<p>The BASE Register is a pointer to the connected memory system. It points to one of:
	- the start of a set of debug registers for the single connected debug component
	- the start of a ROM Table that describes the connected debug components</p>

<h4 class="no_toc" id="identification-register-idr">Identification Register (IDR)</h4>

<p>The IDR identifies the Memory Access Port.
The IDR is the only register that must be implemented by any Access Port.</p>

<h3 id="addressing-of-ap-registers">Addressing of AP Registers</h3>

<p>One of the four registers within the DP is the AP Select Register (<code class="language-plaintext highlighter-rouge">SELECT</code>). This register specifies a particular Access Port and a bank of four 32-bit words within the register map of that AP.</p>

<p>In any AP access transaction from the debugger, the two address bits A[3:2] are decoded to select one of the four 32-bit words from the register bank indicated by the <code class="language-plaintext highlighter-rouge">SELECT</code> register (see Table 9). In other words, they select a specific register within the selected four-register bank.</p>

<p>This access model is shown in Figure 4 shows how the contents of the <code class="language-plaintext highlighter-rouge">SELECT</code> register are combined with the A[3:2] bits of the <code class="language-plaintext highlighter-rouge">APACC</code> scan-chain to form the address of a register in an AP.</p>

<figure class="figure mb-7">
    <a data-bigpicture="{&quot;imgSrc&quot;: &quot;/assets/posts/2023-05-09-diving-into-arm-debug-access-port/DAP_ap_addr_creation.png&quot;}" href="#">
      <img class="img-fluid screenshot mw-md-100" src="/assets/posts/2023-05-09-diving-into-arm-debug-access-port/DAP_ap_addr_creation.png" />
    </a>
  <figcaption class="figure-caption text-center">
    <br />Figure 4 - MEM-AP access model
  </figcaption>
</figure>

<p>As can be seen in this figure, Memory Access Port registers are all 32-bit long (4 bytes), two fields in the DP <code class="language-plaintext highlighter-rouge">SELECT</code> register select the AP (<code class="language-plaintext highlighter-rouge">APSEL</code> field) and the register bank in the AP (<code class="language-plaintext highlighter-rouge">APBANKSEL</code> field), and finally, the <code class="language-plaintext highlighter-rouge">A[3:2]</code> field of <code class="language-plaintext highlighter-rouge">APACC</code> specify the exact AP register in the bank.</p>

<h3 id="accessing-the-ap-registers">Accessing the AP registers</h3>

<p>The situation with accessing the AP registers is the same as accessing the DP registers, except that instead of the <code class="language-plaintext highlighter-rouge">DPACC</code> register, the <code class="language-plaintext highlighter-rouge">APACC</code> register is used. When you write <code class="language-plaintext highlighter-rouge">APACC</code> command in the <code class="language-plaintext highlighter-rouge">IR</code> register, the <code class="language-plaintext highlighter-rouge">DR</code> register is mapped to the <code class="language-plaintext highlighter-rouge">APACC</code> register and the <code class="language-plaintext highlighter-rouge">APACC</code> register is mapped to one of the common AP registers defined in Table 9. This creates a chain of registers: <code class="language-plaintext highlighter-rouge">DR --&gt; APACC --&gt; AP Reg</code>.</p>

<h4 class="no_toc" id="apacc-register-format">APACC register format</h4>

<p>These registers also have a size of 35 bits, and the value of the bits depends on whether we write something to these registers or read from them.</p>

<h5 id="format-for-writing-1">Format for writing:</h5>

<figure class="figure mb-7">
    <a data-bigpicture="{&quot;imgSrc&quot;: &quot;/assets/posts/2023-05-09-diving-into-arm-debug-access-port/DAP_dpacc_write_format.png&quot;}" href="#">
      <img class="img-fluid screenshot mw-md-100" src="/assets/posts/2023-05-09-diving-into-arm-debug-access-port/DAP_dpacc_write_format.png" />
    </a>
  <figcaption class="figure-caption text-center">
    <br />Figure 5 - APACC register write format
  </figcaption>
</figure>

<ul>
  <li>D - This is the data bits. In these 32 bits, you store the value that you want to write to the selected register.</li>
  <li>A - These are the sub-address bits of the AP register. These two bits, together with four more bits from the DP register <code class="language-plaintext highlighter-rouge">SELECT</code>, determine the specific AP register you want to work with:</li>
</ul>

<figure class="figure mb-7">
  <table class="table table-sm table-striped table-bordered" style="text-align: center">
    <thead class="thead">
      <tr class="table-dark">
        <th scope="col">Address</th>
        <th scope="col">A[3:2]</th>
        <th scope="col">Register</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>0x00</td>
        <td>[00]</td>
        <td>CSW</td>
      </tr>
      <tr>
        <td>0x04</td>
        <td>[01]</td>
        <td>TAR</td>
      </tr>
      <tr>
        <td>0x0C</td>
        <td>[11]</td>
        <td>DRW</td>
      </tr>
      <tr>
        <td>0x10</td>
        <td>[00]</td>
        <td>BD0</td>
      </tr>
      <tr>
        <td>0x14</td>
        <td>[01]</td>
        <td>BD1</td>
      </tr>
      <tr>
        <td>0x18</td>
        <td>[10]</td>
        <td>BD2</td>
      </tr>
      <tr>
        <td>0x1C</td>
        <td>[11]</td>
        <td>BD3</td>
      </tr>
      <tr>
        <td>0xF4</td>
        <td>[01]</td>
        <td>CFG</td>
      </tr>
      <tr>
        <td>0xF8</td>
        <td>[10]</td>
        <td>BASE</td>
      </tr>
      <tr>
        <td>0xFC</td>
        <td>[11]</td>
        <td>IDR</td>
      </tr>
    </tbody>
  </table>
  <figcaption class="figure-caption text-center">
    Table 10 - A[3:2] for MEM-AP registers
  </figcaption>
</figure>

<ul>
  <li>RnW - This bit has a value of 0 for a write operation.</li>
</ul>

<h5 id="format-for-reading-1">Format for reading:</h5>

<figure class="figure mb-7">
    <a data-bigpicture="{&quot;imgSrc&quot;: &quot;/assets/posts/2023-05-09-diving-into-arm-debug-access-port/DAP_dpacc_read_format.png&quot;}" href="#">
      <img class="img-fluid screenshot mw-md-100" src="/assets/posts/2023-05-09-diving-into-arm-debug-access-port/DAP_dpacc_read_format.png" />
    </a>
  <figcaption class="figure-caption text-center">
    <br />Figure 6 - APACC register read format
  </figcaption>
</figure>

<ul>
  <li>DATA[31:0] - These are data bits. In other words, these 32 bits contain the value that you read from the selected register.</li>
  <li>
    <p>Bits 2:0 (ACK[2:0]) = 3-bit Acknowledge of read operation:</p>

    <ul>
      <li>0b010 = OK/FAULT</li>
      <li>0b001 = WAIT</li>
    </ul>
  </li>
</ul>

<h4 class="no_toc" id="operation-algorithm-1">Operation algorithm</h4>

<p>Now let’s go step-by-step through the algorithms for writing/reading a new value to/from an AP register:</p>

<h5 id="algorithm-for-writing-1">Algorithm for writing</h5>

<ul>
  <li>Write the <code class="language-plaintext highlighter-rouge">DPACC</code> command (<code class="language-plaintext highlighter-rouge">0b1010</code>) to the <code class="language-plaintext highlighter-rouge">IR</code> register</li>
  <li>Write 35 bits to the <code class="language-plaintext highlighter-rouge">DR</code> register in which we indicate that we are working with the <code class="language-plaintext highlighter-rouge">SELECT</code> register and write the corresponding values of the APSEL[31:24] and APBANKSEL[7:4] bits to this register:
    <ul>
      <li>DATA [31:0]:
        <ul>
          <li>APSEL[31:24] - select the desired AP</li>
          <li>APBANKSEL[7:4] - select the desired bank of registers</li>
        </ul>
      </li>
      <li>A[3:2] - <code class="language-plaintext highlighter-rouge">0b10</code> - address of <code class="language-plaintext highlighter-rouge">SELECT</code> register (see Table 7)</li>
      <li>RnW = <code class="language-plaintext highlighter-rouge">0b0</code></li>
    </ul>
  </li>
  <li>Write the <code class="language-plaintext highlighter-rouge">APACC</code> command (<code class="language-plaintext highlighter-rouge">0b1011</code>) to the <code class="language-plaintext highlighter-rouge">IR</code> register</li>
  <li>Write the data to the <code class="language-plaintext highlighter-rouge">DR</code> register according to the described bit values (see Figure 5):
    <ul>
      <li>DATA[31:0] = data which need to be written</li>
      <li>A[3:2] = Address of Memory Access Port register (see Table 9).</li>
      <li>RnW = <code class="language-plaintext highlighter-rouge">0b0</code></li>
    </ul>
  </li>
</ul>

<h5 id="algorithm-for-reading-1">Algorithm for reading</h5>

<ul>
  <li>Write the <code class="language-plaintext highlighter-rouge">DPACC</code> command (<code class="language-plaintext highlighter-rouge">0b1010</code>) to the <code class="language-plaintext highlighter-rouge">IR</code> register</li>
  <li>Write 35 bits to the <code class="language-plaintext highlighter-rouge">DR</code> register in which we indicate that we are working with the <code class="language-plaintext highlighter-rouge">SELECT</code> register and write the corresponding values of the APSEL[31:24] and APBANKSEL[7:4] bits to this register:
    <ul>
      <li>DATA[31:0]:
        <ul>
          <li>APSEL[31:24] - select the desired AP</li>
          <li>APBANKSEL[7:4] - select the desired bank of registers</li>
        </ul>
      </li>
      <li>A[3:2] - <code class="language-plaintext highlighter-rouge">0b10</code> - address of <code class="language-plaintext highlighter-rouge">SELECT</code> register (see Table 7).</li>
      <li>RnW = <code class="language-plaintext highlighter-rouge">0b1</code></li>
    </ul>
  </li>
  <li>Write the <code class="language-plaintext highlighter-rouge">APACC</code> command (<code class="language-plaintext highlighter-rouge">0b1011</code>) to the <code class="language-plaintext highlighter-rouge">IR</code> register</li>
  <li>Create the data read request. Write in <code class="language-plaintext highlighter-rouge">DR</code> next data:
    <ul>
      <li>DATA[31:0] = <code class="language-plaintext highlighter-rouge">0x00000000</code></li>
      <li>A[3:2] = Address of Memory Access Port register (see Table 9).</li>
      <li>RnW = <code class="language-plaintext highlighter-rouge">0b1</code></li>
    </ul>
  </li>
  <li>Read 35 bits from the <code class="language-plaintext highlighter-rouge">DR</code> register</li>
  <li>Check the values of the ACK[2:0] bits and if they are not equal to <code class="language-plaintext highlighter-rouge">OK/FAULT (0b001)</code>, then the data was read, if it is equal to <code class="language-plaintext highlighter-rouge">WAIT (0b001)</code>, we need to repeat the reading because the data is not ready.</li>
</ul>

<h2 id="practical-part">Practical Part</h2>

<p>Let’s take an example of an algorithm for writing values to the memory of a microcontroller and reading data from memory.</p>

<h3 id="writing-a-variable-to-memory">Writing a variable to memory</h3>

<p>Let’s try to write the value <code class="language-plaintext highlighter-rouge">0xAA55AA55</code> to the memory cell at address <code class="language-plaintext highlighter-rouge">0x20000000</code></p>

<ol>
  <li>Write <code class="language-plaintext highlighter-rouge">0b1010</code> (the <code class="language-plaintext highlighter-rouge">DPACC</code> register code) into the <code class="language-plaintext highlighter-rouge">IR</code> register.</li>
  <li>Some settings in the <code class="language-plaintext highlighter-rouge">AP</code> register <code class="language-plaintext highlighter-rouge">CSW</code> need to be configured. To access this register, we need to select the corresponding <code class="language-plaintext highlighter-rouge">AP</code> and register bank in the <code class="language-plaintext highlighter-rouge">DP SELECT</code> register. Write to the <code class="language-plaintext highlighter-rouge">DR</code> register:
    <ul>
      <li>DATA[31:0] = <code class="language-plaintext highlighter-rouge">0x00</code>
        <ul>
          <li>APSEL[31:24] = <code class="language-plaintext highlighter-rouge">0x00</code></li>
          <li>APBANKSEL[7:4] = <code class="language-plaintext highlighter-rouge">0x00</code></li>
        </ul>
      </li>
      <li>A[3:2] = <code class="language-plaintext highlighter-rouge">0b10</code> (address of <code class="language-plaintext highlighter-rouge">SELECT</code> register)</li>
      <li>RnW = <code class="language-plaintext highlighter-rouge">0b0</code></li>
    </ul>
  </li>
  <li>Next, we need to write the <code class="language-plaintext highlighter-rouge">CSW</code> register. Since this is an <code class="language-plaintext highlighter-rouge">AP</code> register, we need to use the <code class="language-plaintext highlighter-rouge">APACC</code> register to access it:
    <ul>
      <li>Write <code class="language-plaintext highlighter-rouge">0b1011</code> (the <code class="language-plaintext highlighter-rouge">APACC</code> register code) into the <code class="language-plaintext highlighter-rouge">IR</code> register.</li>
    </ul>
  </li>
  <li>Form the data for the configuration: set the data size for writing to 32-bits (<code class="language-plaintext highlighter-rouge">Size[0:2] = 0b010</code>), disable the auto-increment function of the address (<code class="language-plaintext highlighter-rouge">AddrInc[5:4] = 0b00</code>). Write to <code class="language-plaintext highlighter-rouge">DR</code>:
    <ul>
      <li>DATA[31:0] = <code class="language-plaintext highlighter-rouge">0x00000002</code></li>
      <li>A[3:2] = <code class="language-plaintext highlighter-rouge">0b00</code> (address of <code class="language-plaintext highlighter-rouge">CSW</code> register)</li>
      <li>RnW = <code class="language-plaintext highlighter-rouge">0b0</code></li>
    </ul>
  </li>
  <li>Then we need to set the address of the memory cell to which we want to write the data. This is done through the <code class="language-plaintext highlighter-rouge">AP</code> register <code class="language-plaintext highlighter-rouge">TAR</code>. And since this register belongs to the same <code class="language-plaintext highlighter-rouge">AP</code> as <code class="language-plaintext highlighter-rouge">CSW</code> and is in the same bank, we can omit the reference to the <code class="language-plaintext highlighter-rouge">DP SELECT</code> register and immediately write the address value. Write to <code class="language-plaintext highlighter-rouge">DR</code>:
    <ul>
      <li>DATA[31:0] = <code class="language-plaintext highlighter-rouge">0x20000000</code></li>
      <li>A[3:2] = <code class="language-plaintext highlighter-rouge">0b01</code> (address of <code class="language-plaintext highlighter-rouge">TAR</code> register)</li>
      <li>RnW = <code class="language-plaintext highlighter-rouge">0b0</code></li>
    </ul>
  </li>
  <li>The last step is to actually write the data. To do this, we need to write them to the <code class="language-plaintext highlighter-rouge">DRW</code> register. Write to <code class="language-plaintext highlighter-rouge">DRW</code>:
    <ul>
      <li>DATA[31:0] = <code class="language-plaintext highlighter-rouge">0xAA55AA55</code></li>
      <li>A[3:2] = <code class="language-plaintext highlighter-rouge">0b11</code> (address of <code class="language-plaintext highlighter-rouge">DRW</code> register)</li>
      <li>RnW = <code class="language-plaintext highlighter-rouge">0b0</code></li>
    </ul>
  </li>
</ol>

<h3 id="reading-a-variable-from-memory">Reading a variable from memory</h3>

<p>We know how to write data to memory, and now it’s time to read that data. The algorithm for reading largely repeats the steps for writing, but there are still some differences:</p>

<ol>
  <li>Write <code class="language-plaintext highlighter-rouge">0b1010</code> (the <code class="language-plaintext highlighter-rouge">DPACC</code> register code) into the <code class="language-plaintext highlighter-rouge">IR</code> register.</li>
  <li>We need to configure some settings in the <code class="language-plaintext highlighter-rouge">CSW</code> register of the <code class="language-plaintext highlighter-rouge">AP</code>. To access this register, we need to select the corresponding <code class="language-plaintext highlighter-rouge">AP</code> and register bank in the <code class="language-plaintext highlighter-rouge">DP SELECT</code> register. Using the data from the table, we form 35 bits of data that we write to the <code class="language-plaintext highlighter-rouge">DR</code> register:
    <ul>
      <li>DATA[31:0] = <code class="language-plaintext highlighter-rouge">0x00</code>
        <ul>
          <li>APSEL[31:24] = <code class="language-plaintext highlighter-rouge">0x00</code></li>
          <li>APBANKSEL[7:4] = <code class="language-plaintext highlighter-rouge">0x00</code></li>
        </ul>
      </li>
      <li>A[3:2] = <code class="language-plaintext highlighter-rouge">0b10</code> (address of <code class="language-plaintext highlighter-rouge">SELECT</code> register)</li>
      <li>RnW = <code class="language-plaintext highlighter-rouge">0b0</code></li>
    </ul>
  </li>
  <li>Next, we need to write directly to the <code class="language-plaintext highlighter-rouge">CSW</code> register. Since this is an <code class="language-plaintext highlighter-rouge">AP</code> register, we need to use the <code class="language-plaintext highlighter-rouge">APACC</code> register to access it:
    <ul>
      <li>Write <code class="language-plaintext highlighter-rouge">0b1011</code> (the <code class="language-plaintext highlighter-rouge">APACC</code> register code) into the <code class="language-plaintext highlighter-rouge">IR</code> register.</li>
    </ul>
  </li>
  <li>We form the data for configuration: we set the data size for writing to 32 bits (<code class="language-plaintext highlighter-rouge">Size[0:2] = 0b010</code>) and disable the auto-increment address function (<code class="language-plaintext highlighter-rouge">AddrInc[5:4] = 0b00</code>). Write to <code class="language-plaintext highlighter-rouge">DR</code>:
    <ul>
      <li>DATA[31:0] = <code class="language-plaintext highlighter-rouge">0x00000002</code></li>
      <li>A[3:2] = <code class="language-plaintext highlighter-rouge">0b00</code> (address of <code class="language-plaintext highlighter-rouge">CSW</code> register)</li>
      <li>RnW = <code class="language-plaintext highlighter-rouge">0b0</code></li>
    </ul>
  </li>
  <li>Next, we need to set the address of the memory cell from which we will read the data. This is done through the <code class="language-plaintext highlighter-rouge">TAR</code> register of the <code class="language-plaintext highlighter-rouge">AP</code>. And since this register belongs to the same <code class="language-plaintext highlighter-rouge">AP</code> as <code class="language-plaintext highlighter-rouge">CSW</code> and is in the same bank, we can skip the <code class="language-plaintext highlighter-rouge">DP SELECT</code> register access and immediately write the address value:
    <ul>
      <li>DATA[31:0] = <code class="language-plaintext highlighter-rouge">0x20000000</code></li>
      <li>A[3:2] = <code class="language-plaintext highlighter-rouge">0b01</code> (address of <code class="language-plaintext highlighter-rouge">TAR</code> register)</li>
      <li>RnW = <code class="language-plaintext highlighter-rouge">0b0</code></li>
    </ul>
  </li>
  <li>We form a read request. To do this, we write to the <code class="language-plaintext highlighter-rouge">DRW</code> register:
    <ul>
      <li>DATA[31:0] = <code class="language-plaintext highlighter-rouge">0x00</code></li>
      <li>A[3:2] = <code class="language-plaintext highlighter-rouge">0b11</code> (address of <code class="language-plaintext highlighter-rouge">DRW</code> register)</li>
      <li>RnW = <code class="language-plaintext highlighter-rouge">0b1</code></li>
    </ul>
  </li>
  <li>Read the <code class="language-plaintext highlighter-rouge">DRW</code> register by reading 35 bits from the <code class="language-plaintext highlighter-rouge">DR</code> register.</li>
  <li>Check the values of the <code class="language-plaintext highlighter-rouge">ACK[2:0]</code> bits, and if they are equal to <code class="language-plaintext highlighter-rouge">0b001</code>, the read operation is complete. However, to ensure that the read data is valid, we need to check for read errors.</li>
  <li>To check error flags, we need to read the <code class="language-plaintext highlighter-rouge">CTRL/STAT</code> register of the <code class="language-plaintext highlighter-rouge">DP</code> and, first of all, check the <code class="language-plaintext highlighter-rouge">STICKYERR</code> flag.</li>
</ol>

<h2 id="links">Links</h2>

<ul>
  <li><a href="https://developer.arm.com/documentation/ihi0031/latest/" target="_blank">ARM® Debug Interface v5. Architecture Specification</a></li>
  <li><a href="https://interrupt.memfault.com/blog/a-deep-dive-into-arm-cortex-m-debug-interfaces" target="_blank">A Deep Dive into ARM Cortex-M Debug Interfaces</a></li>
  <li><a href="https://www.allaboutcircuits.com/technical-articles/jtag-implementation-arm-core-devices/" target="_blank">JTAG Implementation in Arm Core Devices</a></li>
  <li>AN115533 - Serial Wire Debug (SWD) programming specification</li>
</ul>

<h2 class="no_toc" id="stay-in-touch-with-us">Stay in touch with us</h2>
<p>Stay tuned to this blog or follow us on <a href="https://www.linkedin.com/company/platformio" target="_blank">LinkedIn</a> and Twitter <a href="https://twitter.com/PlatformIO_Org" target="_blank">@PlatformIO_Org</a> to keep up to date with the latest news, articles and tips!</p>]]></content><author><name>Alex Kavalchuk</name></author><category term="blog" /><category term="engineering" /><summary type="html"><![CDATA[Exploring the Architecture and Capabilities of the ARM Debug Access Port for Embedded System Debugging]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://piolabs.com/assets/posts/2023-05-09-diving-into-arm-debug-access-port/title.jpg" /><media:content medium="image" url="https://piolabs.com/assets/posts/2023-05-09-diving-into-arm-debug-access-port/title.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">PlatformIO Open Source April Updates</title><link href="https://piolabs.com/blog/news/platformio-oss-april-2023-updates.html" rel="alternate" type="text/html" title="PlatformIO Open Source April Updates" /><published>2023-05-01T00:00:00+03:00</published><updated>2023-05-01T00:00:00+03:00</updated><id>https://piolabs.com/blog/news/platformio-oss-april-2023-updates</id><content type="html" xml:base="https://piolabs.com/blog/news/platformio-oss-april-2023-updates.html"><![CDATA[<p>Welcome to the April 2023 updates of <a href="https://platformio.org/">PlatformIO Open Source</a> professional collaborative platform for embedded development.
This month we received a lot of helpful feedback from our community, which let us identify the most important parts of our OSS ecosystem that required our attention, so there are plenty of updates pushed in this month that we hope you will like.</p>

<!-- more -->

<p><img class="figure-img img-fluid rounded" src="/assets/posts/oss-updates/platformio-oss-april-news.jpg" alt="PlatformIO Open Source April Updates" /></p>

<p>During April, we rolled out important updates for Teensy and Espressif32 dev-platforms, fixed a lot of issues. Some of the key highlights include:</p>

<ul id="markdown-toc">
  <li><a href="#espressif32-dev-platform-v62" id="markdown-toc-espressif32-dev-platform-v62">Espressif32 dev-platform v6.2</a></li>
  <li><a href="#teensy-dev-platform-v418" id="markdown-toc-teensy-dev-platform-v418">Teensy dev-platform v4.18</a></li>
  <li><a href="#stay-in-touch-with-us" id="markdown-toc-stay-in-touch-with-us">Stay in touch with us</a></li>
</ul>

<h2 id="espressif32-dev-platform-v62">Espressif32 dev-platform v6.2</h2>

<p>The new release of the <a href="https://registry.platformio.org/platforms/platformio/espressif32">Espressif 32</a> dev-platform brings support for the latest Arduino Core, new boards and dev-kits, several minor fixes and improvements:</p>

<ul>
  <li>Added boards:
    <ul>
      <li><a href="https://docs.platformio.org/en/latest/boards/espressif32/esp32-c3-devkitc-02.html">Espressif ESP32-C3-DevKitC-02</a></li>
      <li><a href="https://docs.platformio.org/en/latest/boards/espressif32/lolin_s3_mini.html">WEMOS LOLIN S3 Mini</a></li>
      <li><a href="https://docs.platformio.org/en/latest/boards/espressif32/m5stack-stamps3.html">M5Stack StampS3</a></li>
      <li><a href="https://docs.platformio.org/en/latest/boards/espressif32/seeed_xiao_esp32s3.html">Seeed Studio XIAO ESP32S3</a></li>
    </ul>
  </li>
  <li>Added support for Arduino v2.0.8 (<a href="https://github.com/espressif/arduino-esp32/releases/tag/2.0.8">release notes</a>)</li>
  <li>Updated esptoolpy to v4.5.1 (<a href="https://github.com/espressif/esptool/releases/tag/v4.5.1">release notes</a>)</li>
  <li>Added local cacert file containing “DST Root CA X3” to certificate bundle (<a href="https://github.com/platformio/platform-espressif32/issues/1066">#1066</a>)</li>
  <li>Fixed HWID for the <code class="language-plaintext highlighter-rouge">seeed_xiao_esp32c3</code> board</li>
  <li>Minor fixes and improvements (<a href="https://github.com/platformio/platform-espressif32/issues/1032">#1032</a>, <a href="https://github.com/platformio/platform-espressif32/issues/1055">#1055</a>, <a href="https://github.com/platformio/platform-espressif32/issues/1067">#1067</a>, <a href="https://github.com/platformio/platform-espressif32/issues/1082">#1082</a>)</li>
</ul>

<p>See <a href="https://github.com/platformio/platform-espressif32/releases/tag/v6.2.0">Release Notes</a> for more detailed information.</p>

<p><strong>Related resources for the Espressif32 dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/espressif32.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-espressif32/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 id="teensy-dev-platform-v418">Teensy dev-platform v4.18</h2>

<p>The new release of the <a href="https://registry.platformio.org/platforms/platformio/teensy">Teensy</a> dev-platform brings support for the latest Teensyduino v1.58 and updated toolchains:</p>

<ul>
  <li>Updated Teensyduino to v1.58 (<a href="https://github.com/PaulStoffregen/cores/releases/tag/1.58">release notes</a>)</li>
  <li>Updated toolchain package to v11.3.1 for Arm-based boards</li>
  <li>Minor fixes and improvements (<a href="https://github.com/platformio/platform-teensy/issues/94">#94</a>, <a href="https://github.com/platformio/platform-teensy/issues/95">#95</a>)</li>
</ul>

<p><strong>Related resources for the Teensy dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/teensy.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-teensy/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 id="stay-in-touch-with-us">Stay in touch with us</h2>

<p>Stay tuned to this blog or follow us on <a href="https://www.linkedin.com/company/platformio" target="_blank">LinkedIn</a> and Twitter <a href="https://twitter.com/PlatformIO_Org" target="_blank">@PlatformIO_Org</a> to keep up to date with the latest news, articles and tips!</p>]]></content><author><name>Valerii Koval</name></author><category term="blog" /><category term="news" /><summary type="html"><![CDATA[New boards and dev-kits, Support for Teensyduino v1.58, Updated Espressif dev-platform with the latest Arduino Core]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://piolabs.com/assets/posts/oss-updates/platformio-oss-april-news.jpg" /><media:content medium="image" url="https://piolabs.com/assets/posts/oss-updates/platformio-oss-april-news.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">Getting Started with Code Coverage in PlatformIO: A Beginner’s Guide to Writing Effective Tests</title><link href="https://piolabs.com/blog/insights/test-coverage-on-unit-testing.html" rel="alternate" type="text/html" title="Getting Started with Code Coverage in PlatformIO: A Beginner’s Guide to Writing Effective Tests" /><published>2023-04-17T00:00:00+03:00</published><updated>2023-04-17T00:00:00+03:00</updated><id>https://piolabs.com/blog/insights/test-coverage-on-unit-testing</id><content type="html" xml:base="https://piolabs.com/blog/insights/test-coverage-on-unit-testing.html"><![CDATA[<p>In the world of software development, it’s essential to ensure that the code being written is not only functional but also maintainable and easily testable. One way to measure the effectiveness of testing is to analyze the code coverage to identify areas of the code that are not adequately tested. In this article, we’ll delve into the concept of source code coverage analysis, its importance, and some tools available for performing the analysis.</p>

<!-- more -->

<p>One of the crucial components of proper code coverage analysis is testing, and having a comprehensive test suite is essential to achieving high code coverage. Testing is well supported in PlatformIO and I only refer to the <a href="https://docs.platformio.org/en/latest/advanced/unit-testing/index.html">PlatformIO Unit Testing documentation</a> and to some getting started blog-posts <a href="/blog/insights/unit-testing-part-1.html">Unit Testing with PlatformIO: Part 1. The Basics</a>. If you have never done unit testing, get this working first, then come back for the code coverage.</p>

<h3>Table of Contents</h3>

<ul id="markdown-toc">
  <li><a href="#prerequisites" id="markdown-toc-prerequisites">Prerequisites</a></li>
  <li><a href="#what-is-code-coverage" id="markdown-toc-what-is-code-coverage">What is Code Coverage?</a></li>
  <li><a href="#preparing-demo-project" id="markdown-toc-preparing-demo-project">Preparing Demo Project</a></li>
  <li><a href="#preparing-code-coverage-data-files" id="markdown-toc-preparing-code-coverage-data-files">Preparing Code Coverage Data Files</a></li>
  <li><a href="#visualizing-results" id="markdown-toc-visualizing-results">Visualizing Results</a></li>
  <li><a href="#conclusion" id="markdown-toc-conclusion">Conclusion</a></li>
</ul>

<h2 id="prerequisites">Prerequisites</h2>

<p>This article uses the following components:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/integration/ide/vscode.html">VSCode with installed PlatformIO IDE extension</a></li>
  <li><a href="https://registry.platformio.org/platforms/platformio/native">Native dev-platform</a></li>
</ul>

<div class="alert alert-secondary" role="alert">
  Note: PlatformIO does not automatically install any toolchains for the "native" dev-platform. Instead, it uses the toolchain native to your OS, preferably based on GCC. If you are using Windows, it is recommended that you install MinGW and make it available via the <b>PATH</b> variable. Additionally, the code coverage extension used in this article requires Gcov ≥ 9, so please ensure that your system has an updated toolchain.
</div>

<h2 id="what-is-code-coverage">What is Code Coverage?</h2>

<p>Code coverage analysis provides developers with valuable insights into how thoroughly their tests are exercising the code, highlighting areas that may need additional testing to increase the overall quality of your code.</p>

<p>There are various types of code coverage analysis, including statement coverage, branch coverage, and path coverage. Statement coverage measures how many statements in the code have been executed during testing, while branch coverage measures how many branches in the code have been executed. Path coverage is the most comprehensive form of code coverage analysis, measuring how many unique paths through the code have been executed during testing.</p>

<h2 id="preparing-demo-project">Preparing Demo Project</h2>

<p>For the demo, I am going to take a small and simple piece of code, so you won’t waste your time trying to understand the code. The complete project used in this article is available on Github <a href="https://github.com/Strooom/demoTestCoverage">Strooom/demoTestCoverage: How to do test coverage on PlatformIO</a>.
You can import it directly from the VSCode Welcome Page:</p>

<p><a data-bigpicture="{&quot;imgSrc&quot;: &quot;/assets/posts/2023-04-17-test-coverage-on-unit-testing/image1.png&quot;}" href="#">
  <img class="img-fluid screenshot mw-md-100" src="/assets/posts/2023-04-17-test-coverage-on-unit-testing/image1.png" />
</a></p>

<p>Let’s take a closer look at the <code class="language-plaintext highlighter-rouge">lib/key</code> module that we’ll be testing in this post:</p>

<p>The functionality of the module is described in the <code class="language-plaintext highlighter-rouge">key.h</code> header file:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#pragma once
#include</span> <span class="cpf">&lt;stdint.h&gt;</span><span class="cp">
</span>
<span class="k">class</span> <span class="nc">key</span> <span class="p">{</span>
  <span class="nl">public:</span>
    <span class="k">static</span> <span class="kt">uint8_t</span> <span class="n">toUpperCase</span><span class="p">(</span><span class="kt">uint8_t</span> <span class="n">aCharacter</span><span class="p">);</span>            <span class="c1">// convert a character to upper case</span>
    <span class="k">static</span> <span class="kt">bool</span> <span class="n">isHexCharacter</span><span class="p">(</span><span class="kt">uint8_t</span> <span class="n">aCharacter</span><span class="p">);</span>            <span class="c1">// check if a character is a valid hex character, ie. 0-9 or A-F - assuming upper case</span>
    <span class="k">static</span> <span class="kt">uint8_t</span> <span class="n">valueFromHexCharacter</span><span class="p">(</span><span class="kt">uint8_t</span> <span class="n">aCharacter</span><span class="p">);</span>  <span class="c1">// convert a hex character to a value, ie. 'A' -&gt; 10</span>
    <span class="k">static</span> <span class="kt">uint8_t</span> <span class="n">hexCharacterFromValue</span><span class="p">(</span><span class="kt">uint8_t</span> <span class="n">aValue</span><span class="p">);</span>      <span class="c1">// convert a value to a hex character, ie. 10 -&gt; 'A'</span>
<span class="p">};</span>
</code></pre></div></div>

<p>The implementation is located in the accompanying <code class="language-plaintext highlighter-rouge">key.cpp</code>:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">"key.h"</span><span class="cp">
</span>
<span class="kt">uint8_t</span> <span class="n">key</span><span class="o">::</span><span class="n">toUpperCase</span><span class="p">(</span><span class="kt">uint8_t</span> <span class="n">aCharacter</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">aCharacter</span> <span class="o">&gt;=</span> <span class="sc">'a'</span> <span class="o">&amp;&amp;</span> <span class="n">aCharacter</span> <span class="o">&lt;=</span> <span class="sc">'z'</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">aCharacter</span> <span class="o">=</span> <span class="n">aCharacter</span> <span class="o">-</span> <span class="sc">'a'</span> <span class="o">+</span> <span class="sc">'A'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">aCharacter</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">bool</span> <span class="n">key</span><span class="o">::</span><span class="n">isHexCharacter</span><span class="p">(</span><span class="kt">uint8_t</span> <span class="n">aCharacter</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">((</span><span class="n">aCharacter</span> <span class="o">&gt;=</span> <span class="sc">'A'</span> <span class="o">&amp;&amp;</span> <span class="n">aCharacter</span> <span class="o">&lt;=</span> <span class="sc">'F'</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="n">aCharacter</span> <span class="o">&gt;=</span> <span class="sc">'0'</span> <span class="o">&amp;&amp;</span> <span class="n">aCharacter</span> <span class="o">&lt;=</span> <span class="sc">'9'</span><span class="p">));</span>
<span class="p">}</span>

<span class="kt">uint8_t</span> <span class="n">key</span><span class="o">::</span><span class="n">valueFromHexCharacter</span><span class="p">(</span><span class="kt">uint8_t</span> <span class="n">aCharacter</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">aCharacter</span> <span class="o">&gt;=</span> <span class="sc">'0'</span> <span class="o">&amp;&amp;</span> <span class="n">aCharacter</span> <span class="o">&lt;=</span> <span class="sc">'9'</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">aCharacter</span> <span class="o">-</span> <span class="sc">'0'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">aCharacter</span> <span class="o">&gt;=</span> <span class="sc">'A'</span> <span class="o">&amp;&amp;</span> <span class="n">aCharacter</span> <span class="o">&lt;=</span> <span class="sc">'F'</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">aCharacter</span> <span class="o">-</span> <span class="sc">'A'</span> <span class="o">+</span> <span class="mi">10</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>        <span class="c1">// in case the character is not a hex character, return 0 as value</span>
<span class="p">}</span>

<span class="kt">uint8_t</span> <span class="n">key</span><span class="o">::</span><span class="n">hexCharacterFromValue</span><span class="p">(</span><span class="kt">uint8_t</span> <span class="n">aValue</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">aValue</span> <span class="o">&lt;=</span> <span class="mi">9</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">aValue</span> <span class="o">+</span> <span class="sc">'0'</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">aValue</span> <span class="o">&lt;=</span> <span class="mi">15</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">aValue</span> <span class="o">-</span> <span class="mi">10</span> <span class="o">+</span> <span class="sc">'A'</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span>
        <span class="k">return</span> <span class="sc">'?'</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>To test these 4 member functions, I have created a test application using Unity as the unit testing framework. You can find the test application at test/test_key/test.cpp.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;unity.h&gt;</span><span class="cp">
#include</span> <span class="cpf">"key.h"</span><span class="cp">
</span>
<span class="kt">void</span> <span class="nf">setUp</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{}</span>           <span class="c1">// before test</span>
<span class="kt">void</span> <span class="nf">tearDown</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{}</span>        <span class="c1">// after test</span>

<span class="kt">void</span> <span class="nf">test_toUpperCase</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">TEST_ASSERT_EQUAL_UINT8</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="p">(</span><span class="sc">'A'</span><span class="p">),</span> <span class="n">key</span><span class="o">::</span><span class="n">toUpperCase</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="p">(</span><span class="sc">'a'</span><span class="p">)));</span>
    <span class="n">TEST_ASSERT_EQUAL_UINT8</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="p">(</span><span class="sc">'A'</span><span class="p">),</span> <span class="n">key</span><span class="o">::</span><span class="n">toUpperCase</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="p">(</span><span class="sc">'A'</span><span class="p">)));</span>
    <span class="n">TEST_ASSERT_EQUAL_UINT8</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="p">(</span><span class="sc">'0'</span><span class="p">),</span> <span class="n">key</span><span class="o">::</span><span class="n">toUpperCase</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="p">(</span><span class="sc">'0'</span><span class="p">)));</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test_isHexCharacter</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">TEST_ASSERT_TRUE</span><span class="p">(</span><span class="n">key</span><span class="o">::</span><span class="n">isHexCharacter</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="p">(</span><span class="sc">'0'</span><span class="p">)));</span>
    <span class="n">TEST_ASSERT_TRUE</span><span class="p">(</span><span class="n">key</span><span class="o">::</span><span class="n">isHexCharacter</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="p">(</span><span class="sc">'9'</span><span class="p">)));</span>
    <span class="n">TEST_ASSERT_TRUE</span><span class="p">(</span><span class="n">key</span><span class="o">::</span><span class="n">isHexCharacter</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="p">(</span><span class="sc">'A'</span><span class="p">)));</span>
    <span class="n">TEST_ASSERT_TRUE</span><span class="p">(</span><span class="n">key</span><span class="o">::</span><span class="n">isHexCharacter</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="p">(</span><span class="sc">'F'</span><span class="p">)));</span>
    <span class="n">TEST_ASSERT_FALSE</span><span class="p">(</span><span class="n">key</span><span class="o">::</span><span class="n">isHexCharacter</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="p">(</span><span class="sc">'-'</span><span class="p">)));</span>
    <span class="n">TEST_ASSERT_FALSE</span><span class="p">(</span><span class="n">key</span><span class="o">::</span><span class="n">isHexCharacter</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="p">(</span><span class="sc">'O'</span><span class="p">)));</span>
    <span class="n">TEST_ASSERT_FALSE</span><span class="p">(</span><span class="n">key</span><span class="o">::</span><span class="n">isHexCharacter</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="p">(</span><span class="sc">'a'</span><span class="p">)));</span>        <span class="c1">// we assume uppercase, so lowercase should fail...</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test_valueFromHexCharacter</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">TEST_ASSERT_EQUAL_UINT8</span><span class="p">(</span><span class="mi">0U</span><span class="p">,</span> <span class="n">key</span><span class="o">::</span><span class="n">valueFromHexCharacter</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="p">(</span><span class="sc">'0'</span><span class="p">)));</span>
    <span class="n">TEST_ASSERT_EQUAL_UINT8</span><span class="p">(</span><span class="mi">9U</span><span class="p">,</span> <span class="n">key</span><span class="o">::</span><span class="n">valueFromHexCharacter</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="p">(</span><span class="sc">'9'</span><span class="p">)));</span>
    <span class="n">TEST_ASSERT_EQUAL_UINT8</span><span class="p">(</span><span class="mi">10U</span><span class="p">,</span> <span class="n">key</span><span class="o">::</span><span class="n">valueFromHexCharacter</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="p">(</span><span class="sc">'A'</span><span class="p">)));</span>
    <span class="n">TEST_ASSERT_EQUAL_UINT8</span><span class="p">(</span><span class="mi">15U</span><span class="p">,</span> <span class="n">key</span><span class="o">::</span><span class="n">valueFromHexCharacter</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="p">(</span><span class="sc">'F'</span><span class="p">)));</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test_hexCharacterFromValue</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">TEST_ASSERT_EQUAL_UINT8</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="p">(</span><span class="sc">'0'</span><span class="p">),</span> <span class="n">key</span><span class="o">::</span><span class="n">hexCharacterFromValue</span><span class="p">(</span><span class="mi">0U</span><span class="p">));</span>
    <span class="n">TEST_ASSERT_EQUAL_UINT8</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="p">(</span><span class="sc">'9'</span><span class="p">),</span> <span class="n">key</span><span class="o">::</span><span class="n">hexCharacterFromValue</span><span class="p">(</span><span class="mi">9U</span><span class="p">));</span>
    <span class="n">TEST_ASSERT_EQUAL_UINT8</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="p">(</span><span class="sc">'A'</span><span class="p">),</span> <span class="n">key</span><span class="o">::</span><span class="n">hexCharacterFromValue</span><span class="p">(</span><span class="mi">10U</span><span class="p">));</span>
    <span class="n">TEST_ASSERT_EQUAL_UINT8</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="p">(</span><span class="sc">'F'</span><span class="p">),</span> <span class="n">key</span><span class="o">::</span><span class="n">hexCharacterFromValue</span><span class="p">(</span><span class="mi">15U</span><span class="p">));</span>
    <span class="n">TEST_ASSERT_EQUAL_UINT8</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="p">(</span><span class="sc">'?'</span><span class="p">),</span> <span class="n">key</span><span class="o">::</span><span class="n">hexCharacterFromValue</span><span class="p">(</span><span class="mi">16U</span><span class="p">));</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">UNITY_BEGIN</span><span class="p">();</span>
    <span class="n">RUN_TEST</span><span class="p">(</span><span class="n">test_toUpperCase</span><span class="p">);</span>
    <span class="n">RUN_TEST</span><span class="p">(</span><span class="n">test_isHexCharacter</span><span class="p">);</span>
    <span class="n">RUN_TEST</span><span class="p">(</span><span class="n">test_valueFromHexCharacter</span><span class="p">);</span>
    <span class="c1">// RUN_TEST(test_hexCharacterFromValue);</span>
    <span class="n">UNITY_END</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="alert alert-secondary" role="alert">
  Note that PlatformIO makes certain assumptions about the location of test files. For instance, it assumes that each test should be in a subdirectory with a name starting with the <b>"test_"</b> prefix.
</div>

<p>So now we can run the tests. There are two ways to do this: using the PlatformIO test icon in the bottom status bar or via the <strong>Test Explorer</strong> view:</p>

<p><a data-bigpicture="{&quot;imgSrc&quot;: &quot;/assets/posts/2023-04-17-test-coverage-on-unit-testing/image2.png&quot;}" href="#">
  <img class="img-fluid screenshot mw-md-100" src="/assets/posts/2023-04-17-test-coverage-on-unit-testing/image2.png" />
</a></p>

<p>After processing, we should see a detailed report about the successful testing results:</p>

<p><a data-bigpicture="{&quot;imgSrc&quot;: &quot;/assets/posts/2023-04-17-test-coverage-on-unit-testing/image3.png&quot;}" href="#">
  <img class="img-fluid screenshot mw-md-100" src="/assets/posts/2023-04-17-test-coverage-on-unit-testing/image3.png" />
</a></p>

<h2 id="preparing-code-coverage-data-files">Preparing Code Coverage Data Files</h2>

<p>Our tests are now running, and we can see which ones pass and which ones fail. Next, let’s take a closer look at the specific parts of the code being tested. To do so, we need to configure the compiler to generate some additional information. This allows us to track which statements are executed while running the code.</p>

<div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">[env:generic]</span>
<span class="py">platform</span> <span class="p">=</span> <span class="s">native</span>
<span class="py">build_flags</span> <span class="p">=</span>
    <span class="err">-D</span> <span class="err">unitTesting</span>
    <span class="err">-lgcov</span>
    <span class="err">--coverage</span>
    <span class="err">-fprofile-abs-path</span>
</code></pre></div></div>

<p>Note the 3 extra build flags: <code class="language-plaintext highlighter-rouge">-lgcov, --coverage, -fprofile-abs-path</code>. With these flags, the compiler creates extra files (<code class="language-plaintext highlighter-rouge">.gcda</code>, <code class="language-plaintext highlighter-rouge">.gcdo</code>) to track code execution. You can find them in the <code class="language-plaintext highlighter-rouge">.pio/build/generic</code> folder:</p>

<p><a data-bigpicture="{&quot;imgSrc&quot;: &quot;/assets/posts/2023-04-17-test-coverage-on-unit-testing/image4.png&quot;}" href="#">
  <img class="img-fluid screenshot mw-md-100" src="/assets/posts/2023-04-17-test-coverage-on-unit-testing/image4.png" />
</a></p>

<p>These files will be used to visualize what parts of the code were executed.</p>

<h2 id="visualizing-results">Visualizing Results</h2>

<p>The only thing missing is a nice visualization of the results. Luckily, for this there is a good VSCode extension called <a href="https://marketplace.visualstudio.com/items?itemName=JacquesLucke.gcov-viewer">Gcov Viewer</a>.</p>

<p><a data-bigpicture="{&quot;imgSrc&quot;: &quot;/assets/posts/2023-04-17-test-coverage-on-unit-testing/image5.png&quot;}" href="#">
  <img class="img-fluid screenshot mw-md-100" src="/assets/posts/2023-04-17-test-coverage-on-unit-testing/image5.png" />
</a></p>

<p>This extension is controlled via the Command Palette, which is a minor burden but you’ll get used to it quickly.
<code class="language-plaintext highlighter-rouge">ctrl/cmd-shift-p</code> and type “Gcov”, this will show you all the Gcov commands. The 3 most important are <strong>Show</strong>, <strong>Hide</strong> and <strong>Reset</strong> and they will settle themselves on top with your “recently used” commands:</p>

<p><a data-bigpicture="{&quot;imgSrc&quot;: &quot;/assets/posts/2023-04-17-test-coverage-on-unit-testing/image6.png&quot;}" href="#">
  <img class="img-fluid screenshot mw-md-100" src="/assets/posts/2023-04-17-test-coverage-on-unit-testing/image6.png" />
</a></p>

<p>Select <strong>“Gcov Show”</strong> and it will create an overlay on your source code files, showing which lines have been executed and which not.
If you want the non-executed lines to show in red, you need to activate a setting of the Gcov extension <em>“Highlight Missed Lines”</em>. I prefer this, as this way it is more obvious which lines are missed. Several lines of your source code do not translate to executable code and those lines just remain uncolored.</p>

<p><a data-bigpicture="{&quot;imgSrc&quot;: &quot;/assets/posts/2023-04-17-test-coverage-on-unit-testing/image7.png&quot;}" href="#">
  <img class="img-fluid screenshot mw-md-100" src="/assets/posts/2023-04-17-test-coverage-on-unit-testing/image7.png" />
</a></p>

<p>Note how each line has a color and a number of how many times it has been executed. However, our test misses the edge case where valueFromHexCharacter receives an invalid input, so we need to fix that.</p>

<p>We saw that GCC creates a coverage file for each “.cpp” file in our project. This means that also our test application itself is tracked.
Look how one of the tests is not being run, because I commented it out in the test-runner main().</p>

<p><a data-bigpicture="{&quot;imgSrc&quot;: &quot;/assets/posts/2023-04-17-test-coverage-on-unit-testing/image8.png&quot;}" href="#">
  <img class="img-fluid screenshot mw-md-100" src="/assets/posts/2023-04-17-test-coverage-on-unit-testing/image8.png" />
</a></p>

<p>When you improve your tests and rerun them, the results will continue to be added to the .gcno and .gcda files that are already present. However, at some point, you may want to reset your results and start over. To do so, you can use the “Gcov Reset” command.</p>

<h2 id="conclusion">Conclusion</h2>

<p>Code coverage analysis is an essential aspect of software development that provides insight into the effectiveness of testing and identifies areas of the code that may need further attention. By using best practices in testing and code coverage analysis, software developers can produce high-quality code that is reliable, maintainable, and robust.</p>]]></content><author><name>Pascal Roobrouck</name></author><category term="blog" /><category term="insights" /><summary type="html"><![CDATA[An introduction to the concept of code coverage analysis in the PlatformIO ecosystem]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://piolabs.com/assets/posts/2023-04-17-test-coverage-on-unit-testing/image7.png" /><media:content medium="image" url="https://piolabs.com/assets/posts/2023-04-17-test-coverage-on-unit-testing/image7.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry></feed>