<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.3.3">Jekyll</generator><link href="https://piolabs.com/feed.xml" rel="self" type="application/atom+xml" /><link href="https://piolabs.com/" rel="alternate" type="text/html" /><updated>2024-03-04T18:15:06+02:00</updated><id>https://piolabs.com/feed.xml</id><title type="html">PlatformIO Labs</title><subtitle>A proven technology used by global innovators and by millions of embedded developers around the world.</subtitle><author><name>PlatformIO Labs</name><email>contact@piolabs.com</email></author><entry><title type="html">PlatformIO Open Source February Updates</title><link href="https://piolabs.com/blog/news/platformio-oss-february-2024-updates.html" rel="alternate" type="text/html" title="PlatformIO Open Source February Updates" /><published>2024-03-04T00:00:00+02:00</published><updated>2024-03-04T00:00:00+02:00</updated><id>https://piolabs.com/blog/news/platformio-oss-february-2024-updates</id><content type="html" xml:base="https://piolabs.com/blog/news/platformio-oss-february-2024-updates.html"><![CDATA[<p>Welcome to the February 2024 updates of <a href="https://platformio.org/">PlatformIO Open Source</a> professional collaborative platform for embedded development.</p>

<p>This month we received a lot of helpful feedback from our community, which let us identify the most important parts of our OSS ecosystem that required our attention, so there are plenty of updates pushed in this month that we hope you will like.</p>

<!-- more -->

<p><img class="figure-img img-fluid rounded" src="/assets/posts/oss-updates/platformio-oss-february-news.jpg" alt="PlatformIO Open Source February Updates" /></p>

<p>During February, we rolled out a bugfix release for PlatformIO Core, added support for the latest Zephyr RTOS 3.6 and Teensyduino v1.59, published updates for several popular development platforms, fixed a lot of issues. Some of the key highlights include:</p>

<ul id="markdown-toc">
  <li><a href="#platformio-core-6113" id="markdown-toc-platformio-core-6113">PlatformIO Core 6.1.13</a></li>
  <li><a href="#zephyr-rtos-v36" id="markdown-toc-zephyr-rtos-v36">Zephyr RTOS v3.6</a></li>
  <li><a href="#nordic-nrf52-dev-platform-v104" id="markdown-toc-nordic-nrf52-dev-platform-v104">Nordic nRF52 dev-platform v10.4</a></li>
  <li><a href="#teensy-dev-platform-v50" id="markdown-toc-teensy-dev-platform-v50">Teensy dev-platform v5.0</a></li>
  <li><a href="#arduino-core-for-mbed-enabled-devices-v41" id="markdown-toc-arduino-core-for-mbed-enabled-devices-v41">Arduino Core for mbed-enabled devices v4.1</a></li>
</ul>

<h2 id="platformio-core-6113">PlatformIO Core 6.1.13</h2>

<p><a href="https://docs.platformio.org/en/latest/core/index.html">PlatformIO Core</a> is the heart of the whole PlatformIO ecosystem and we are excited to announce the next release with lots of great improvements and bugfixes:</p>

<ul>
  <li>Added support for Python 3.12</li>
  <li>Introduced the capability to launch the debug server in a separate process (<a href="https://github.com/platformio/platformio-core/issues/4722">issue #4722</a>)</li>
  <li>Introduced a warning during the verification of MCU maximum RAM usage, signaling when the allocated RAM surpasses 100% (<a href="https://github.com/platformio/platformio-core/issues/4791">issue #4791</a>)</li>
  <li>Drastically enhanced the speed of project building when operating in verbose mode (<a href="https://github.com/platformio/platformio-core/issues/4783">issue #4783</a>)</li>
  <li>Upgraded the build engine to the latest version of SCons (4.6.0) to improve build performance, reliability, and compatibility with other tools and systems (<a href="https://github.com/SCons/scons/releases/tag/4.6.0">release notes</a>)</li>
  <li>Enhanced the handling of built-in variables in <a href="https://docs.platformio.org/en/latest/projectconf.html">“platformio.ini”</a> configuration file during <a href="https://docs.platformio.org/en/latest/projectconf/interpolation.html">Interpolation of Values</a> (<a href="https://github.com/platformio/platformio-core/issues/4695">issue #4695</a>)</li>
  <li>Enhanced PIP dependency declarations for improved reliability and extended support to include Python 3.6 (<a href="https://github.com/platformio/platformio-core/issues/4819">issue #4819</a>)</li>
  <li>Implemented automatic installation of missing dependencies when utilizing a SOCKS proxy (<a href="https://github.com/platformio/platformio-core/issues/4822">issue #4822</a>)</li>
  <li>Implemented a fail-safe mechanism to terminate a debugging session if an unknown CLI option is passed (<a href="https://github.com/platformio/platformio-core/issues/4699">issue #4699</a>)</li>
  <li>Rectified an issue where <code class="language-plaintext highlighter-rouge">${platformio.name}</code> erroneously represented <code class="language-plaintext highlighter-rouge">None</code> as the default <a href="https://docs.platformio.org/en/latest/projectconf/sections/platformio/options/generic/name.html">project name</a> (<a href="https://github.com/platformio/platformio-core/issues/4717">issue #4717</a>)</li>
  <li>Resolved an issue where the <code class="language-plaintext highlighter-rouge">COMPILATIONDB_INCLUDE_TOOLCHAIN</code> setting was not correctly applying to private libraries (<a href="https://github.com/platformio/platformio-core/issues/4762">issue #4762</a>)</li>
  <li>Resolved an issue where <code class="language-plaintext highlighter-rouge">get_systype()</code> inaccurately returned the architecture when executed within a Docker container on a 64-bit kernel with a 32-bit userspace (<a href="https://github.com/platformio/platformio-core/issues/4777">issue #4777</a>)</li>
  <li>Resolved an issue with incorrect handling of the <code class="language-plaintext highlighter-rouge">check_src_filters</code> option when used in multiple environments (<a href="https://github.com/platformio/platformio-core/issues/4788">issue #4788</a>)</li>
  <li>Resolved an issue where running <a href="https://docs.platformio.org/en/latest/core/userguide/project/cmd_metadata.html">pio project metadata</a> resulted in duplicated “include” entries (<a href="https://github.com/platformio/platformio-core/issues/4723">issue #4723</a>)</li>
  <li>Resolved an issue where native debugging failed on the host machine (<a href="https://github.com/platformio/platformio-core/issues/4745">issue #4745</a>)</li>
  <li>Resolved an issue where custom debug configurations were being inadvertently overwritten in VSCode’s <code class="language-plaintext highlighter-rouge">launch.json</code> (<a href="https://github.com/platformio/platformio-core/issues/4810">issue #4810</a>)</li>
</ul>

<p>See <a href="https://github.com/platformio/platformio-core/releases/tag/v6.1.12">Release Notes</a> for more detailed information and use <a href="https://docs.platformio.org/en/latest/core/userguide/cmd_upgrade.html">pio upgrade</a> command to update to the latest version.</p>

<h2 id="zephyr-rtos-v36">Zephyr RTOS v3.6</h2>

<p>We’re happy to announce updated support for the latest release v3.6.0 of <a href="https://www.zephyrproject.org/" target="_blank">Zephyr Project</a> - a scalable real-time operating system (RTOS) supporting multiple hardware architectures, optimized for resource-constrained devices, and built with safety and security in mind.</p>

<p><strong>Major enhancements in v3.6.0:</strong></p>

<ul>
  <li>New GNSS subsystem added, enabling geo-awareness in Zephyr applications.</li>
  <li>New API and drivers introduced for interfacing with keyboard matrices.</li>
  <li>Bluetooth Mesh Protocol 1.1 now supported by default.</li>
</ul>

<p><strong>Related resources for Zephyr framework</strong>:</p>

<ul>
  <li><a href="https://github.com/zephyrproject-rtos/zephyr/releases/tag/v3.6.0">Release notes for v3.6.0</a></li>
  <li><a href="https://docs.platformio.org/en/latest/frameworks/zephyr.html">Documentation for Zephyr framework</a></li>
  <li><a href="https://docs.platformio.org/en/latest/frameworks/zephyr.html#platforms">Supported development platforms</a></li>
  <li><a href="https://docs.platformio.org/en/latest/frameworks/zephyr.html#boards">Supported boards</a></li>
</ul>

<h2 id="nordic-nrf52-dev-platform-v104">Nordic nRF52 dev-platform v10.4</h2>

<p>The new release of the <a href="https://registry.platformio.org/platforms/platformio/nordicnrf52">Nordic nRF52</a> dev-platform v10.4 brings support for the latest Arduino cores and several minor improvements:</p>

<ul>
  <li>Added new board <a href="https://docs.platformio.org/en/latest/boards/nordicnrf52/calliopemini_v3.html">Calliope Mini v3</a></li>
  <li>Updated Arduino Core for nRF5 based boards to the latest v0.8.0 (<a href="https://github.com/sandeepmistry/arduino-nRF5/releases/tag/0.8.0">release notes</a>)</li>
  <li>Updated Arduino-mbed core to v4.1.1 (<a href="https://github.com/arduino/ArduinoCore-mbed/releases/tag/4.1.1">release notes</a>)</li>
  <li>Minor fixes and improvements (<a href="https://github.com/platformio/platform-nordicnrf52/issues/189">#189</a>)</li>
</ul>

<p><strong>Related resources for the Nordic nRF52 dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/nordicnrf52.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-nordicnrf52/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 id="teensy-dev-platform-v50">Teensy dev-platform v5.0</h2>

<p>The new release of the <a href="https://registry.platformio.org/platforms/platformio/teensy">Teensy</a> dev-platform brings support for the latest Teensyduino v1.59 and minor improvements:</p>

<ul>
  <li>Updated Teensyduino to v1.59 (<a href="https://github.com/PaulStoffregen/cores/releases/tag/1.59">release notes</a>)</li>
  <li>Dropped support for legacy Mbed framework</li>
  <li>Minor fixes and improvements (<a href="https://github.com/platformio/platform-teensy/issues/106">#106</a>)</li>
</ul>

<p><strong>Related resources for the Teensy dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/teensy.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-teensy/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 id="arduino-core-for-mbed-enabled-devices-v41">Arduino Core for mbed-enabled devices v4.1</h2>

<p>The <a href="https://registry.platformio.org/platforms/platformio/ststm32">ST STM32</a>, <a href="https://registry.platformio.org/platforms/platformio/nordicnrf52">Nordic nRF52</a> and <a href="https://registry.platformio.org/platforms/platformio/raspberrypi">Raspberry Pi RP2040</a> dev-platforms have been updated to support the latest Arduino Core for mbed-enabled devices v4.1.1. According to the <a href="https://github.com/arduino/ArduinoCore-mbed/releases/tag/4.1.1">release notes</a>, v4.1.1 brings a lot of bugfixes and improvements in the core and accompanying libraries.</p>

<h2 class="no_toc" id="stay-in-touch-with-us">Stay in touch with us</h2>

<p>Stay tuned to this blog or follow us on <a href="https://www.linkedin.com/company/platformio" target="_blank">LinkedIn</a> and Twitter <a href="https://twitter.com/PlatformIO_Org" target="_blank">@PlatformIO_Org</a> to keep up to date with the latest news, articles and tips!</p>]]></content><author><name>Valerii Koval</name></author><category term="blog" /><category term="news" /><summary type="html"><![CDATA[PlatformIO Core bugfix release, Support for the latest Zephyr RTOS and Teensyduino, Updates for Nordic nRF52 and mbed-enabled dev-platforms]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://piolabs.com/assets/posts/oss-updates/platformio-oss-february-news.jpg" /><media:content medium="image" url="https://piolabs.com/assets/posts/oss-updates/platformio-oss-february-news.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">Setting up PlatformIO for CI/CD with Testing, Code Coverage and Versioning</title><link href="https://piolabs.com/blog/insights/cicd-testing-coverage-versioning.html" rel="alternate" type="text/html" title="Setting up PlatformIO for CI/CD with Testing, Code Coverage and Versioning" /><published>2024-01-15T00:00:00+02:00</published><updated>2024-01-15T00:00:00+02:00</updated><id>https://piolabs.com/blog/insights/cicd-testing-coverage-versioning</id><content type="html" xml:base="https://piolabs.com/blog/insights/cicd-testing-coverage-versioning.html"><![CDATA[<p>Today almost all professional software development is executed using an agile methodology
with version control, automatic testing and builds in the cloud. However, this is not yet very common for firmware development.</p>

<p>This article explores how to set up a PlatformIO project and benefit from all the CI/CD features of modern software development approaches.</p>

<!-- more -->

<h3>Table of Contents</h3>

<ul id="markdown-toc">
  <li><a href="#project-requirements" id="markdown-toc-project-requirements">Project Requirements</a></li>
  <li><a href="#getting-started" id="markdown-toc-getting-started">Getting Started</a>    <ul>
      <li><a href="#step-1-project-environments" id="markdown-toc-step-1-project-environments">Step 1: Project Environments</a></li>
      <li><a href="#step-2-build-info-injection" id="markdown-toc-step-2-build-info-injection">Step 2: Build Info Injection</a></li>
      <li><a href="#step-3-versioning-essentials" id="markdown-toc-step-3-versioning-essentials">Step 3: Versioning Essentials</a></li>
      <li><a href="#step-4-testing-with-code-coverage" id="markdown-toc-step-4-testing-with-code-coverage">Step 4: Testing with Code Coverage</a></li>
    </ul>
  </li>
  <li><a href="#demo-time" id="markdown-toc-demo-time">Demo Time</a>    <ul>
      <li><a href="#step-1-local-development" id="markdown-toc-step-1-local-development">Step 1: Local Development</a></li>
      <li><a href="#step-2-committing-changes" id="markdown-toc-step-2-committing-changes">Step 2: Committing Changes</a></li>
      <li><a href="#step-3-releasing-project" id="markdown-toc-step-3-releasing-project">Step 3: Releasing Project</a></li>
    </ul>
  </li>
  <li><a href="#conclusion" id="markdown-toc-conclusion">Conclusion</a></li>
  <li><a href="#appendix-1-why-do-we-need-all-of-this" id="markdown-toc-appendix-1-why-do-we-need-all-of-this">Appendix 1: Why do we need all of this?</a></li>
  <li><a href="#appendix-2-testing-the-private-internals-of-a-c-class" id="markdown-toc-appendix-2-testing-the-private-internals-of-a-c-class">Appendix 2: Testing the private internals of a C++ class</a></li>
  <li><a href="#appendix-3-a-single-source-file-built-in-both-environments" id="markdown-toc-appendix-3-a-single-source-file-built-in-both-environments">Appendix 3: A single source file built in both environments</a></li>
  <li><a href="#appendix-4-step-by-step-review-of-the-buildinfopy-extra-script" id="markdown-toc-appendix-4-step-by-step-review-of-the-buildinfopy-extra-script">Appendix 4: Step-by-step review of the buildinfo.py extra script</a></li>
  <li><a href="#appendix-5-step-by-step-review-of-github-actions-configuration-file" id="markdown-toc-appendix-5-step-by-step-review-of-github-actions-configuration-file">Appendix 5: Step-by-step review of Github Actions configuration file</a></li>
  <li><a href="#further-improvements" id="markdown-toc-further-improvements">Further Improvements</a></li>
</ul>

<h2 id="project-requirements">Project Requirements</h2>

<p>Let’s first list the requirements for our development environment:</p>

<ul>
  <li>Builds
    <ul>
      <li>be able to do a local development build on the development machine</li>
      <li>be able to do a production build in the cloud and archive the binary</li>
    </ul>
  </li>
  <li>Testing
    <ul>
      <li>run selected unit tests, on the desktop as well as on the target</li>
      <li>run all unit tests, on the desktop, target, as well as in the cloud</li>
      <li>generate a test coverage report, locally and in the cloud</li>
    </ul>
  </li>
  <li>Versioning
    <ul>
      <li>use semantic versioning, e.g. v1.2.3</li>
      <li>every build “knows” its type (development/production/etc.)</li>
      <li>every build “knows” its version</li>
      <li>whenever merging into the main branch, the version is automatically incremented, a release is created and sources and binary are attached to this release</li>
    </ul>
  </li>
</ul>

<p>If the purpose of any of these requirements is not immediately clear, <a href="/blog/insights/cicd-testing-coverage-versioning.html#appendix-1-why-do-we-need-all-of-this">appendix 1</a> clarifies the rationale behind them.</p>

<h2 id="getting-started">Getting Started</h2>

<h3 id="step-1-project-environments">Step 1: Project Environments</h3>

<p>The first step is to set up <code class="language-plaintext highlighter-rouge">platformio.ini</code> with a number of environments. Each environment will map onto a type of build (development/production/etc.). Separate environments will also take care of the testing. Here is a list of environments to get started:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">selected_generic_unittests</code></li>
  <li><code class="language-plaintext highlighter-rouge">all_generic_unittests</code></li>
  <li><code class="language-plaintext highlighter-rouge">target_selected_unittests</code></li>
  <li><code class="language-plaintext highlighter-rouge">target_application</code></li>
  <li><code class="language-plaintext highlighter-rouge">production_application</code></li>
</ul>

<p>Selecting the correct environment is simple from the bottom toolbar:</p>

<figure class="figure mb-1">
    <a data-bigpicture="{&quot;imgSrc&quot;: &quot;/assets/posts/2024-01-15-cicd-testing-coverage-versioning/image-1.png&quot;}" href="#">
      <img class="img-fluid screenshot mw-md-100" src="/assets/posts/2024-01-15-cicd-testing-coverage-versioning/image-1.png" />
    </a>
</figure>

<figure class="figure mb-5">
    <a data-bigpicture="{&quot;imgSrc&quot;: &quot;/assets/posts/2024-01-15-cicd-testing-coverage-versioning/image-2.png&quot;}" href="#">
      <img class="img-fluid screenshot mw-md-100" src="/assets/posts/2024-01-15-cicd-testing-coverage-versioning/image-2.png" />
    </a>
</figure>

<p>To ensure all environments use consistent parameters, we define those parameters in the <strong>[options]</strong> section and reuse those definitions in the <strong>[env:]</strong> sections.</p>

<p>Environments intended for the target hardware have to configure the specifics of the board, framework, debug interface, etc.:</p>

<div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">[options]</span>
<span class="py">platform</span> <span class="p">=</span> <span class="s">atmelavr</span>
<span class="py">board</span> <span class="p">=</span> <span class="s">uno</span>
<span class="py">framework</span> <span class="p">=</span> <span class="s">arduino</span>
</code></pre></div></div>

<p>Unit tests require some additional build flags to generate the coverage info. Specific tests can be selected with the <a href="https://docs.platformio.org/en/latest/projectconf/sections/env/options/test/test_filter.html">test_filter</a> option:</p>

<div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">unittesting_buildflag</span> <span class="p">=</span> <span class="s">-D unitTesting</span>
<span class="py">generic_hw_buildflag</span> <span class="p">=</span> <span class="s">-D generic_hw</span>
<span class="py">coverage_buildflag</span> <span class="p">=</span>
  <span class="err">-lgcov</span>
  <span class="err">--coverage</span>
  <span class="err">-fprofile-abs-path</span>
  <span class="err">-Og</span>
</code></pre></div></div>

<p>After defining the parameters in the <strong>[options]</strong> section, you can use them in any environment, as shown in the example below:</p>

<div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">[env:target_selected_unittests]</span>
<span class="py">platform</span> <span class="p">=</span> <span class="s">${options.platform}</span>
<span class="py">board</span> <span class="p">=</span> <span class="s">${options.board}</span>
<span class="py">framework</span> <span class="p">=</span> <span class="s">${options.framework}</span>

<span class="py">build_flags</span> <span class="p">=</span>   <span class="s">${options.unittesting_buildflag}</span>

<span class="py">test_framework</span> <span class="p">=</span> <span class="s">unity</span>
<span class="py">test_filter</span> <span class="p">=</span> <span class="s">${options.selected_tests}</span>
</code></pre></div></div>

<h3 id="step-2-build-info-injection">Step 2: Build Info Injection</h3>

<p>For the firmware to “know” what kind of build it is, we could use some compiler build flags, but this quickly becomes difficult to manage when we need more than a few settings. So instead I use a pair of files <code class="language-plaintext highlighter-rouge">buildinfo.h/.cpp</code>, which are generated at the beginning of the build process and included into the application:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// buildinfo.h</span>

<span class="cp">#pragma once
</span>
<span class="cp">#include</span> <span class="cpf">"stdint.h"</span><span class="cp">
#include</span> <span class="cpf">"buildtype.h"</span><span class="cp">
#include</span> <span class="cpf">"buildenvironment.h"</span><span class="cp">
</span>
<span class="k">class</span> <span class="nc">version</span> <span class="p">{</span>
  <span class="nl">public:</span>
    <span class="n">version</span><span class="p">()</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>
    <span class="k">static</span> <span class="kt">uint8_t</span> <span class="n">getIsVersionMajor</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">isVersionMajor</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">static</span> <span class="kt">uint8_t</span> <span class="nf">getIsVersionMinor</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">isVersionMinor</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">static</span> <span class="kt">uint8_t</span> <span class="nf">getIsVersionPatch</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">isVersionPatch</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">static</span> <span class="n">buildType</span> <span class="nf">getBuildType</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">theBuildType</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">static</span> <span class="n">buildEnvironment</span> <span class="nf">getBuildEnvironment</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">theBuildEnvironment</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">static</span> <span class="kt">void</span> <span class="nf">setIsVersion</span><span class="p">();</span>
    <span class="k">static</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">getIsVersionAsString</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">isVersionString</span><span class="p">;</span> <span class="p">}</span>

<span class="cp">#ifndef unitTesting
</span>  <span class="k">private</span><span class="o">:</span>
<span class="cp">#endif
</span>    <span class="k">static</span> <span class="kt">uint8_t</span> <span class="n">isVersionMajor</span><span class="p">;</span>
    <span class="k">static</span> <span class="kt">uint8_t</span> <span class="n">isVersionMinor</span><span class="p">;</span>
    <span class="k">static</span> <span class="kt">uint8_t</span> <span class="n">isVersionPatch</span><span class="p">;</span>

    <span class="k">static</span> <span class="n">buildType</span> <span class="n">theBuildType</span><span class="p">;</span>
    <span class="k">static</span> <span class="n">buildEnvironment</span> <span class="n">theBuildEnvironment</span><span class="p">;</span>

    <span class="k">static</span> <span class="k">constexpr</span> <span class="kt">uint8_t</span> <span class="n">maxVersionStringLength</span><span class="p">{</span><span class="mi">16U</span><span class="p">};</span>
    <span class="k">static</span> <span class="kt">char</span> <span class="n">isVersionString</span><span class="p">[</span><span class="n">maxVersionStringLength</span><span class="p">];</span>
<span class="p">};</span>
</code></pre></div></div>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// buildinfo.cpp</span>

<span class="cp">#include</span> <span class="cpf">"version.h"</span><span class="cp">
#include</span> <span class="cpf">"buildinfo.h"</span><span class="cp">
#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span>
<span class="kt">uint8_t</span> <span class="n">version</span><span class="o">::</span><span class="n">isVersionMajor</span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>
<span class="kt">uint8_t</span> <span class="n">version</span><span class="o">::</span><span class="n">isVersionMinor</span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>
<span class="kt">uint8_t</span> <span class="n">version</span><span class="o">::</span><span class="n">isVersionPatch</span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>
<span class="n">buildType</span> <span class="n">version</span><span class="o">::</span><span class="n">theBuildType</span><span class="p">{</span><span class="n">buildType</span><span class="o">::</span><span class="n">unknown</span><span class="p">};</span>
<span class="n">buildEnvironment</span> <span class="n">version</span><span class="o">::</span><span class="n">theBuildEnvironment</span><span class="p">{</span><span class="n">buildEnvironment</span><span class="o">::</span><span class="n">unknown</span><span class="p">};</span>

<span class="kt">char</span> <span class="n">version</span><span class="o">::</span><span class="n">isVersionString</span><span class="p">[</span><span class="n">maxVersionStringLength</span><span class="p">]{};</span>

<span class="kt">void</span> <span class="n">version</span><span class="o">::</span><span class="n">setIsVersion</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">isVersionMajor</span>      <span class="o">=</span> <span class="n">buildInfo</span><span class="o">::</span><span class="n">mainVersionDigit</span><span class="p">;</span>
    <span class="n">isVersionMinor</span>      <span class="o">=</span> <span class="n">buildInfo</span><span class="o">::</span><span class="n">minorVersionDigit</span><span class="p">;</span>
    <span class="n">isVersionPatch</span>      <span class="o">=</span> <span class="n">buildInfo</span><span class="o">::</span><span class="n">patchVersionDigit</span><span class="p">;</span>
    <span class="n">theBuildType</span>        <span class="o">=</span> <span class="n">buildInfo</span><span class="o">::</span><span class="n">theBuildType</span><span class="p">;</span>
    <span class="n">theBuildEnvironment</span> <span class="o">=</span> <span class="n">buildInfo</span><span class="o">::</span><span class="n">theBuildEnvironment</span><span class="p">;</span>

    <span class="n">snprintf</span><span class="p">(</span><span class="n">isVersionString</span><span class="p">,</span> <span class="n">maxVersionStringLength</span><span class="p">,</span> <span class="s">"v%d.%d.%d"</span><span class="p">,</span> <span class="n">isVersionMajor</span><span class="p">,</span> <span class="n">isVersionMinor</span><span class="p">,</span> <span class="n">isVersionPatch</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>This is only an example of what works for me and I use C++, but you will find it easy to adjust it to your specific needs.</p>

<p>When doing <strong>local</strong> builds, these files are generated with a Python script <code class="language-plaintext highlighter-rouge">buildinfo.py</code>.
On the cloud builds it is generated from a Github action declared in <code class="language-plaintext highlighter-rouge">testbuildrelease.yml</code>. I keep them together in the <strong>.github/workflows</strong> folder:</p>

<figure class="figure mb-5">
    <a data-bigpicture="{&quot;imgSrc&quot;: &quot;/assets/posts/2024-01-15-cicd-testing-coverage-versioning/image-3.png&quot;}" href="#">
      <img class="img-fluid screenshot mw-md-100" src="/assets/posts/2024-01-15-cicd-testing-coverage-versioning/image-3.png" />
    </a>
</figure>

<p>When the application includes the <code class="language-plaintext highlighter-rouge">buildinfo.h</code> file, it gets access to all the build info that can be used for multiple purposes, for example:</p>

<ul>
  <li>show the actual version of the firmware on the startup screen</li>
  <li>enable logging to UART only on a local development build and diable in production builds</li>
  <li>identify development builds, e.g. with different UI colors, so they won’t accidentally get installed at the customer side</li>
  <li>determine the age of the firmware based upon its build timestamp</li>
</ul>

<h3 id="step-3-versioning-essentials">Step 3: Versioning Essentials</h3>

<p>To keep track of the version, we use the well-known semantic versioning scheme, abbreviated <code class="language-plaintext highlighter-rouge">SemVer</code>, where a version looks like <code class="language-plaintext highlighter-rouge">v1.2.3</code>. The digits refer to the major version, minor version, patch version. Every time we do a release, one of the digits is incremented:</p>

<ul>
  <li>the major version increments on new features which are no longer backward compatible</li>
  <li>the minor version increments on new features which are backward compatible</li>
  <li>the patch version increments on bug fixes or code improvements without functional changes</li>
</ul>

<p>More info on semantic versioning see <a href="https://semver.org/" target="_blank">Semantic Versioning 2.0.0</a></p>

<p>When we do a local build, instead of incrementing SemVer digits, we simply add the latest (short) <strong>commit hash</strong> to the version, for example <code class="language-plaintext highlighter-rouge">v1.2.3-a2e4d5c7</code>. While developing, we usually create many different versions in between releases, but by using the commit hash, we can easily match any binary with its source.</p>

<p>When we merge changes from the <code class="language-plaintext highlighter-rouge">develop</code> branch into <code class="language-plaintext highlighter-rouge">main</code>, a Github Actions workflow will run and analyze the title of the merge commit. If this title contains <strong>major</strong> we create a major release. Similar for the word <strong>minor</strong> which creates a minor release. In all other cases we create a patch release. For convenience, each build also has a timestamp, e.g. <code class="language-plaintext highlighter-rouge">2023-10-15 12:34:56</code>.</p>

<h3 id="step-4-testing-with-code-coverage">Step 4: Testing with Code Coverage</h3>

<p>In order to know what we have actually tested, code coverage is supported, locally and via Github Actions. Locally, we use a VSCode extension such as GCOV viewer (see my previous article <a href="/blog/insights/test-coverage-on-unit-testing.html">Getting Started with Code Coverage in PlatformIO: A Beginner’s Guide to Writing Effective Tests</a>).</p>

<p>When building in the cloud with Github Actions, we connect the repository to the <strong>codecov.io</strong> service. Codecov is free for public repositories and there is good getting started documentation available <a href="https://docs.codecov.com/docs/quick-start" target="_blank">here</a>. After setting this up, our Github action will send the coverage results to Codecov and we will be able to browse the results report in an interactive way.</p>

<h2 id="demo-time">Demo Time</h2>

<p>Now it’s time to see it all in action!</p>

<p>I’ve set up a (template) <a href="https://github.com/Strooom/demoCloudBuilds" target="_blank">Github repository</a> so it’s easy to replicate it on your side. You can import it directly from the VSCode Welcome Page:</p>

<figure class="figure mb-5">
    <a data-bigpicture="{&quot;imgSrc&quot;: &quot;/assets/posts/2024-01-15-cicd-testing-coverage-versioning/image-11.png&quot;}" href="#">
      <img class="img-fluid screenshot mw-md-100" src="/assets/posts/2024-01-15-cicd-testing-coverage-versioning/image-11.png" />
    </a>
</figure>

<p>As for the actual target hardware, I am using the <strong>Arduino Uno</strong> board to keep things simple, but you can easily adapt that to a board of your preference by modifying the hardware settings in the <strong>[options]</strong> section of <code class="language-plaintext highlighter-rouge">platformio.ini</code>.</p>

<p>The repository has 2 branches: <code class="language-plaintext highlighter-rouge">main</code> and <code class="language-plaintext highlighter-rouge">develop</code>. Locally, we work on develop. The <strong>main</strong> branch is protected from committing directly, so you can only merge <strong>develop</strong> into <strong>main</strong>, which will then automatically create a release. The repository also has a <strong>v0.0.0</strong> release as a starting point to simplify the scripts.</p>

<h3 id="step-1-local-development">Step 1: Local Development</h3>

<p>First, make sure you are on the develop branch. Let’s assume you are working on the <code class="language-plaintext highlighter-rouge">lib/circularbuffer</code> library. The tests for this library are in <code class="language-plaintext highlighter-rouge">test/test_generic_circularbuffer</code>. The environment <code class="language-plaintext highlighter-rouge">[env:selected_generic_unittests]</code> uses a test filter so it only runs the tests for the library we’re working on. This approach keeps the test-driven-design cycles fast.</p>

<p>At any time you can simply run the unit tests to quickly validate your work on this library.
With the GCOV viewer you can easily check what code has been tested.</p>

<div class="alert alert-warning" role="alert">
  <b>Tip:</b> It's also easy to debug the code under test by adding <b>debug_test = test_generic_circularbuffer</b> to your <b>platformio.ini</b> and then start the debugger.
</div>

<p>If at any time you want to verify that all other unit tests are still passing, simply switch to the <code class="language-plaintext highlighter-rouge">[env:all_generic_unittests]</code> and run the tests. Of course it takes a bit longer, but it’s always reassuring that changes on your library under development did not break anything somewhere else in the project.</p>

<p>Assuming all unit tests are green, the next step could be to build and upload the application to the target. Simply change the environment to <code class="language-plaintext highlighter-rouge">[env:target_application]</code> and choose upload.</p>

<p>Before the build, the Python script <code class="language-plaintext highlighter-rouge">.github/workflows/buildinfo.py</code> will be executed. This script creates <code class="language-plaintext highlighter-rouge">buildinfo.h/.cpp</code> files containing useful info about the current build. This info is then available to the application for whatever purpose, as is shown in the example application in <code class="language-plaintext highlighter-rouge">src/main.cpp</code>:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;Arduino.h&gt;</span><span class="cp">
#include</span> <span class="cpf">"version.h"</span><span class="cp">
#include</span> <span class="cpf">"buildinfo.h"</span><span class="cp">
</span>
<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">version</span><span class="o">::</span><span class="n">setIsVersion</span><span class="p">();</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"Version "</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">version</span><span class="o">::</span><span class="n">getIsVersionAsString</span><span class="p">());</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">toString</span><span class="p">(</span><span class="n">buildInfo</span><span class="o">::</span><span class="n">theBuildEnvironment</span><span class="p">));</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">" "</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">toString</span><span class="p">(</span><span class="n">buildInfo</span><span class="o">::</span><span class="n">theBuildType</span><span class="p">));</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">" build, "</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">buildInfo</span><span class="o">::</span><span class="n">buildTimeStamp</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"</span><span class="se">\n\n</span><span class="s">"</span><span class="p">);</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="step-2-committing-changes">Step 2: Committing Changes</h3>

<p>Assuming you are happy with the application running on the target, let’s do a commit and push it to Github. This will trigger a workflow in the cloud which does the following:</p>

<ul>
  <li>start a fresh (virtual) Linux machine</li>
  <li>install PlatformIO on it</li>
  <li>checkout the repository to it</li>
  <li>run all unit tests</li>
  <li>build the application using the latest version plus a commit hash</li>
</ul>

<p>If all of this is successful, the workflow run will turn green and have the resulting binary file attached to it, so it’s easy to refer and go back to this build any time later.</p>

<figure class="figure mb-5">
    <a data-bigpicture="{&quot;imgSrc&quot;: &quot;/assets/posts/2024-01-15-cicd-testing-coverage-versioning/image-4.png&quot;}" href="#">
      <img class="img-fluid screenshot mw-md-100" src="/assets/posts/2024-01-15-cicd-testing-coverage-versioning/image-4.png" />
    </a>
</figure>

<p>If the workflow fails, you’ll be notified by email and/or on Github mobile app. There are several steps included in the workflow which output the state of the current run and should allow you to quickly troubleshoot it.</p>

<div class="alert alert-warning" role="alert">
  <b>Note:</b> There is a Github Actions plugin which allows to see the result of the workflow run inside VSCode. However, if something goes wrong, you'll be redirected to the Github site to inspect the detailed output of the workflow run.
</div>

<p>One of the steps pushes the coverage report from unit testing to codecov.io, so we can see the results there:</p>

<figure class="figure mb-5">
    <a data-bigpicture="{&quot;imgSrc&quot;: &quot;/assets/posts/2024-01-15-cicd-testing-coverage-versioning/image-5.png&quot;}" href="#">
      <img class="img-fluid screenshot mw-md-100" src="/assets/posts/2024-01-15-cicd-testing-coverage-versioning/image-5.png" />
    </a>
</figure>

<p>And you can drill down into each file to see which code is not yet tested, marked in red or yellow:</p>

<figure class="figure mb-5">
    <a data-bigpicture="{&quot;imgSrc&quot;: &quot;/assets/posts/2024-01-15-cicd-testing-coverage-versioning/image-6.png&quot;}" href="#">
      <img class="img-fluid screenshot mw-md-100" src="/assets/posts/2024-01-15-cicd-testing-coverage-versioning/image-6.png" />
    </a>
</figure>

<div class="alert alert-warning" role="alert">
  <b>Tip:</b> Codecov also provides a nice badge which you can place into your <b>README.md</b> file. Go into <b>Codecov - Your repository - Settings - Badges &amp; Graphs</b> to copy paste the needed markdown code for the badge.
</div>

<h3 id="step-3-releasing-project">Step 3: Releasing Project</h3>

<p>Now, assume we are still doing fine and we decide that the latest commit to <strong>develop</strong> is ready to be released. Go into Github and create a pull request to start the merge of <strong>develop</strong> into <strong>main</strong>. Then when Github confirms everything can be merged, give the merge commit a name which starts with <strong>“minor”</strong>:</p>

<figure class="figure mb-5">
    <a data-bigpicture="{&quot;imgSrc&quot;: &quot;/assets/posts/2024-01-15-cicd-testing-coverage-versioning/image-7.png&quot;}" href="#">
      <img class="img-fluid screenshot mw-md-100" src="/assets/posts/2024-01-15-cicd-testing-coverage-versioning/image-7.png" />
    </a>
</figure>

<div class="alert alert-warning" role="alert">
  <b>Note:</b> the keywords <b>major</b> and <b>minor</b> are case sensitive!
</div>

<p>The merge commit will again trigger the workflow to run, but on the <strong>main</strong> branch this time. Furthermore, the <strong>major</strong> or <strong>minor</strong> keyword in the merge commit name will be recognized by the workflow and result in the creation of a new version and related release. The binary file as well as the source code will be attached to the release:</p>

<figure class="figure mb-5">
    <a data-bigpicture="{&quot;imgSrc&quot;: &quot;/assets/posts/2024-01-15-cicd-testing-coverage-versioning/image-8.png&quot;}" href="#">
      <img class="img-fluid screenshot mw-md-100" src="/assets/posts/2024-01-15-cicd-testing-coverage-versioning/image-8.png" />
    </a>
</figure>

<p>And Github will send a notification email to the team that there is a new release:</p>

<figure class="figure mb-5">
    <a data-bigpicture="{&quot;imgSrc&quot;: &quot;/assets/posts/2024-01-15-cicd-testing-coverage-versioning/image-9.png&quot;}" href="#">
      <img class="img-fluid screenshot mw-md-100" src="/assets/posts/2024-01-15-cicd-testing-coverage-versioning/image-9.png" />
    </a>
</figure>

<h2 id="conclusion">Conclusion</h2>

<p>VSCode with PlatformIO provides all the features needed for a professional embedded software development setup:</p>

<ul>
  <li>multiple environments for a project allow easy switching between unit testing and building target application</li>
  <li>using options simplifies the managing of these environments and keeps them consistent</li>
  <li>seamless integration with Github opens the path to builds in the cloud</li>
  <li>builds in the cloud simplify development distributed over a team</li>
  <li>Python scripting enables automation of tasks, such as automatic SemVer versioning</li>
</ul>

<h2 id="appendix-1-why-do-we-need-all-of-this">Appendix 1: Why do we need all of this?</h2>

<ul>
  <li>The target hardware is often connected to your local machine through a debug interface. The most common workflow is to write code, build a binary and download to the target.</li>
  <li>When working with multiple developers on an application, who has the latest official release? By doing the build in the cloud, you ensure the releases are always unique and in a central location.</li>
  <li>Test-driven Design (TDD) works best with fast build/test cycles, i.e. a few seconds. So when working on a particular area, you only want those tests being executed. Skipping all other tests reduces the cycle from minutes to seconds.</li>
  <li>However, before merging your new stuff into the main branch, you want to be sure your new code does not break anything else, so here we want to run all tests.</li>
  <li>A Test-Coverage report will give you a metric on the overall progress of your development. It will also show which areas may need more attention.</li>
  <li>During development, some features may be enabled (e.g. logging) and others disabled (e.g. firmware updates). In order to make sure that the production version for the customer has all the right features, we enable/disable them automatically by allowing the firmware build to know what type it is.</li>
</ul>

<h2 id="appendix-2-testing-the-private-internals-of-a-c-class">Appendix 2: Testing the private internals of a C++ class</h2>

<p>The private members of a class are inaccessible for code outside that class. But for unit testing, I often would like to make an exception, as it is easier to verify the correct functioning of the code if the tests are allowed to look at the private internals of the class.</p>

<p>A pragmatic approach is to add an additional build flag to the unit test builds (e.g. <code class="language-plaintext highlighter-rouge">unitTesting</code>) and exclude the <code class="language-plaintext highlighter-rouge">private</code> keyword from the source code for these kinds of builds.</p>

<p>In <strong>platformio.ini</strong> we can add the following option:</p>

<div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">unittesting_buildflag</span> <span class="p">=</span> <span class="s">-D unitTesting</span>
</code></pre></div></div>

<p>which we apply to all unit testing builds:</p>

<div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">[env:selected_generic_unittests]</span>
<span class="py">platform</span> <span class="p">=</span> <span class="s">native</span>

<span class="py">build_flags</span> <span class="p">=</span>
  <span class="err">${options.unittesting_buildflag}</span>
  <span class="err">${options.generic_hw_buildflag}</span>
  <span class="err">${options.coverage_buildflag}</span>
</code></pre></div></div>

<p>which then can be used in any class definition where you want the unit tests to have access to the private members:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#ifndef unitTesting
</span>  <span class="nl">private:</span>
<span class="cp">#endif
</span>    <span class="kt">uint32_t</span> <span class="n">head</span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>
    <span class="kt">uint32_t</span> <span class="n">level</span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>
    <span class="n">itemType</span> <span class="n">theBuffer</span><span class="p">[</span><span class="n">bufferLength</span><span class="p">]{};</span>
</code></pre></div></div>

<p>In this example (<code class="language-plaintext highlighter-rouge">circularbuffer.h</code>) the unit tests can directly check the head and level of the buffer, for example in the following test:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">test_initialize</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">constexpr</span> <span class="kt">uint32_t</span> <span class="n">testBufferLength</span><span class="p">{</span><span class="mi">4</span><span class="p">};</span>
    <span class="n">circularBuffer</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="p">,</span> <span class="n">testBufferLength</span><span class="o">&gt;</span> <span class="n">theBuffer</span><span class="p">;</span>
    <span class="n">TEST_ASSERT_EQUAL_UINT32</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">theBuffer</span><span class="p">.</span><span class="n">head</span><span class="p">);</span>
    <span class="n">TEST_ASSERT_EQUAL_UINT32</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">theBuffer</span><span class="p">.</span><span class="n">level</span><span class="p">);</span>
    <span class="n">TEST_ASSERT_EQUAL_UINT32</span><span class="p">(</span><span class="n">testBufferLength</span><span class="p">,</span> <span class="n">theBuffer</span><span class="p">.</span><span class="n">length</span><span class="p">);</span>
    <span class="n">TEST_ASSERT_TRUE</span><span class="p">(</span><span class="n">theBuffer</span><span class="p">.</span><span class="n">isEmpty</span><span class="p">());</span>
    <span class="n">TEST_ASSERT_FALSE</span><span class="p">(</span><span class="n">theBuffer</span><span class="p">.</span><span class="n">hasEvents</span><span class="p">());</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="appendix-3-a-single-source-file-built-in-both-environments">Appendix 3: A single source file built in both environments</h2>

<p>Sometimes the code we write could run on the target as well as on our desktop machine, but it requires small changes in order to build correctly. For example, on the Arduino platform, some C-string handling functions such as <strong>strlen</strong> require the main Arduino header file <strong>Arduino.h</strong>. However, for the desktop scenario, there is no <strong>Arduino.h</strong> file and we need include *<cstring>* header to make **strlen** work.</cstring></p>

<p>To deal with this, there is another build flag, which allows the code to know if we are building for target or for generic desktop hardware:</p>

<div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">generic_hw_buildflag</span> <span class="p">=</span> <span class="s">-D generic_hw</span>
</code></pre></div></div>

<p>Inside the code, we can use this to include the correct header as is shown here in the tests for the version library:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#ifndef generic_hw
#include</span> <span class="cpf">&lt;Arduino.h&gt;</span><span class="cp">
#else
#include</span> <span class="cpf">&lt;cstring&gt;</span><span class="cp">
#endif
</span></code></pre></div></div>

<p>So now we can use <strong>strlen</strong> in this test and it will work fine on both targets.</p>

<p>This approach can be further extended into the code itself. Provide mocks for certain hardware and use the mocks during desktop unit testing, use the real hardware when testing on the actual target hardware.</p>

<h2 id="appendix-4-step-by-step-review-of-the-buildinfopy-extra-script">Appendix 4: Step-by-step review of the buildinfo.py extra script</h2>

<p>First step is to run a Git command <code class="language-plaintext highlighter-rouge">git describe --tags</code> to get the latest tag and strip off any spaces from it:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># determine the latest releasev semver
</span><span class="n">latest_release_tag</span> <span class="o">=</span> <span class="n">subprocess</span><span class="p">.</span><span class="nf">run</span><span class="p">([</span><span class="sh">"</span><span class="s">git</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">describe</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">--tags</span><span class="sh">"</span><span class="p">],</span> <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="p">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">latest_release_tag</span> <span class="o">=</span> <span class="n">latest_release_tag</span><span class="p">.</span><span class="n">stdout</span><span class="p">.</span><span class="nf">strip</span><span class="p">()</span>
<span class="nf">print </span><span class="p">(</span><span class="sh">"</span><span class="se">\033</span><span class="s">[93;1;4mLatest Release Tag     : </span><span class="sh">"</span> <span class="o">+</span> <span class="n">latest_release_tag</span> <span class="o">+</span> <span class="sh">"</span><span class="se">\033</span><span class="s">[0m</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div>

<p>Next we split the output into its parts:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># determine last release version
</span><span class="n">latest_release_tag_parts</span> <span class="o">=</span> <span class="n">latest_release_tag</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sh">"</span><span class="s">-</span><span class="sh">"</span><span class="p">)</span>
<span class="n">latest_release_semver_incl_v</span> <span class="o">=</span> <span class="n">latest_release_tag_parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">latest_release_semver</span> <span class="o">=</span> <span class="n">latest_release_semver_incl_v</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
<span class="n">latest_release_digits</span> <span class="o">=</span> <span class="n">latest_release_semver</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sh">"</span><span class="s">.</span><span class="sh">"</span><span class="p">)</span>
<span class="n">latest_release_main</span> <span class="o">=</span> <span class="n">latest_release_digits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">latest_release_minor</span> <span class="o">=</span> <span class="n">latest_release_digits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">latest_release_patch</span> <span class="o">=</span> <span class="n">latest_release_digits</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="nf">print </span><span class="p">(</span><span class="sh">"</span><span class="se">\033</span><span class="s">[93;1;4mLatest Release Main    : </span><span class="sh">"</span> <span class="o">+</span> <span class="n">latest_release_main</span> <span class="o">+</span> <span class="sh">"</span><span class="se">\033</span><span class="s">[0m</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print </span><span class="p">(</span><span class="sh">"</span><span class="se">\033</span><span class="s">[93;1;4mLatest Release Minor   : </span><span class="sh">"</span> <span class="o">+</span> <span class="n">latest_release_minor</span> <span class="o">+</span> <span class="sh">"</span><span class="se">\033</span><span class="s">[0m</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print </span><span class="p">(</span><span class="sh">"</span><span class="se">\033</span><span class="s">[93;1;4mLatest Release Patch   : </span><span class="sh">"</span> <span class="o">+</span> <span class="n">latest_release_patch</span> <span class="o">+</span> <span class="sh">"</span><span class="se">\033</span><span class="s">[0m</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div>

<p>One more Git command will fetch the commit hash while the timestamp is retrieved from the OS:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># determine current commit hash
</span><span class="n">current_commit_hash</span> <span class="o">=</span> <span class="n">subprocess</span><span class="p">.</span><span class="nf">run</span><span class="p">([</span><span class="sh">"</span><span class="s">git</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">rev-parse</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">--short</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">HEAD</span><span class="sh">"</span><span class="p">],</span> <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="p">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">current_commit_hash</span> <span class="o">=</span> <span class="n">current_commit_hash</span><span class="p">.</span><span class="n">stdout</span><span class="p">.</span><span class="nf">strip</span><span class="p">()</span>
<span class="nf">print </span><span class="p">(</span><span class="sh">"</span><span class="se">\033</span><span class="s">[93;1;4mCurrent Commit Hash    : </span><span class="sh">"</span> <span class="o">+</span> <span class="n">current_commit_hash</span> <span class="o">+</span> <span class="sh">"</span><span class="se">\033</span><span class="s">[0m</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># determine the build timstamp
</span><span class="n">build_timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="nf">now</span><span class="p">().</span><span class="nf">strftime</span><span class="p">(</span><span class="sh">"</span><span class="s">%Y-%b-%d %H:%M:%S</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print </span><span class="p">(</span><span class="sh">"</span><span class="se">\033</span><span class="s">[93;1;4mBuild Timestamp        : </span><span class="sh">"</span> <span class="o">+</span> <span class="n">build_timestamp</span> <span class="o">+</span> <span class="sh">"</span><span class="se">\033</span><span class="s">[0m</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div>

<p>Notice the print commands, they will show the output in yellow in the build terminal:</p>

<figure class="figure mb-5">
    <a data-bigpicture="{&quot;imgSrc&quot;: &quot;/assets/posts/2024-01-15-cicd-testing-coverage-versioning/image-10.png&quot;}" href="#">
      <img class="img-fluid screenshot mw-md-100" src="/assets/posts/2024-01-15-cicd-testing-coverage-versioning/image-10.png" />
    </a>
</figure>

<p>Finally, the different elements are written to the <strong>buildinfo.cpp</strong> file:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># store the results in a source file, so our source code has access to it
</span><span class="n">include_file</span> <span class="o">=</span> <span class="nf">open</span><span class="p">(</span><span class="sh">"</span><span class="s">lib/version/buildinfo.cpp</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">w</span><span class="sh">"</span><span class="p">)</span>
<span class="n">include_file</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="s">// ##########################################################################</span><span class="se">\n</span><span class="sh">"</span><span class="p">)</span>
<span class="n">include_file</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="s">// ### This file is generated by Build and Continuous Integration scripts ###</span><span class="se">\n</span><span class="sh">"</span><span class="p">)</span>
<span class="n">include_file</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="s">// ###   .github/workflows/buildinfo.py for local development environment ###</span><span class="se">\n</span><span class="sh">"</span><span class="p">)</span>
<span class="n">include_file</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="s">// ###   .github/workflows/testbuildrelease.yml for CI environment        ###</span><span class="se">\n</span><span class="sh">"</span><span class="p">)</span>
<span class="n">include_file</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="s">// ### Changes will be overwritten on the next build                      ###</span><span class="se">\n</span><span class="sh">"</span><span class="p">)</span>
<span class="n">include_file</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="s">// ##########################################################################</span><span class="se">\n</span><span class="sh">"</span><span class="p">)</span>
<span class="n">include_file</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="sh">"</span><span class="p">)</span>
<span class="n">include_file</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="s">#include </span><span class="se">\"</span><span class="s">buildinfo.h</span><span class="se">\"\n</span><span class="sh">"</span><span class="p">)</span>
<span class="n">include_file</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="sh">"</span><span class="p">)</span>
<span class="n">include_file</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="s">const buildEnvironment buildInfo::theBuildEnvironment{buildEnvironment::local};</span><span class="se">\n</span><span class="sh">"</span><span class="p">)</span>
<span class="n">include_file</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="s">const buildType buildInfo::theBuildType{buildType::development};</span><span class="se">\n</span><span class="sh">"</span><span class="p">)</span>
<span class="n">include_file</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="s">const int buildInfo::mainVersionDigit   = </span><span class="sh">"</span> <span class="o">+</span> <span class="n">latest_release_main</span> <span class="o">+</span> <span class="sh">"</span><span class="s">;</span><span class="se">\n</span><span class="sh">"</span><span class="p">)</span>
<span class="n">include_file</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="s">const int buildInfo::minorVersionDigit  = </span><span class="sh">"</span> <span class="o">+</span> <span class="n">latest_release_minor</span> <span class="o">+</span> <span class="sh">"</span><span class="s">;</span><span class="se">\n</span><span class="sh">"</span><span class="p">)</span>
<span class="n">include_file</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="s">const int buildInfo::patchVersionDigit  = </span><span class="sh">"</span> <span class="o">+</span> <span class="n">latest_release_patch</span> <span class="o">+</span> <span class="sh">"</span><span class="s">;</span><span class="se">\n</span><span class="sh">"</span><span class="p">)</span>
<span class="n">include_file</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="s">const char* buildInfo::lastCommitTag    = </span><span class="se">\"</span><span class="sh">"</span> <span class="o">+</span> <span class="n">current_commit_hash</span> <span class="o">+</span> <span class="sh">"</span><span class="se">\"</span><span class="s">;</span><span class="se">\n</span><span class="sh">"</span><span class="p">)</span>
<span class="n">include_file</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="s">const char* buildInfo::buildTimeStamp   = </span><span class="se">\"</span><span class="sh">"</span> <span class="o">+</span> <span class="n">build_timestamp</span> <span class="o">+</span> <span class="sh">"</span><span class="se">\"</span><span class="s">;</span><span class="se">\n</span><span class="sh">"</span><span class="p">)</span>
<span class="n">include_file</span><span class="p">.</span><span class="nf">close</span><span class="p">()</span>
</code></pre></div></div>

<div class="alert alert-warning" role="alert">
  <b>Note:</b> I have no experience whatsoever in Python, so feel free to suggest your improvements to this script
</div>

<h2 id="appendix-5-step-by-step-review-of-github-actions-configuration-file">Appendix 5: Step-by-step review of Github Actions configuration file</h2>

<p>The following code makes the workflow run on a Ubuntu runner when there is a push on main and develop branches:</p>

<!--  -->
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">name</span><span class="pi">:</span> <span class="s">Test, Build and Release</span>
<span class="na">on</span><span class="pi">:</span>
  <span class="na">workflow_dispatch</span><span class="pi">:</span>
  <span class="na">push</span><span class="pi">:</span>
    <span class="na">branches</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">main</span><span class="pi">,</span> <span class="nv">develop</span><span class="pi">]</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">versioning</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Determine version, Test, Build and Release</span>
    <span class="na">permissions</span><span class="pi">:</span> <span class="s">write-all</span>

    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">outputs</span><span class="pi">:</span>
      <span class="na">branchname</span><span class="pi">:</span> <span class="s">${{ steps.versioninfo.outputs.branchname }}</span>
      <span class="na">commithash</span><span class="pi">:</span> <span class="s">${{ steps.versioninfo.outputs.commithash }}</span>
      <span class="na">buildtimestamp</span><span class="pi">:</span> <span class="s">${{ steps.versioninfo.outputs.buildtimestamp }}</span>
      <span class="na">lastmajordigit</span><span class="pi">:</span> <span class="s">${{ steps.versioninfo.outputs.lastmajordigit }}</span>
      <span class="na">lastminordigit</span><span class="pi">:</span> <span class="s">${{ steps.versioninfo.outputs.lastminordigit }}</span>
      <span class="na">lastpatchdigit</span><span class="pi">:</span> <span class="s">${{ steps.versioninfo.outputs.lastpatchdigit }}</span>
      <span class="na">lastversion</span><span class="pi">:</span> <span class="s">${{ steps.versioninfo.outputs.lastversion }}</span>
      <span class="na">nextmajordigit</span><span class="pi">:</span> <span class="s">${{ steps.selectversion.outputs.nextmajordigit }}</span>
      <span class="na">nextminordigit</span><span class="pi">:</span> <span class="s">${{ steps.selectversion.outputs.nextminordigit }}</span>
      <span class="na">nextpatchdigit</span><span class="pi">:</span> <span class="s">${{ steps.selectversion.outputs.nextpatchdigit }}</span>
      <span class="na">buildversion</span><span class="pi">:</span> <span class="s">${{ steps.selectversion.outputs.buildversion }}</span>
      <span class="na">buildversionfilename</span><span class="pi">:</span> <span class="s">${{ steps.selectversion.outputs.buildversionfilename }}</span>
</code></pre></div></div>
<!--  -->

<p>The <strong>outputs</strong> section defines some internal workflow variables to collect data in the different steps further down. Notice how the name of the step is used between <strong>steps.</strong> and <strong>.outputs</strong></p>

<p>Next a number of steps are listed, which will be executed sequentially. I’m not 100% sure what caching does, but I think it speeds up data-exchange between the steps. This workflow runs to completion in under a minute, so it’s not bad:</p>

<!--  -->
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">steps</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Enable caching</span>
    <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/cache@v3</span>
    <span class="na">with</span><span class="pi">:</span>
      <span class="na">path</span><span class="pi">:</span> <span class="pi">|</span>
        <span class="s">~/.cache/pip</span>
        <span class="s">~/.platformio/.cache</span>
      <span class="na">key</span><span class="pi">:</span> <span class="s">${{ runner.os }}-pio</span>

  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Checkout Repository</span>
    <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v3</span>
    <span class="na">with</span><span class="pi">:</span>
      <span class="na">fetch-depth</span><span class="pi">:</span> <span class="m">0</span>
</code></pre></div></div>
<!--  -->

<p>Next step runs a series of shell commands to fetch the latest version, latest commit hash and current timestamp from Git. The values are stored in the outputs defined above:</p>

<!--  -->
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Get version data</span>
  <span class="na">id</span><span class="pi">:</span> <span class="s">versioninfo</span>
  <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">echo "extract branch name from github_ref '${{ github.ref }}'"</span>
    <span class="s">declare branchname=$(echo "${{ github.ref }}" | cut -d'/' -f 3-)</span>
    <span class="s">echo "clean branch name = $branchname"</span>
    <span class="s">echo "extract commit short hash : $(git rev-parse --short HEAD)"</span>
    <span class="s">declare commithash=$(git rev-parse --short HEAD)</span>
    <span class="s">echo "extract build timestamp"</span>
    <span class="s">declare buildtimestamp=$(date "+%Y-%b-%d-%H:%M:%S")</span>
    <span class="s">echo "buildtimestamp = $buildtimestamp"</span>
    <span class="s">declare fulltag=$(git describe --tag $(git rev-parse --verify refs/remotes/origin/main))</span>
    <span class="s">echo "fulltag = [$fulltag]"</span>
    <span class="s">declare versiontag=$(echo $fulltag | cut -d'-' -f1)</span>
    <span class="s">echo "extract SemVer numbers from version tag [$versiontag]"</span>
    <span class="s">declare -i lastmajordigit=$(echo $versiontag | cut -c 1- | cut -d'.' -f1)</span>
    <span class="s">echo "lastmajordigit = $lastmajordigit"</span>
    <span class="s">declare -i lastminordigit=$(echo $versiontag | cut -c 1- | cut -d'.' -f2)</span>
    <span class="s">echo "lastminordigit = $lastminordigit"</span>
    <span class="s">declare -i lastpatchdigit=$(echo $versiontag | cut -c 1- | cut -d'.' -f3)</span>
    <span class="s">echo "lastpatchdigit = $lastpatchdigit"</span>
    <span class="s">declare lastversion="v$lastmajordigit.$lastminordigit.$lastpatchdigit"</span>
    <span class="s">echo "output variables to GitHub Actions"</span>
    <span class="s">echo "branchname=$branchname" &gt;&gt; $GITHUB_OUTPUT</span>
    <span class="s">echo "lastmajordigit=$lastmajordigit" &gt;&gt; $GITHUB_OUTPUT</span>
    <span class="s">echo "lastminordigit=$lastminordigit" &gt;&gt; $GITHUB_OUTPUT</span>
    <span class="s">echo "lastpatchdigit=$lastpatchdigit" &gt;&gt; $GITHUB_OUTPUT</span>
    <span class="s">echo "commithash=$commithash" &gt;&gt; $GITHUB_OUTPUT</span>
    <span class="s">echo "buildtimestamp=$buildtimestamp" &gt;&gt; $GITHUB_OUTPUT</span>
    <span class="s">echo "lastversion=$lastversion" &gt;&gt; $GITHUB_OUTPUT</span>
</code></pre></div></div>
<!--  -->

<p>The next step determines what version we are building. If not running on the main branch, it’s simply the uses the latest version plus a commit hash. If we are on main, then we check the merge commit message to determine what next version to generate:</p>

<!--  -->
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Determine which version to build</span>
  <span class="na">id</span><span class="pi">:</span> <span class="s">selectversion</span>
  <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">echo "Triggered from Branch : ${{ steps.versioninfo.outputs.branchname }}"</span>
    <span class="s">echo "Commit hash           : ${{ steps.versioninfo.outputs.commithash }}"</span>
    <span class="s">echo "Last version          : ${{ steps.versioninfo.outputs.lastversion }}"</span>
    <span class="s">echo "  Major               : ${{ steps.versioninfo.outputs.lastmajordigit }}"</span>
    <span class="s">echo "  Minor               : ${{ steps.versioninfo.outputs.lastminordigit }}"</span>
    <span class="s">echo "  Patch               : ${{ steps.versioninfo.outputs.lastpatchdigit }}"</span>
    <span class="s">if [ "${{ steps.versioninfo.outputs.branchname }}" == "main" ]; then</span>
      <span class="s">echo "Triggered from merge on main branch with commit title : ${{ github.event.head_commit.message }}"</span>
      <span class="s">if [[ "${{ github.event.head_commit.message }}" == *"major"* ]]; then</span>
        <span class="s">echo "Incrementing Major versionDigit"</span>
        <span class="s">declare -i nextmajordigit=${{ steps.versioninfo.outputs.lastmajordigit }}+1</span>
        <span class="s">declare -i nextminordigit=0</span>
        <span class="s">declare -i nextpatchdigit=0</span>
        <span class="s">declare buildversion="v$nextmajordigit.$nextminordigit.$nextpatchdigit"</span>
        <span class="s">declare buildversionfilename=$(echo "${buildversion//./_}")</span>

      <span class="s">elif [[ "${{ github.event.head_commit.message }}" == *"minor"* ]]; then</span>
        <span class="s">echo "Incrementing Minor versionDigit"</span>
        <span class="s">declare -i nextmajordigit=${{ steps.versioninfo.outputs.lastmajordigit }}</span>
        <span class="s">declare -i nextminordigit=${{ steps.versioninfo.outputs.lastminordigit }}+1</span>
        <span class="s">declare -i nextpatchdigit=0</span>
        <span class="s">declare buildversion="v$nextmajordigit.$nextminordigit.$nextpatchdigit"</span>
        <span class="s">declare buildversionfilename=$(echo "${buildversion//./_}")</span>
      <span class="s">else</span>
        <span class="s">echo "Incrementing Patch versionDigit"</span>
        <span class="s">declare -i nextmajordigit=${{ steps.versioninfo.outputs.lastmajordigit }}</span>
        <span class="s">declare -i nextminordigit=${{ steps.versioninfo.outputs.lastminordigit }}</span>
        <span class="s">declare -i nextpatchdigit=${{ steps.versioninfo.outputs.lastpatchdigit }}+1</span>
        <span class="s">declare buildversion="v$nextmajordigit.$nextminordigit.$nextpatchdigit"</span>
        <span class="s">declare buildversionfilename=$(echo "${buildversion//./_}")</span>
      <span class="s">fi</span>
    <span class="s">else</span>
      <span class="s">echo "Not on main branch -&gt; development version"</span>
      <span class="s">declare -i nextmajordigit=${{ steps.versioninfo.outputs.lastmajordigit }}</span>
      <span class="s">declare -i nextminordigit=${{ steps.versioninfo.outputs.lastminordigit }}</span>
      <span class="s">declare -i nextpatchdigit=${{ steps.versioninfo.outputs.lastpatchdigit }}</span>
      <span class="s">declare buildversion="v$nextmajordigit.$nextminordigit.$nextpatchdigit-${{ steps.versioninfo.outputs.commithash }}"</span>
      <span class="s">declare buildversionfilename=$(echo "${buildversion//./_}")</span>
    <span class="s">fi</span>
    <span class="s">echo "Building Version : $buildversion"</span>
    <span class="s">echo "  Major          : $nextmajordigit"</span>
    <span class="s">echo "  Minor          : $nextminordigit"</span>
    <span class="s">echo "  Patch          : $nextpatchdigit"</span>
    <span class="s">echo "Filename         : $buildversionfilename"</span>
    <span class="s">echo "output variables to GitHub Actions"</span>
    <span class="s">echo "nextmajordigit=$nextmajordigit" &gt;&gt; $GITHUB_OUTPUT</span>
    <span class="s">echo "nextminordigit=$nextminordigit" &gt;&gt; $GITHUB_OUTPUT</span>
    <span class="s">echo "nextpatchdigit=$nextpatchdigit" &gt;&gt; $GITHUB_OUTPUT</span>
    <span class="s">echo "buildversion=$buildversion" &gt;&gt; $GITHUB_OUTPUT</span>
    <span class="s">echo "buildversionfilename=$buildversionfilename" &gt;&gt; $GITHUB_OUTPUT</span>
</code></pre></div></div>
<!--  -->

<p>Then we write the <strong>buildinfo.cpp</strong> file:</p>

<!--  -->
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Save Build info</span>
  <span class="na">uses</span><span class="pi">:</span> <span class="s2">"</span><span class="s">DamianReeves/write-file-action@master"</span>
  <span class="na">with</span><span class="pi">:</span>
    <span class="na">path</span><span class="pi">:</span> <span class="s">lib/version/buildinfo.cpp</span>
    <span class="na">write-mode</span><span class="pi">:</span> <span class="s">overwrite</span>
    <span class="na">contents</span><span class="pi">:</span> <span class="pi">|</span>
      <span class="s">// ##########################################################################</span>
      <span class="s">// ### This file is generated by Build and Continuous Integration scripts ###</span>
      <span class="s">// ###   .github/workflows/buildinfo.py for local development environment ###</span>
      <span class="s">// ###   .github/workflows/testbuildrelease.yml for CI environment        ###</span>
      <span class="s">// ### Changes will be overwritten on the next build                      ###</span>
      <span class="s">// ##########################################################################</span>
      <span class="s">#include "buildinfo.h"</span>
      <span class="s">const buildEnvironment buildInfo::theBuildEnvironment{buildEnvironment::ci};</span>
      <span class="s">const buildType buildInfo::theBuildType{buildType::production};</span>
      <span class="s">const int buildInfo::mainVersionDigit   = ${{ steps.selectversion.outputs.nextmajordigit }};</span>
      <span class="s">const int buildInfo::minorVersionDigit  = ${{ steps.selectversion.outputs.nextminordigit }};</span>
      <span class="s">const int buildInfo::patchVersionDigit  = ${{ steps.selectversion.outputs.nextpatchdigit }};</span>
      <span class="s">const char* buildInfo::lastCommitTag    = "${{ steps.versioninfo.outputs.commithash }}";</span>
      <span class="s">const char* buildInfo::buildTimeStamp   = "${{ steps.versioninfo.outputs.buildtimestamp }}";</span>
</code></pre></div></div>
<!--  -->

<p>Next steps install PlatformIO, run all unit tests and upload the test results to codecov.io:</p>

<!--  -->
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Install PlatformIO Core</span>
  <span class="na">run</span><span class="pi">:</span> <span class="s">pip install --upgrade platformio</span>

<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Run all generic unit tests</span>
  <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">pio test -e all_generic_unittests</span>

<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Upload coverage reports to Codecov</span>
  <span class="na">uses</span><span class="pi">:</span> <span class="s">codecov/codecov-action@v3</span>
  <span class="na">with</span><span class="pi">:</span>
    <span class="na">gcov</span><span class="pi">:</span> <span class="kc">true</span>
    <span class="na">gcov_include</span><span class="pi">:</span> <span class="s1">'</span><span class="s">.pio/build/all_generic_unittests/*'</span>
  <span class="na">env</span><span class="pi">:</span>
    <span class="na">CODECOV_TOKEN</span><span class="pi">:</span> <span class="s">${{ secrets.CODECOV_TOKEN }}</span>
</code></pre></div></div>

<p>This step then builds the application:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Build</span>
  <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">pio run -e production_application</span>
</code></pre></div></div>
<!--  -->

<p>Finally the resulting binary is attached to the workflow, and when doing a release, also to the release:</p>

<!--  -->
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Attach Binary to Workflow run</span>
  <span class="na">id</span><span class="pi">:</span> <span class="s">attachbinarytoworkflowrun</span>
  <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/upload-artifact@v3</span>
  <span class="na">with</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">${{ steps.selectversion.outputs.buildversionfilename }}.hex</span>
    <span class="na">path</span><span class="pi">:</span> <span class="s">.pio/build/production_application/firmware.hex</span>
    <span class="na">if-no-files-found</span><span class="pi">:</span> <span class="s">error</span>

<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Release when on main branch</span>
  <span class="na">id</span><span class="pi">:</span> <span class="s">createrelease</span>
  <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/create-release@v1</span>
  <span class="na">if</span><span class="pi">:</span> <span class="s">${{ steps.versioninfo.outputs.branchname == 'main'}}</span>
  <span class="na">env</span><span class="pi">:</span>
    <span class="na">GITHUB_TOKEN</span><span class="pi">:</span> <span class="s">${{ secrets.GITHUB_TOKEN }}</span>
  <span class="na">with</span><span class="pi">:</span>
    <span class="na">tag_name</span><span class="pi">:</span> <span class="s">${{ steps.selectversion.outputs.buildversion }}</span>
    <span class="na">release_name</span><span class="pi">:</span> <span class="s">Release ${{ steps.selectversion.outputs.buildversion }}</span>
    <span class="na">draft</span><span class="pi">:</span> <span class="kc">false</span>
    <span class="na">prerelease</span><span class="pi">:</span> <span class="kc">false</span>

<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Attach Binary to Release</span>
  <span class="na">id</span><span class="pi">:</span> <span class="s">attachbinarytorelease</span>
  <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/upload-release-asset@v1</span>
  <span class="na">if</span><span class="pi">:</span> <span class="s">${{ steps.versioninfo.outputs.branchname == 'main'}}</span>
  <span class="na">env</span><span class="pi">:</span>
    <span class="na">GITHUB_TOKEN</span><span class="pi">:</span> <span class="s">${{ secrets.GITHUB_TOKEN }}</span>
  <span class="na">with</span><span class="pi">:</span>
    <span class="na">upload_url</span><span class="pi">:</span> <span class="s">${{ steps.createrelease.outputs.upload_url }}</span>
    <span class="na">asset_path</span><span class="pi">:</span> <span class="s">.pio/build/production_application/firmware.hex</span>
    <span class="na">asset_name</span><span class="pi">:</span> <span class="s">${{ steps.selectversion.outputs.buildversionfilename }}.hex</span>
    <span class="na">asset_content_type</span><span class="pi">:</span> <span class="s">application/octet-stream</span>
</code></pre></div></div>
<!--  -->

<div class="alert alert-warning" role="alert">
  <b>Note:</b> Some binaries have <b>.hex</b>, others have <b>.bin</b> extension. You may need to adjust this script, in case your binary has a different extension. Also the source path where the binary is fetched depends on the envitonment name, so keep those in sync.
</div>

<h2 id="further-improvements">Further Improvements</h2>

<p>Congratulations, you’ve made it to the end of this blog post which was certainly not an easy read. You can further discuss this topic on the <a href="https://community.platformio.org/t/setting-up-platformio-for-ci-cd-with-testing-code-coverage-and-versioning/37871" target="_blank">PlatformIO forum</a>. Suggestions for improvements are also very welcome, simply post an issue on the demo repository.</p>

<p>Thank you.</p>

<h2 class="no_toc" id="stay-in-touch-with-us">Stay in touch with us</h2>

<p>Stay tuned to this blog or follow us on <a href="https://www.linkedin.com/company/platformio" target="_blank">LinkedIn</a> and Twitter <a href="https://twitter.com/PlatformIO_Org" target="_blank">@PlatformIO_Org</a> to keep up to date with the latest news, articles and tips!</p>]]></content><author><name>Pascal Roobrouck</name></author><category term="blog" /><category term="insights" /><summary type="html"><![CDATA[Leveraging PlatformIO for Effortless Continuous Integration and Delivery in Collaborative Environments for Optimized Embedded Software Deployment Workflow]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://piolabs.com/assets/posts/2024-01-15-cicd-testing-coverage-versioning/main.png" /><media:content medium="image" url="https://piolabs.com/assets/posts/2024-01-15-cicd-testing-coverage-versioning/main.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">PlatformIO 2023 Year in Review</title><link href="https://piolabs.com/blog/news/platformio-year-in-review-2023.html" rel="alternate" type="text/html" title="PlatformIO 2023 Year in Review" /><published>2024-01-08T00:00:00+02:00</published><updated>2024-01-08T00:00:00+02:00</updated><id>https://piolabs.com/blog/news/platformio-year-in-review-2023</id><content type="html" xml:base="https://piolabs.com/blog/news/platformio-year-in-review-2023.html"><![CDATA[<p>We’ve been through a lot together, and it’s time to look back and see how PlatformIO Labs kept growing during the most challenging times in its history.</p>

<!-- more -->

<p><img class="figure-img img-fluid rounded" src="/assets/posts/2024-01-08-platformio-year-in-review-2023/platformio_year_in_review_2023.png" alt="PlatformIO 2023 Year in Review" /></p>

<p>As we step into 2024, it’s a mix of happy times and thoughtful moments. We’re excited to share some good news with you, but we also want to take a moment to reflect on what’s going on in the world. As we all know, tragic events are occurring in multiple places on our planet, and Ukraine is one of them. Our R&amp;D team is located in this beautiful country, where people are currently facing tough times due to the ongoing war. Despite all the difficulties, we managed to adapt to the new harsh conditions and adjust our plans when needed. This helped us achieve steady growth even when things outside were uncertain. We also made solid plans to keep everything going smoothly.</p>

<h3>Table of Contents</h3>

<ul id="markdown-toc">
  <li><a href="#major-milestones" id="markdown-toc-major-milestones">Major Milestones</a>    <ul>
      <li><a href="#soaring-to-4-million-unique-installations" id="markdown-toc-soaring-to-4-million-unique-installations">Soaring to 4 Million Unique Installations</a></li>
      <li><a href="#unveiling-a-new-chapter-with-platformio-core-6" id="markdown-toc-unveiling-a-new-chapter-with-platformio-core-6">Unveiling a New Chapter with PlatformIO Core 6</a></li>
      <li><a href="#revolutionizing-embedded-development-with-platformio-ide-30" id="markdown-toc-revolutionizing-embedded-development-with-platformio-ide-30">Revolutionizing Embedded Development with PlatformIO IDE 3.0</a></li>
      <li><a href="#elevating-the-industry-with-platformio-package-registry-improvements" id="markdown-toc-elevating-the-industry-with-platformio-package-registry-improvements">Elevating the Industry with PlatformIO Package Registry Improvements</a></li>
      <li><a href="#welcoming-new-voices-to-our-blog" id="markdown-toc-welcoming-new-voices-to-our-blog">Welcoming New Voices to Our Blog</a></li>
    </ul>
  </li>
  <li><a href="#unveiling-the-future" id="markdown-toc-unveiling-the-future">Unveiling the Future</a></li>
  <li><a href="#words-of-appreciation" id="markdown-toc-words-of-appreciation">Words of Appreciation</a></li>
</ul>

<h2 id="major-milestones">Major Milestones</h2>

<h3 id="soaring-to-4-million-unique-installations">Soaring to 4 Million Unique Installations</h3>

<p>We’re thrilled to share that we are approaching a remarkable milestone of 4 million
unique installations of our <a href="https://marketplace.visualstudio.com/items?itemName=platformio.platformio-ide" target="_blank">PlatformIO IDE for VSCode</a>.</p>

<figure class="figure mb-7">
  <img class="figure-img img-fluid rounded lift lift-lg" src="/assets/posts/2024-01-08-platformio-year-in-review-2023/platformio_yearly_active_users_2014_2023.png" alt="PlatformIO Yearly Active Users (2014-2021)" />
  <figcaption class="figure-caption text-center">
    PlatformIO Active Users (2014-2023)
  </figcaption>
</figure>

<p>This incredible number is a testament to the trust and support of
our growing community. Thank you for choosing PlatformIO and being a part of our journey!</p>

<h3 id="unveiling-a-new-chapter-with-platformio-core-6">Unveiling a New Chapter with PlatformIO Core 6</h3>

<p>We’ve consistently delivered significant new features and numerous enhancements across all our main  products.</p>

<p><img class="figure-img img-fluid rounded" src="/assets/posts/2022-07-14-platformio-core-6-1-released/platformio-core-6-1-released.png" alt="PlatformIO Core 6.1" /></p>

<p>The heart of the entire PlatformIO ecosystem, the PlatformIO Core, has now reached the 6.1 milestone, bringing substantial improvements to performance, a better testing and debugging experience, an updated package management system and many other enhancements. This milestone represents our commitment to continuous improvement and providing you with the best possible instruments for embedded development.</p>

<h3 id="revolutionizing-embedded-development-with-platformio-ide-30">Revolutionizing Embedded Development with PlatformIO IDE 3.0</h3>

<p>Our dedication to enhancing user experiences extends to our <a href="https://marketplace.visualstudio.com/items?itemName=platformio.platformio-ide" target="_blank">PlatformIO IDE for VSCode</a>.</p>

<p><img class="figure-img img-fluid rounded" src="/assets/img/screenshots/desktop/platformio-ide-for-vscode-laptop.png" alt="PlatformIO IDE 3.0" /></p>

<p>Our extension for VSCode not only reflects our responsiveness to the needs of embedded engineers around the globe, but also sets a new standard for efficiency and functionality in embedded development by leveraging our highly-customizable <a href="/technology/modern-ui-toolkit.html">Modern UI Toolkit</a>. The latest updates bring substantially refactored project management workflow, new intelliSense feature for PlatformIO configuration files and many other great UX/UI improvements!</p>

<h3 id="elevating-the-industry-with-platformio-package-registry-improvements">Elevating the Industry with PlatformIO Package Registry Improvements</h3>

<p>We’ve been hard at work refining our <a href="/technology/trusted-package-registry.html">Trusted Package Registry</a> solution and the results have been positive. These improvements have caught the attention of key players in the industry and we’re proud to have created a product that meets the needs of diverse markets. Your trust is driving positive change across the embedded systems market.</p>

<h3 id="welcoming-new-voices-to-our-blog">Welcoming New Voices to Our Blog</h3>

<p>Diversity and collaboration are at the heart of the PlatformIO community, and this year, we’ve expanded the voices contributing to our blog. New authors have shared their expertise, bringing fresh perspectives and insights to our community. We believe that a variety of voices fosters creativity and innovation, making the blog a richer resource for everyone.</p>

<h2 id="unveiling-the-future">Unveiling the Future</h2>

<p>In the year 2024, we are gearing up for some major announcements. Get ready for new and improved versions of our open-source projects! We’ve been hard at work, taking your feedback to heart and crafting features that will enhance your experience. These upcoming releases are not just updates; they provide a glimpse into the future of the PlatformIO ecosystem.</p>

<p>Another one of our primary goals for the year 2024 is to surpass the 5 million installations mark. We’re not merely setting a target; we’re laying the groundwork for a more extensive and vibrant community. Your trust and engagement have fueled our growth, and we are excited to welcome even more users into the PlatformIO ecosystem.</p>

<h2 id="words-of-appreciation">Words of Appreciation</h2>

<p>As we celebrate these achievements, we want to express our deepest gratitude to you — the PlatformIO community.
Your feedback, support, and enthusiasm have fueled our growth and inspired us to reach new heights.
Looking ahead, we’re excited about the opportunities to innovate, collaborate, and continue this
incredible journey together. We are proud of what we’ve done. To everyone who’s been a part of this journey — thank you!
You’ve made PlatformIO what it is today, and we’re excited to see what we can achieve together in the years ahead.</p>

<p><strong>Have a great 2024!</strong></p>

<h2 class="no_toc" id="stay-in-touch-with-us">Stay in touch with us</h2>

<p>Stay tuned to this blog or follow us on <a href="https://www.linkedin.com/company/platformio" target="_blank">LinkedIn</a> and Twitter <a href="https://twitter.com/PlatformIO_Org" target="_blank">@PlatformIO_Org</a> to keep up to date with the latest news, articles and tips!</p>]]></content><author><name>Ivan Kravets</name></author><category term="blog" /><category term="news" /><summary type="html"><![CDATA[Our Journey Through Tough Times: The highlights of the major milestones and achievements of PlatformIO Labs in 2023]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://piolabs.com/assets/posts/2024-01-08-platformio-year-in-review-2023/platformio_year_in_review_2023.png" /><media:content medium="image" url="https://piolabs.com/assets/posts/2024-01-08-platformio-year-in-review-2023/platformio_year_in_review_2023.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">PlatformIO Open Source December Updates</title><link href="https://piolabs.com/blog/news/platformio-oss-december-2023-updates.html" rel="alternate" type="text/html" title="PlatformIO Open Source December Updates" /><published>2024-01-04T00:00:00+02:00</published><updated>2024-01-04T00:00:00+02:00</updated><id>https://piolabs.com/blog/news/platformio-oss-december-2023-updates</id><content type="html" xml:base="https://piolabs.com/blog/news/platformio-oss-december-2023-updates.html"><![CDATA[<p>Welcome to the December 2023 updates of <a href="https://platformio.org/">PlatformIO Open Source</a> professional collaborative platform for embedded development.
As we wrap up the year, December is bringing some cool changes our way. Amid all the holiday buzz, we’ve been busy making updates to give you a better experience. These changes show that we’re always trying to make things awesome for you.</p>

<!-- more -->

<p><img class="figure-img img-fluid rounded" src="/assets/posts/oss-updates/platformio-oss-december-news.jpg" alt="PlatformIO Open Source December Updates" /></p>

<p>During December, we added support for the latest Arduino ESP32 core v2.0.14 and ESP-IDF v5.1.2, rolled out updates for several popular development platforms, fixed a lot of issues. Some of the key highlights include:</p>

<ul id="markdown-toc">
  <li><a href="#esp-idf-v512" id="markdown-toc-esp-idf-v512">ESP-IDF v5.1.2</a></li>
  <li><a href="#espressif32-dev-platform-v65" id="markdown-toc-espressif32-dev-platform-v65">Espressif32 dev-platform v6.5</a></li>
  <li><a href="#st-stm32-dev-platform-v172" id="markdown-toc-st-stm32-dev-platform-v172">ST STM32 dev-platform v17.2</a></li>
  <li><a href="#nordic-nrf52-dev-platform-v103" id="markdown-toc-nordic-nrf52-dev-platform-v103">Nordic nRF52 dev-platform v10.3</a></li>
  <li><a href="#arduino-core-for-mbed-enabled-devices-v4010" id="markdown-toc-arduino-core-for-mbed-enabled-devices-v4010">Arduino Core for mbed-enabled devices v4.0.10</a></li>
</ul>

<h2 id="esp-idf-v512">ESP-IDF v5.1.2</h2>

<p>We’re happy to announce updated support for the latest release of <strong>ESP-IDF v5.1.2</strong> - the official development framework for the ESP32, ESP32-S and ESP32-C Series SoCs. It provides a self-sufficient SDK for any generic application development on these platforms, using programming languages such as C and C++. ESP-IDF currently powers millions of devices in the field, and enables building a variety of network-connected products, ranging from simple light bulbs and toys to big appliances and industrial devices.</p>

<p><strong>Major enhancements in v5.1.2:</strong></p>

<ul>
  <li>Added internal pull-up/downs option for gpio used for deepsleep wakeup for all chip types</li>
  <li>Added new deep sleep APIs that help to skip deep sleep if the wakeup source is set before the sleep request</li>
  <li>Supported PLL track on all targets.</li>
</ul>

<p>More information on project configuration for ESP-IDF can be found <a href="https://docs.platformio.org/en/latest/frameworks/espidf.html#configuration">here</a>.</p>

<p><strong>Related resources for ESP-IDF</strong>:</p>

<ul>
  <li><a href="https://github.com/espressif/esp-idf/releases/tag/v5.1.2">Release notes for v5.1.2</a></li>
  <li><a href="https://docs.platformio.org/en/latest/frameworks/espidf.html">Documentation for ESP-IDF</a></li>
  <li><a href="https://docs.platformio.org/en/latest/frameworks/espidf.html#boards">Supported boards</a></li>
</ul>

<h2 id="espressif32-dev-platform-v65">Espressif32 dev-platform v6.5</h2>

<p>The new release of the <a href="https://registry.platformio.org/platforms/platformio/espressif32">Espressif 32</a> dev-platform brings support for the latest Arduino Core and ESP-IDF, new boards and dev-kits, several fixes and improvements:</p>

<ul>
  <li>Added new boards and dev-kits: <a href="https://docs.platformio.org/en/latest/boards/espressif32/4d_systems_esp32s3_gen4_r8n16.html">4D Systems GEN4-ESP32 16MB</a>, <a href="https://docs.platformio.org/en/latest/boards/espressif32/adafruit_camera_esp32s3.html">Adafruit pyCamera S3</a>, <a href="https://docs.platformio.org/en/latest/boards/espressif32/adafruit_metro_esp32s3.html">Adafruit Metro ESP32-S3</a>, <a href="https://docs.platformio.org/en/latest/boards/espressif32/adafruit_qtpy_esp32s3_n4r2.html">Adafruit QT Py ESP32-S3 (4M Flash 2M PSRAM)</a>, <a href="https://docs.platformio.org/en/latest/boards/espressif32/adafruit_qualia_s3_rgb666.html">Adafruit Qualia ESP32-S3 RGB666</a>, <a href="https://docs.platformio.org/en/latest/boards/espressif32/atd147_s3.html">ArtronShop ATD1.47-S3</a>, <a href="https://docs.platformio.org/en/latest/boards/espressif32/ioxesp32.html">ArtronShop IOXESP32</a>, <a href="https://docs.platformio.org/en/latest/boards/espressif32/ioxesp32ps.html">ArtronShop IOXESP32PS</a>, <a href="https://docs.platformio.org/en/latest/boards/espressif32/aventen_s3_sync.html">Aventen S3 Sync</a>, <a href="https://docs.platformio.org/en/latest/boards/espressif32/esp32-pico-devkitm-2.html">Espressif ESP32-PICO-DevKitM-2</a>, <a href="https://docs.platformio.org/en/latest/boards/espressif32/esp32-s3-devkitm-1.html">Espressif ESP32-S3-DevKitM-1</a>, <a href="https://docs.platformio.org/en/latest/boards/espressif32/esp32s3usbotg.html">Espressif ESP32-S3-USB-OTG</a>, <a href="https://docs.platformio.org/en/latest/boards/espressif32/lionbits3.html">Lion:Bit S3 STEM Dev Board</a>, <a href="https://docs.platformio.org/en/latest/boards/espressif32/lilygo-t-display.html">LilyGo T-Display</a>, <a href="https://docs.platformio.org/en/latest/boards/espressif32/bee_data_logger.html">Smart Bee Data Logger</a>, <a href="https://docs.platformio.org/en/latest/boards/espressif32/namino_arancio.html">Namino Arancio</a>, <a href="https://docs.platformio.org/en/latest/boards/espressif32/namino_rosso.html">Namino Rosso</a>, <a href="https://docs.platformio.org/en/latest/boards/espressif32/um_nanos3.html">Unexpected Maker NanoS3</a></li>
  <li>Added support for Arduino v2.0.14 (<a href="https://github.com/espressif/arduino-esp32/releases/tag/2.0.14">release notes</a>)</li>
  <li>Updated ESP-IDF to v5.1.2 (<a href="https://github.com/espressif/esp-idf/releases/tag/v5.1.2">release notes</a>)</li>
  <li>Added default debug option for ESP32-S2-Kaluga-1 Kit (<a href="https://github.com/platformio/platform-espressif32/pull/1185">#1185</a>, <a href="https://github.com/platformio/platform-espressif32/pull/1130">#1130</a>)</li>
  <li>Added optional MMU page size flag to elf2bin if it’s configurable</li>
  <li>Fixed handling of precompiled static archives located outside IDF project root (<a href="https://github.com/platformio/platform-espressif32/pull/1230">#1230</a>)</li>
  <li>Fixed Lolin S2 USB CDC setup (<a href="https://github.com/platformio/platform-espressif32/pull/1251">#1251</a>)</li>
  <li>Fixed upload workflow for Lolin S3 (<a href="https://github.com/platformio/platform-espressif32/pull/1252">#1252</a>)</li>
  <li>Minor fixes and improvements (<a href="https://github.com/platformio/platform-espressif32/pull/1180">#1180</a>, <a href="https://github.com/platformio/platform-espressif32/pull/1198">#1198</a>)</li>
</ul>

<p><strong>Related resources for the Espressif32 dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/espressif32.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-espressif32/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 id="st-stm32-dev-platform-v172">ST STM32 dev-platform v17.2</h2>

<p>The new release of the <a href="https://registry.platformio.org/platforms/platformio/ststm32">ST STM32</a> v17.2 comes with support for the latest Arduino cores and several minor improvements:</p>

<ul>
  <li>Updated STM32 Arduino Core to the latest v2.7.1 (<a href="https://github.com/stm32duino/Arduino_Core_STM32/releases/tag/2.7.1">release notes</a>)</li>
  <li>Updated Arduino-mbed core to v4.0.10 (<a href="https://github.com/arduino/ArduinoCore-mbed/releases/tag/4.0.10">release notes</a>)</li>
  <li>Minor fixes and improvements</li>
</ul>

<p><strong>Related resources for the ST STM32 dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/ststm32.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-ststm32/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 id="nordic-nrf52-dev-platform-v103">Nordic nRF52 dev-platform v10.3</h2>

<p>The new release of the <a href="https://registry.platformio.org/platforms/platformio/nordicnrf52">Nordic nRF52</a> dev-platform v10.3 brings support for the latest Arduino cores and several minor improvements::</p>

<ul>
  <li>Updated Adafruit Arduino Core to the latest v1.6.0 (<a href="https://github.com/adafruit/Adafruit_nRF52_Arduino/releases/tag/1.6.0">release notes</a>)</li>
  <li>Updated Arduino-mbed core to v4.0.10 (<a href="https://github.com/arduino/ArduinoCore-mbed/releases/tag/4.0.10">release notes</a>)</li>
  <li>Downgraded GCC toolchain to v7 for Arduino-mbed boards (<a href="https://github.com/platformio/platform-nordicnrf52/issues/185">#185</a>)</li>
  <li>Minor fixes and improvements (<a href="https://github.com/platformio/platform-nordicnrf52/issues/187">#187</a>)</li>
</ul>

<p><strong>Related resources for the Nordic nRF52 dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/nordicnrf52.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-nordicnrf52/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 id="arduino-core-for-mbed-enabled-devices-v4010">Arduino Core for mbed-enabled devices v4.0.10</h2>

<p>The <a href="https://registry.platformio.org/platforms/platformio/ststm32">ST STM32</a>, <a href="https://registry.platformio.org/platforms/platformio/nordicnrf52">Nordic nRF52</a> and <a href="https://registry.platformio.org/platforms/platformio/raspberrypi">Raspberry Pi RP2040</a> dev-platforms have been updated to support the latest Arduino Core for mbed-enabled devices v4.0.10. According to the <a href="https://github.com/arduino/ArduinoCore-mbed/releases/tag/4.0.10">release notes</a>, v4.0.10 brings a lot of bugfixes and improvements in the core and accompanying libraries.</p>

<h2 class="no_toc" id="stay-in-touch-with-us">Stay in touch with us</h2>

<p>Stay tuned to this blog or follow us on <a href="https://www.linkedin.com/company/platformio" target="_blank">LinkedIn</a> and Twitter <a href="https://twitter.com/PlatformIO_Org" target="_blank">@PlatformIO_Org</a> to keep up to date with the latest news, articles and tips!</p>]]></content><author><name>Valerii Koval</name></author><category term="blog" /><category term="news" /><summary type="html"><![CDATA[New boards and dev-kits, Support for the latest ESP-IDF, Updates for Espressif32, ST STM32, Nordic nRF52 and Raspberry Pi RP2040 dev-platforms]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://piolabs.com/assets/posts/oss-updates/platformio-oss-december-news.jpg" /><media:content medium="image" url="https://piolabs.com/assets/posts/oss-updates/platformio-oss-december-news.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">PlatformIO Open Source November Updates</title><link href="https://piolabs.com/blog/news/platformio-oss-november-2023-updates.html" rel="alternate" type="text/html" title="PlatformIO Open Source November Updates" /><published>2023-12-04T00:00:00+02:00</published><updated>2023-12-04T00:00:00+02:00</updated><id>https://piolabs.com/blog/news/platformio-oss-november-2023-updates</id><content type="html" xml:base="https://piolabs.com/blog/news/platformio-oss-november-2023-updates.html"><![CDATA[<p>Welcome to the November 2023 updates of <a href="https://platformio.org/">PlatformIO Open Source</a> professional collaborative platform for embedded development.</p>

<p>This month we received a lot of helpful feedback from our community, which let us identify the most important parts of our OSS ecosystem that required our attention, so there are plenty of updates pushed in this month that we hope you will like.</p>

<!-- more -->

<p><img class="figure-img img-fluid rounded" src="/assets/posts/oss-updates/platformio-oss-november-news.jpg" alt="PlatformIO Open Source November Updates" /></p>

<p>During November, we added support for the latest Zephyr framework, rolled out updates for ST STM32, Renesas RA and Microchip AVR development platforms and fixed a lot of issues. Some of the key highlights include:</p>

<ul id="markdown-toc">
  <li><a href="#zephyr-rtos-v35" id="markdown-toc-zephyr-rtos-v35">Zephyr RTOS v3.5</a></li>
  <li><a href="#microchip-avr-dev-platform-v50" id="markdown-toc-microchip-avr-dev-platform-v50">Microchip AVR dev-platform v5.0</a></li>
  <li><a href="#renesas-ra-dev-platform-v13" id="markdown-toc-renesas-ra-dev-platform-v13">Renesas RA dev-platform v1.3</a></li>
  <li><a href="#st-stm32-dev-platform-v171" id="markdown-toc-st-stm32-dev-platform-v171">ST STM32 dev-platform v17.1</a></li>
</ul>

<h2 id="zephyr-rtos-v35">Zephyr RTOS v3.5</h2>

<p>We’re happy to announce updated support for the latest release v3.5.0 of <a href="https://www.zephyrproject.org/" target="_blank">Zephyr Project</a> - a scalable real-time operating system (RTOS) supporting multiple hardware architectures, optimized for resource-constrained devices, and built with safety and security in mind.</p>

<p>Major enhancements in v3.5.0:</p>

<ul>
  <li>Picolibc is now the default C standard library</li>
  <li>Added new modem subsystem</li>
  <li>Added support for linkable loadable extensions (llext)</li>
  <li>Added new hardware spinlock driver API</li>
</ul>

<p><strong>Related resources for Zephyr framework</strong>:</p>

<ul>
  <li><a href="https://github.com/zephyrproject-rtos/zephyr/releases/tag/v3.5.0">Release notes for v3.5.0</a></li>
  <li><a href="https://docs.platformio.org/en/latest/frameworks/zephyr.html">Documentation for Zephyr framework</a></li>
  <li><a href="https://docs.platformio.org/en/latest/frameworks/zephyr.html#platforms">Supported development platforms</a></li>
  <li><a href="https://docs.platformio.org/en/latest/frameworks/zephyr.html#boards">Supported boards</a></li>
</ul>

<h2 id="microchip-avr-dev-platform-v50">Microchip AVR dev-platform v5.0</h2>

<p>The latest release of the <a href="https://registry.platformio.org/platforms/platformio/atmelavr">Microchip AVR</a> v5.0 comes with updates for highly customizable Arduino cores by MCUdude, improved support for the <code class="language-plaintext highlighter-rouge">Urboot</code> bootloader and several minor improvements:</p>

<ul>
  <li>New board <a href="https://docs.platformio.org/en/latest/boards/atmelavr/uno_mini.html">Arduino Uno Mini</a></li>
  <li>Updated Arduino AVR core to v1.8.6 (<a href="https://github.com/platformio/platform-atmelavr/pull/314">#314</a>)</li>
  <li>Updated MCUdude’s cores (<a href="https://github.com/platformio/platform-atmelavr/pull/320">#320</a>):
    <ul>
      <li>MajorCore <code class="language-plaintext highlighter-rouge">v3.0.0</code> (<a href="https://github.com/MCUdude/MajorCore/releases/tag/v3.0.0">release notes</a>)</li>
      <li>MegaCore <code class="language-plaintext highlighter-rouge">v3.0.0</code> (<a href="https://github.com/MCUdude/MegaCore/releases/tag/v3.0.0">release notes</a>)</li>
      <li>MightyCore <code class="language-plaintext highlighter-rouge">v3.0.0</code> (<a href="https://github.com/MCUdude/MightyCore/releases/tag/v3.0.0">release notes</a>)</li>
      <li>MiniCore <code class="language-plaintext highlighter-rouge">v3.0.0</code> (<a href="https://github.com/MCUdude/MiniCore/releases/tag/v3.0.0">release notes</a>)</li>
    </ul>
  </li>
  <li>MCUdude cores switched to AVRDUDE v7.2</li>
  <li>Added initial support for the <code class="language-plaintext highlighter-rouge">Urboot</code> bootloader for MigntyCore, MiniCore, MegaCore, or MajorCore (<a href="https://github.com/platformio/platform-atmelavr/pull/321">#321</a>)</li>
  <li>Fixed an issue with excessive quotes when path to AVRDUDE contains a whitespace character (<a href="https://github.com/platformio/platform-atmelavr/pull/297">#297</a>)</li>
</ul>

<p>See <a href="https://github.com/platformio/platform-atmelavr/releases/tag/v5.0.0">Release Notes</a> for more detailed information.</p>

<p><strong>Related resources for the Microchip AVR dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/atmelavr.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-atmelavr/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 id="renesas-ra-dev-platform-v13">Renesas RA dev-platform v1.3</h2>

<p>The new release of the <a href="https://registry.platformio.org/platforms/platformio/renesas-ra">Renesas RA</a> dev-platform v1.3.0 brings support for the latest Arduino core and several bugfixes:</p>

<ul>
  <li>Updated Arduino core to v1.0.5 (<a href="https://github.com/arduino/ArduinoCore-renesas/releases/tag/1.0.5">release notes</a>)</li>
  <li>Downgraded GCC to v7 to avoid compatibility isues (<a href="https://github.com/platformio/platform-renesas-ra/issues/18">#18</a>)</li>
  <li>Minor fixes and improvements</li>
</ul>

<p><strong>Related resources for the Renesas RA dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/renesas-ra.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-renesas-ra/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 id="st-stm32-dev-platform-v171">ST STM32 dev-platform v17.1</h2>

<p>The new release of the <a href="https://registry.platformio.org/platforms/platformio/ststm32">ST STM32</a> v17.1 comes with support for the latest Zephyr and several minor improvements:</p>

<ul>
  <li>Updated Zephyr to the latest v3.5.0 (<a href="https://github.com/zephyrproject-rtos/zephyr/releases/tag/v3.5.0">release notes</a>)</li>
  <li>Added Mbed support for <code class="language-plaintext highlighter-rouge">nucelo_h723zg</code> (<a href="https://github.com/platformio/platform-ststm32/issues/740">#740</a>)</li>
  <li>Added missing macro for LoRa E5 Dev Board (<a href="https://github.com/platformio/platform-ststm32/issues/738">#738</a>)</li>
  <li>Minor fixes and improvements</li>
</ul>

<p>See <a href="https://github.com/platformio/platform-ststm32/releases/tag/v17.1.0">Release Notes</a> for more detailed information.</p>

<p><strong>Related resources for the ST STM32 dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/ststm32.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-ststm32/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 class="no_toc" id="stay-in-touch-with-us">Stay in touch with us</h2>

<p>Stay tuned to this blog or follow us on <a href="https://www.linkedin.com/company/platformio" target="_blank">LinkedIn</a> and Twitter <a href="https://twitter.com/PlatformIO_Org" target="_blank">@PlatformIO_Org</a> to keep up to date with the latest news, articles and tips!</p>]]></content><author><name>Valerii Koval</name></author><category term="blog" /><category term="news" /><summary type="html"><![CDATA[New boards and devkits, Support for the latest Zephyr RTOS 3.5, Updates for ST STM32, Renesas RA and Microchip AVR dev-platforms]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://piolabs.com/assets/posts/oss-updates/platformio-oss-november-news.jpg" /><media:content medium="image" url="https://piolabs.com/assets/posts/oss-updates/platformio-oss-november-news.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">PlatformIO Open Source September Updates</title><link href="https://piolabs.com/blog/news/platformio-oss-september-2023-updates.html" rel="alternate" type="text/html" title="PlatformIO Open Source September Updates" /><published>2023-10-02T00:00:00+03:00</published><updated>2023-10-02T00:00:00+03:00</updated><id>https://piolabs.com/blog/news/platformio-oss-september-2023-updates</id><content type="html" xml:base="https://piolabs.com/blog/news/platformio-oss-september-2023-updates.html"><![CDATA[<p>Welcome to the September 2023 updates of <a href="https://platformio.org/">PlatformIO Open Source</a> professional collaborative platform for embedded development.</p>

<p>This month we received a lot of helpful feedback from our community, which let us identify the most important parts of our OSS ecosystem that required our attention, so there are plenty of updates pushed in this month that we hope you will like.</p>

<!-- more -->

<p><img class="figure-img img-fluid rounded" src="/assets/posts/oss-updates/platformio-oss-september-news.jpg" alt="PlatformIO Open Source September Updates" /></p>

<p>During September, we added support for the latest Zephyr framework and rolled out updates for ST STM32, Renesas RA, Nordic nRF52 and Raspberry Pico development platforms, fixed a lot of issues. Some of the key highlights include:</p>

<ul id="markdown-toc">
  <li><a href="#zephyr-rtos-v34" id="markdown-toc-zephyr-rtos-v34">Zephyr RTOS v3.4</a></li>
  <li><a href="#st-stm32-dev-platform-v170" id="markdown-toc-st-stm32-dev-platform-v170">ST STM32 dev-platform v17.0</a></li>
  <li><a href="#renesas-ra-dev-platform-v12" id="markdown-toc-renesas-ra-dev-platform-v12">Renesas RA dev-platform v1.2</a></li>
  <li><a href="#arduino-core-for-mbed-enabled-devices-v406" id="markdown-toc-arduino-core-for-mbed-enabled-devices-v406">Arduino Core for mbed-enabled devices v4.0.6</a></li>
</ul>

<h2 id="zephyr-rtos-v34">Zephyr RTOS v3.4</h2>

<p>We’re happy to announce updated support for the latest release v3.4.0 of <a href="https://www.zephyrproject.org/" target="_blank">Zephyr Project</a> - a scalable real-time operating system (RTOS) supporting multiple hardware architectures, optimized for resource-constrained devices, and built with safety and security in mind.</p>

<p>The renewed integration brings enhanced compatibility and faster performance, but currently focuses only on two platforms – <a href="https://docs.platformio.org/en/latest/platforms/ststm32.html">ST STM32</a> and <a href="https://docs.platformio.org/en/latest/platforms/nxpimxrt.html">NXP iMXRT</a>. Stay tuned as we’re actively exploring opportunities to expand to more platforms in the future.</p>

<p><strong>Related resources for Zephyr framework</strong>:</p>

<ul>
  <li><a href="https://github.com/zephyrproject-rtos/zephyr/releases/tag/v3.4.0">Release notes for v3.4.0</a></li>
  <li><a href="https://docs.platformio.org/en/latest/frameworks/zephyr.html">Documentation for Zephyr framework</a></li>
  <li><a href="https://docs.platformio.org/en/latest/frameworks/zephyr.html#platforms">Supported development platforms</a></li>
  <li><a href="https://docs.platformio.org/en/latest/frameworks/zephyr.html#boards">Supported boards</a></li>
</ul>

<h2 id="st-stm32-dev-platform-v170">ST STM32 dev-platform v17.0</h2>

<p>The new release of the <a href="https://registry.platformio.org/platforms/platformio/ststm32">ST STM32</a> v17.0 comes with support for the latest Zephyr and Arduino cores, updated toolchain packages and several minor improvements:</p>

<ul>
  <li>New boards:
    <ul>
      <li><a href="https://docs.platformio.org/en/latest/boards/ststm32/leafony_ap03.html">Leafony AP03</a></li>
      <li><a href="https://docs.platformio.org/en/latest/boards/ststm32/lora_e5_dev_board.html">SeeedStudio LoRa E5 Dev Board</a></li>
      <li><a href="https://docs.platformio.org/en/latest/boards/ststm32/lora_e5_mini.html">SeeedStudio LoRa-E5 mini</a></li>
      <li><a href="https://docs.platformio.org/en/latest/boards/ststm32/sparkfun_micromod_f405.html">SparkFun MicroMod STM32F405</a></li>
      <li><a href="https://docs.platformio.org/en/latest/boards/ststm32/genericSTM32H750VB.html">STM32H750VB</a></li>
      <li><a href="https://docs.platformio.org/en/latest/boards/ststm32/genericSTM32G431CB.html">STM32G431CB</a></li>
    </ul>
  </li>
  <li>Updated Zephyr to the latest v3.4.0 (<a href="https://github.com/zephyrproject-rtos/zephyr/releases/tag/v3.4.0">release notes</a>)</li>
  <li>Updated STM32 Arduino Core to the latest v2.6.0 (<a href="https://github.com/stm32duino/Arduino_Core_STM32/releases/tag/2.6.0">release notes</a>)</li>
  <li>Updated Arduino-mbed core to v4.0.6 (<a href="https://github.com/arduino/ArduinoCore-mbed/releases/tag/4.0.6">release notes</a>)</li>
  <li>Updated toolchain packages to v12.3.1 for Arduino integration (<a href="https://github.com/platformio/platform-ststm32/issues/720">#720</a>)</li>
  <li>Fixed flash memory size for <code class="language-plaintext highlighter-rouge">nucleo_g0b1re</code> (<a href="https://github.com/platformio/platform-ststm32/issues/723">#723</a>)</li>
  <li>Minor fixes and improvements (<a href="https://github.com/platformio/platform-ststm32/issues/695">#695</a>, <a href="https://github.com/platformio/platform-ststm32/issues/715">#715</a>, <a href="https://github.com/platformio/platform-ststm32/issues/722">#722</a>, <a href="https://github.com/platformio/platform-ststm32/issues/728">#728</a>)</li>
</ul>

<p><strong>Related resources for the ST STM32 dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/ststm32.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-ststm32/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 id="renesas-ra-dev-platform-v12">Renesas RA dev-platform v1.2</h2>

<p>The new release of the <a href="https://registry.platformio.org/platforms/platformio/renesas-ra">Renesas RA</a> dev-platform v1.2.0 brings support for the latest Arduino core and several bugfixes:</p>

<ul>
  <li>Updated Arduino core to v1.0.4 (<a href="https://github.com/arduino/ArduinoCore-renesas/releases/tag/1.0.4">release notes</a>)</li>
  <li>Added missing ARCH macro for Uno boards (<a href="https://github.com/platformio/platform-renesas-ra/issues/11">#11</a>)</li>
  <li>Fixed broken linker flag for FPU (<a href="https://github.com/platformio/platform-renesas-ra/issues/13">#13</a>)</li>
  <li>Fixed J-Link device name for Portenta C33 (<a href="https://github.com/platformio/platform-renesas-ra/issues/14">#14</a>)</li>
</ul>

<p><strong>Related resources for the Renesas RA dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/renesas-ra.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-renesas-ra/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 id="arduino-core-for-mbed-enabled-devices-v406">Arduino Core for mbed-enabled devices v4.0.6</h2>

<p>The <a href="https://registry.platformio.org/platforms/platformio/ststm32">ST STM32</a>, <a href="https://registry.platformio.org/platforms/platformio/nordicnrf52">Nordic nRF52</a> and <a href="https://registry.platformio.org/platforms/platformio/raspberrypi">Raspberry Pi RP2040</a> dev-platforms have been updated to support the latest Arduino Core for mbed-enabled devices v4.0.6. According to the <a href="https://github.com/arduino/ArduinoCore-mbed/releases/tag/4.0.6">release notes</a>, v4.0.6 brings a lot of bugfixes and improvements in the core and accompanying libraries.</p>

<h2 class="no_toc" id="stay-in-touch-with-us">Stay in touch with us</h2>

<p>Stay tuned to this blog or follow us on <a href="https://www.linkedin.com/company/platformio" target="_blank">LinkedIn</a> and Twitter <a href="https://twitter.com/PlatformIO_Org" target="_blank">@PlatformIO_Org</a> to keep up to date with the latest news, articles and tips!</p>]]></content><author><name>Valerii Koval</name></author><category term="blog" /><category term="news" /><summary type="html"><![CDATA[New boards and devkits, Support for the latest Zephyr RTOS 3.4, Updates for ST STM32, Renesas RA and mbed-enabled dev-platforms]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://piolabs.com/assets/posts/oss-updates/platformio-oss-september-news.jpg" /><media:content medium="image" url="https://piolabs.com/assets/posts/oss-updates/platformio-oss-september-news.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">PlatformIO Open Source August Updates</title><link href="https://piolabs.com/blog/news/platformio-oss-august-2023-updates.html" rel="alternate" type="text/html" title="PlatformIO Open Source August Updates" /><published>2023-09-04T00:00:00+03:00</published><updated>2023-09-04T00:00:00+03:00</updated><id>https://piolabs.com/blog/news/platformio-oss-august-2023-updates</id><content type="html" xml:base="https://piolabs.com/blog/news/platformio-oss-august-2023-updates.html"><![CDATA[<p>Welcome to the August 2023 updates of <a href="https://platformio.org/">PlatformIO Open Source</a> professional collaborative platform for embedded development.
This month we received a lot of helpful feedback from our community, which let us identify the most important parts of our OSS ecosystem that required our attention, so there are plenty of updates pushed in this month that we hope you will like.</p>

<!-- more -->

<p><img class="figure-img img-fluid rounded" src="/assets/posts/oss-updates/platformio-oss-august-news.jpg" alt="PlatformIO Open Source August Updates" /></p>

<p>During August, we rolled out a bugfix release for PlatformIO Core, added support for the latest Arduino ESP32 core v2.0.11 and ESP-IDF v5.1.1, fixed a lot of issues. Some of the key highlights include:</p>

<ul id="markdown-toc">
  <li><a href="#platformio-core-6111" id="markdown-toc-platformio-core-6111">PlatformIO Core 6.1.11</a></li>
  <li><a href="#esp-idf-v51" id="markdown-toc-esp-idf-v51">ESP-IDF v5.1</a></li>
  <li><a href="#espressif32-dev-platform-v64" id="markdown-toc-espressif32-dev-platform-v64">Espressif32 dev-platform v6.4</a></li>
  <li><a href="#renesas-ra-dev-platform-v11" id="markdown-toc-renesas-ra-dev-platform-v11">Renesas RA dev-platform v1.1</a></li>
  <li><a href="#heltec-cubecell-dev-platform-v11" id="markdown-toc-heltec-cubecell-dev-platform-v11">Heltec Cubecell dev-platform v1.1</a></li>
</ul>

<h2 id="platformio-core-6111">PlatformIO Core 6.1.11</h2>

<p><a href="https://docs.platformio.org/en/latest/core/index.html">PlatformIO Core</a> is the heart of the whole PlatformIO ecosystem and we are excited to announce the next release with lots of great improvements and bugfixes:</p>

<ul>
  <li>Resolved an issue that caused generated projects for <a href="https://docs.platformio.org/en/latest/integration/ide/vscode.html">PlatformIO IDE for VSCode</a> to break when the <code class="language-plaintext highlighter-rouge">-iprefix</code> compiler flag was used</li>
  <li>Resolved an issue encountered while utilizing the <a href="https://docs.platformio.org/en/latest/core/userguide/pkg/cmd_exec.html">pio pkg exec</a> command on the Windows platform to execute Python scripts from a package</li>
  <li>Implemented a crucial improvement to the <a href="https://docs.platformio.org/en/latest/core/userguide/cmd_run.html">pio run</a> command, guaranteeing that the <code class="language-plaintext highlighter-rouge">monitor</code> target is not executed if any of the preceding targets, such as <code class="language-plaintext highlighter-rouge">upload</code>, encounter failures</li>
  <li><a href="https://docs.platformio.org/en/latest/plus/check-tools/cppcheck.html">Cppcheck</a> v2.11 with new checks, CLI commands and various analysis improvements</li>
  <li>Resolved a critical issue that arose on macOS ARM platforms due to the Python “requests” module, leading to a “ModuleNotFoundError: No module named ‘chardet’” (<a href="https://github.com/platformio/platformio-core/issues/4702">issue #4702</a>)</li>
  <li>Resolved a possible issue that may cause generated projects for <a href="https://docs.platformio.org/en/latest/integration/ide/vscode.html">PlatformIO IDE for VSCode</a> to fail to launch a debug session because of a missing “objdump” binary when GDB is not part of the toolchain package</li>
  <li>Resolved a regression issue that resulted in the malfunction of the Memory Inspection feature within <a href="https://docs.platformio.org/en/latest/home/index.html">PIO Home</a></li>
</ul>

<p>See <a href="https://github.com/platformio/platformio-core/releases/tag/v6.1.10">Release Notes</a> for more detailed information and use <a href="https://docs.platformio.org/en/latest/core/userguide/cmd_upgrade.html">pio upgrade</a> command to update to the latest version.</p>

<h2 id="esp-idf-v51">ESP-IDF v5.1</h2>

<p>We’re happy to announce updated support for the latest release of <strong>ESP-IDF v5.1.1</strong> - the official development framework for the ESP32, ESP32-S and ESP32-C Series SoCs. It provides a self-sufficient SDK for any generic application development on these platforms, using programming languages such as C and C++. ESP-IDF currently powers millions of devices in the field, and enables building a variety of network-connected products, ranging from simple light bulbs and toys to big appliances and industrial devices.</p>

<p><strong>Major enhancements in v5.1:</strong></p>

<ul>
  <li>Added Zigbee support for ESP32-C6</li>
  <li>Added support for ESP32-H2 MP chip</li>
</ul>

<p>More information on project configuration for ESP-IDF can be found <a href="https://docs.platformio.org/en/latest/frameworks/espidf.html#configuration">here</a>.</p>

<p><strong>Related resources for ESP-IDF</strong>:</p>

<ul>
  <li><a href="https://github.com/espressif/esp-idf/releases/tag/v5.1">Release notes for v5.1</a></li>
  <li><a href="https://github.com/espressif/esp-idf/releases/tag/v5.1.1">Release notes for v5.1.1</a></li>
  <li><a href="https://docs.platformio.org/en/latest/frameworks/espidf.html">Documentation for ESP-IDF</a></li>
  <li><a href="https://docs.platformio.org/en/latest/frameworks/espidf.html#boards">Supported boards</a></li>
</ul>

<h2 id="espressif32-dev-platform-v64">Espressif32 dev-platform v6.4</h2>

<p>The new release of the <a href="https://registry.platformio.org/platforms/platformio/espressif32">Espressif 32</a> dev-platform brings support for the latest Arduino Core and ESP-IDF, new boards and dev-kits, several minor fixes and improvements:</p>

<ul>
  <li>Added new boards and dev-kits:
    <ul>
      <li><a href="https://docs.platformio.org/en/latest/boards/espressif32/m5stack-adafruit_matrixportal_esp32s3.html">Adafruit MatrixPortal ESP32-S3</a></li>
      <li><a href="https://docs.platformio.org/en/latest/boards/espressif32/arduino_nano_esp32.html">Arduino Nano ESP32</a></li>
      <li><a href="https://docs.platformio.org/en/latest/boards/espressif32/esp32-c6-devkitm-1.html">Espressif ESP32-C6-DevKitM-1</a></li>
      <li><a href="https://docs.platformio.org/en/latest/boards/espressif32/dfrobot_romeo_esp32s3.html">DFRobot Romeo ESP32-S3</a></li>
      <li><a href="https://docs.platformio.org/en/latest/boards/espressif32/nebulas3.html">Kinetic Dynamics Nebula S3</a></li>
      <li><a href="https://docs.platformio.org/en/latest/boards/espressif32/m5stamp-pico.html">M5Stamp-Pico</a></li>
      <li><a href="https://docs.platformio.org/en/latest/boards/espressif32/m5stack-cores3.html">M5Stack-CoreS3</a></li>
    </ul>
  </li>
  <li>Added support for Arduino v2.0.11 (<a href="https://github.com/espressif/arduino-esp32/releases/tag/2.0.11">release notes</a>)</li>
  <li>Updated ESP-IDF to v5.1.1 (<a href="https://github.com/espressif/esp-idf/releases/tag/v5.1.1">release notes</a>)</li>
  <li>Initial support for ESP32-C6 (<a href="https://github.com/platformio/platform-espressif32/pull/1054">#1054</a>)</li>
  <li>Improved dynamic memory size calculation process (<a href="https://github.com/platformio/platform-espressif32/pull/1159">#1159</a>, <a href="https://github.com/platformio/platform-espressif32/issues/1178">#1178</a>)</li>
  <li>Support for custom application partition names (<a href="https://github.com/platformio/platform-espressif32/pull/1166">#1166</a>)</li>
  <li>Fixed OpenOCD configuration for Lolin S2 boards (<a href="https://github.com/platformio/platform-espressif32/pull/1139">#1139</a>)</li>
  <li>Minor fixes and improvements (<a href="https://github.com/platformio/platform-espressif32/pull/1146">#1146</a>, <a href="https://github.com/platformio/platform-espressif32/pull/1175">#1175</a>, <a href="https://github.com/platformio/platform-espressif32/pull/1176">#1176</a>)</li>
</ul>

<p>See <a href="https://github.com/platformio/platform-espressif32/releases/tag/v6.4.0">Release Notes</a> for more detailed information.</p>

<p><strong>Related resources for the Espressif32 dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/espressif32.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-espressif32/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 id="renesas-ra-dev-platform-v11">Renesas RA dev-platform v1.1</h2>

<p>The new release of the <a href="https://registry.platformio.org/platforms/platformio/renesas-ra">Renesas RA</a> dev-platform v1.9.0 brings support for the latest Arduino core:</p>

<ul>
  <li>Updated Arduino core to v1.0.2 (<a href="https://github.com/arduino/ArduinoCore-renesas/releases/tag/1.0.2">release notes</a>)</li>
  <li>Fixed broken uploader package selection (<a href="https://github.com/platformio/platform-renesas-ra/issues/9">#9</a>)</li>
</ul>

<p><strong>Related resources for the Renesas RA dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/renesas-ra.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-renesas-ra/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 id="heltec-cubecell-dev-platform-v11">Heltec Cubecell dev-platform v1.1</h2>

<p>The new release of the <a href="https://registry.platformio.org/platforms/heltecautomation/heltec-cubecell">Heltec CubeCell</a> dev-platform comes with support for the latest Arduino core and several minor fixes:</p>

<ul>
  <li>Added support for CubeCell core v1.6.0 (<a href="https://github.com/HelTecAutomation/CubeCell-Arduino/releases/tag/V1.6.0">release notes</a>)</li>
  <li>Minor fixes and improvements</li>
</ul>

<p><strong>Related resources for the Heltec CubeCell dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/heltec-cubecell.html">Documentation</a></li>
  <li><a href="https://github.com/HelTecAutomation/platform-heltec-cubecell/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 class="no_toc" id="stay-in-touch-with-us">Stay in touch with us</h2>

<p>Stay tuned to this blog or follow us on <a href="https://www.linkedin.com/company/platformio" target="_blank">LinkedIn</a> and Twitter <a href="https://twitter.com/PlatformIO_Org" target="_blank">@PlatformIO_Org</a> to keep up to date with the latest news, articles and tips!</p>]]></content><author><name>Valerii Koval</name></author><category term="blog" /><category term="news" /><summary type="html"><![CDATA[PlatformIO Core bugfix release, New boards and dev-kits, Support for the latest ESP-IDF v5.1, Updates for Espressif32, Renesas RA and Heltec CubeCell dev-platforms]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://piolabs.com/assets/posts/oss-updates/platformio-oss-august-news.jpg" /><media:content medium="image" url="https://piolabs.com/assets/posts/oss-updates/platformio-oss-august-news.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">PlatformIO Open Source July Updates</title><link href="https://piolabs.com/blog/news/platformio-oss-july-2023-updates.html" rel="alternate" type="text/html" title="PlatformIO Open Source July Updates" /><published>2023-08-07T00:00:00+03:00</published><updated>2023-08-07T00:00:00+03:00</updated><id>https://piolabs.com/blog/news/platformio-oss-july-2023-updates</id><content type="html" xml:base="https://piolabs.com/blog/news/platformio-oss-july-2023-updates.html"><![CDATA[<p>Welcome to the July 2023 updates of <a href="https://platformio.org/">PlatformIO Open Source</a> professional collaborative platform for embedded development.</p>

<p>This month we received a lot of helpful feedback from our community, which let us identify the most important parts of our OSS ecosystem that required our attention, so there are plenty of updates pushed in this month that we hope you will like.</p>

<!-- more -->

<p><img class="figure-img img-fluid rounded" src="/assets/posts/oss-updates/platformio-oss-july-news.jpg" alt="PlatformIO Open Source July Updates" /></p>

<p>During July, we have released a new dev-platform for Renesas RA MCUs, rolled out an updated version of PlatformIO IDE for Visual Studio Code, published a bugfix release for PlatformIO Core, added support for the latest Arm Mbed OS v6.17, resolved a lot of issues. Some of the key highlights include:</p>

<ul id="markdown-toc">
  <li><a href="#platformio-ide-33-for-visual-studio-code" id="markdown-toc-platformio-ide-33-for-visual-studio-code">PlatformIO IDE 3.3 for Visual Studio Code</a></li>
  <li><a href="#platformio-core-619" id="markdown-toc-platformio-core-619">PlatformIO Core 6.1.9</a></li>
  <li><a href="#new-renesas-ra-dev-platform" id="markdown-toc-new-renesas-ra-dev-platform">New Renesas RA dev-platform</a></li>
  <li><a href="#arm-mbed-os-v617" id="markdown-toc-arm-mbed-os-v617">Arm Mbed OS v6.17</a></li>
</ul>

<h2 id="platformio-ide-33-for-visual-studio-code">PlatformIO IDE 3.3 for Visual Studio Code</h2>

<p>We are pleased to announce a new stable release of PlatformIO IDE 3.3 for <a href="https://docs.platformio.org/en/latest/integration/ide/vscode.html">Visual Studio Code</a> with great improvements to the task management functionality:</p>

<p><img class="figure-img img-fluid rounded" src="https://raw.githubusercontent.com/platformio/platformio-vscode-ide/develop/.github/media/platformio-toggle-multienv-tasks.gif" alt="PlatformIO Open Source July Updates" /></p>

<ul>
  <li>Enhanced the user experience in the “Project Tasks” explorer by displaying tasks specific to the selected environment by default</li>
  <li>Introduced a new option that allows seamless switching between multi-environment project tasks</li>
  <li>Expanded the functionality of the “Activity Bar &gt; PlatformIO IDE &gt; Quick Access” menu by including a new item called <a href="https://marketplace.visualstudio.com/items?itemName=alexnesnes.teleplot">Serial &amp; UDP Plotter</a></li>
  <li>Updated the PlatformIO Core Installer Script to version <a href="https://github.com/platformio/platformio-core-installer/releases/tag/v1.2.0">1.2.0</a></li>
</ul>

<p>See <a href="https://github.com/platformio/platformio-vscode-ide/releases/tag/v3.3.0">Release Notes</a> for more detailed information.</p>

<h2 id="platformio-core-619">PlatformIO Core 6.1.9</h2>

<p><a href="https://docs.platformio.org/en/latest/core/index.html">PlatformIO Core</a> is the heart of the whole PlatformIO ecosystem and we are excited to announce the next v6.1.9 release with lots of great improvements and bugfixes:</p>

<ul>
  <li>Added a new <code class="language-plaintext highlighter-rouge">--lint</code> option to the <a href="https://docs.platformio.org/en/latest/core/userguide/project/cmd_config.html">pio project config</a> command, enabling users to efficiently perform linting on the <a href="https://docs.platformio.org/en/latest/projectconf.html">“platformio.ini”</a> configuration file</li>
  <li>Enhanced the parsing of the <a href="https://docs.platformio.org/en/latest/projectconf.html">“platformio.ini”</a> configuration file to provide comprehensive diagnostic information</li>
  <li>Expanded the functionality of the <a href="https://docs.platformio.org/en/latest/manifests/library-json/index.html">library.json</a> manifest by allowing the use of the underscore symbol in the <a href="https://docs.platformio.org/en/latest/manifests/library-json/fields/keywords.html">keywords</a> field</li>
  <li>Optimized project integration templates to address the issue of long paths on Windows (<a href="https://github.com/platformio/platformio-core/issues/4652">issue #4652</a>)</li>
  <li>Refactored <a href="https://docs.platformio.org/en/latest/advanced/unit-testing/index.html">Unit Testing</a> engine to resolve compiler warnings with “-Wpedantic” option (<a href="https://github.com/platformio/platformio-core/pull/4671">pull #4671</a>)</li>
  <li>Eliminated erroneous warning regarding the use of obsolete PlatformIO Core when downgrading to the stable version (<a href="https://github.com/platformio/platformio-core/issues/4664">issue #4664</a>)</li>
  <li>Updated the <a href="https://docs.platformio.org/en/latest/core/userguide/project/cmd_metadata.html">pio project metadata</a> command to return C/C++ flags as parsed Unix shell arguments when dumping project build metadata</li>
  <li>Resolved a critical issue related to the usage of the <code class="language-plaintext highlighter-rouge">-include</code> flag within the <a href="https://docs.platformio.org/en/latest/projectconf/sections/env/options/build/build_flags.html">build_flags</a> option, specifically when employing dynamic variables (<a href="https://github.com/platformio/platformio-core/issues/4682">issue #4682</a>)</li>
  <li>Removed PlatformIO IDE for Atom from the documentation as <a href="https://github.blog/2022-06-08-sunsetting-atom/">Atom has been deprecated</a></li>
  <li>Rectified a regression bug that occurred when the <code class="language-plaintext highlighter-rouge">-include</code> flag was passed via the <a href="https://docs.platformio.org/en/latest/projectconf/sections/env/options/build/build_flags.html">build_flags</a> option as a relative path and subsequently expanded (<a href="https://github.com/platformio/platformio-core/issues/4683">issue #4683</a>)</li>
  <li>Resolved an issue that resulted in unresolved absolute toolchain paths when generating the <a href="https://docs.platformio.org/en/latest/integration/compile_commands.html">Compilation database “compile_commands.json”</a> (<a href="https://github.com/platformio/platformio-core/issues/4684">issue #4684</a>)</li>
</ul>

<p>See <a href="https://github.com/platformio/platformio-core/releases/tag/v6.1.9">Release Notes</a> for more detailed information and use <a href="https://docs.platformio.org/en/latest/core/userguide/cmd_upgrade.html">pio upgrade</a> command to update to the latest version.</p>

<h2 id="new-renesas-ra-dev-platform">New Renesas RA dev-platform</h2>

<p><img class="figure-img img-fluid rounded" src="/assets/posts/2023-08-07-platformio-oss-july-2023-updates/renesas-ra-logo.gif" alt="New PlatformIO development platform for Renesas RA microcontrollers" /></p>

<p>During the last few months, we have received a lot of private and public inquiries from our community about the integration of the Renesas Advanced (RA) 32-bit microcontrollers into the PlatformIO ecosystem. At PlatformIO, we highly value the opinions and feedback of our community members. It is through their insights that we continually strive to enhance our offerings and meet their evolving needs.</p>

<p>With this integration, PlatformIO users gain access to a wider selection of powerful microcontrollers, enabling them to leverage the Renesas RA MCU series’ advanced features and capabilities. We encourage all developers to explore the newly added support for Renesas devices and provide us with valuable feedback to further refine our services.</p>

<p>The first stable release of the Renesas RA dev-platform brings initial support for several development boards and frameworks:</p>

<ul>
  <li>Supported boards:
    <ul>
      <li><a href="http://docs.platformio.org/en/latest/boards/renesas-ra/uno_r4_wifi.html">Arduino Uno R4 WiFi</a></li>
      <li><a href="http://docs.platformio.org/en/latest/boards/renesas-ra/uno_r4_minima.html">Arduino Uno R4 Minima</a></li>
      <li><a href="http://docs.platformio.org/en/latest/boards/renesas-ra/portenta_c33.html">Arduino Portenta C33</a></li>
    </ul>
  </li>
  <li>Initial support for Arduino framework (<a href="https://github.com/arduino/ArduinoCore-renesas/releases/tag/1.0.1">release notes</a>)</li>
  <li>Initial support for CMSIS framework (<a href="https://github.com/platformio/platform-renesas-ra/pull/7">#7</a>)</li>
  <li>Initial support for native FSP framework (<a href="https://github.com/platformio/platform-renesas-ra/pull/7">#7</a>)</li>
</ul>

<p><strong>Related resources for the Renesas RA dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/renesas-ra.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-renesas-ra/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 id="arm-mbed-os-v617">Arm Mbed OS v6.17</h2>

<p>We’re happy to announce updated support for the latest version of <strong>Mbed OS v6.17</strong> - an open source embedded operating system designed specifically for the “things” in the Internet of Things. It includes all the features you need to develop a connected product based on an Arm Cortex-M microcontroller, including security, connectivity, an RTOS and drivers for sensors and I/O devices.</p>

<p>More information on project configuration for the Mbed OS can be found <a href="https://docs.platformio.org/en/latest/frameworks/mbed.html#configuration-system">here</a>.</p>

<p><strong>Related resources for Arm Mbed OS</strong>:</p>

<ul>
  <li><a href="https://github.com/ARMmbed/mbed-os/releases/tag/mbed-os-6.17.0">Release notes for v6.17</a></li>
  <li><a href="https://docs.platformio.org/en/latest/frameworks/mbed.html">Documentation for Mbed OS</a></li>
  <li><a href="https://docs.platformio.org/en/latest/frameworks/mbed.html#platforms">Supported development platforms</a></li>
  <li><a href="https://docs.platformio.org/en/latest/frameworks/mbed.html#boards">Supported boards</a></li>
</ul>

<h2 class="no_toc" id="stay-in-touch-with-us">Stay in touch with us</h2>

<p>Stay tuned to this blog or follow us on <a href="https://www.linkedin.com/company/platformio" target="_blank">LinkedIn</a> and Twitter <a href="https://twitter.com/PlatformIO_Org" target="_blank">@PlatformIO_Org</a> to keep up to date with the latest news, articles and tips!</p>]]></content><author><name>Valerii Koval</name></author><category term="blog" /><category term="news" /><summary type="html"><![CDATA[Improved PlatformIO IDE for Microsoft VSCode, PlatformIO Core bugfix release, New Renesas RA dev-platform, New boards and dev-kits, support for the latest Mbed OS]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://piolabs.com/assets/posts/oss-updates/platformio-oss-july-news.jpg" /><media:content medium="image" url="https://piolabs.com/assets/posts/oss-updates/platformio-oss-july-news.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">PlatformIO Open Source June Updates</title><link href="https://piolabs.com/blog/news/platformio-oss-june-2023-updates.html" rel="alternate" type="text/html" title="PlatformIO Open Source June Updates" /><published>2023-07-03T00:00:00+03:00</published><updated>2023-07-03T00:00:00+03:00</updated><id>https://piolabs.com/blog/news/platformio-oss-june-2023-updates</id><content type="html" xml:base="https://piolabs.com/blog/news/platformio-oss-june-2023-updates.html"><![CDATA[<p>Welcome to the June 2023 updates of <a href="https://platformio.org/">PlatformIO Open Source</a> professional collaborative platform for embedded development.</p>

<p>This month we received a lot of helpful feedback from our community, which let us identify the most important parts of our OSS ecosystem that required our attention, so there are plenty of updates pushed in this month that we hope you will like.</p>

<!-- more -->

<p><img class="figure-img img-fluid rounded" src="/assets/posts/oss-updates/platformio-oss-june-news.jpg" alt="PlatformIO Open Source June Updates" /></p>

<p>During June, we rolled out an updated version of PlatformIO IDE for Visual Studio Code, added support for the latest Arduino cores for ST STM32, Nordic nRF52 and Microchip SAM development platforms, fixed a lot of issues. Some of the key highlights include:</p>

<ul id="markdown-toc">
  <li><a href="#platformio-ide-32-for-visual-studio-code" id="markdown-toc-platformio-ide-32-for-visual-studio-code">PlatformIO IDE 3.2 for Visual Studio Code</a></li>
  <li><a href="#st-stm32-v160" id="markdown-toc-st-stm32-v160">ST STM32 v16.0</a></li>
  <li><a href="#nordic-nrf52-v100" id="markdown-toc-nordic-nrf52-v100">Nordic nRF52 v10.0</a></li>
  <li><a href="#microchip-sam-v82" id="markdown-toc-microchip-sam-v82">Microchip SAM v8.2</a></li>
  <li><a href="#chips-alliance-v13" id="markdown-toc-chips-alliance-v13">CHIPS Alliance v1.3</a></li>
</ul>

<h2 id="platformio-ide-32-for-visual-studio-code">PlatformIO IDE 3.2 for Visual Studio Code</h2>

<p>We are pleased to announce a new stable release of PlatformIO IDE 3.2 for <a href="https://docs.platformio.org/en/latest/integration/ide/vscode.html">Visual Studio Code</a> that brings a new powerful linting feature that highlights syntactical and stylistic issues in the <a href="https://docs.platformio.org/en/latest/projectconf/index.html">“platformio.ini”</a> configuration file:</p>

<p><img class="figure-img img-fluid rounded" src="https://raw.githubusercontent.com/platformio/platformio-vscode-ide/develop/.github/media/platformio-ini-lint-demo.png" alt="PlatformIO Open Source June Updates" /></p>

<p>Other enhancements and bugfixes:</p>

<ul>
  <li>Improved project cleanup process by utilizing the <code class="language-plaintext highlighter-rouge">fullclean</code> target instead of <code class="language-plaintext highlighter-rouge">cleanall</code>. This ensures a thorough clean-up, including the removal of dependent libraries</li>
  <li>Updated PlatformIO Core Installer Script to <a href="https://github.com/platformio/platformio-core-installer/releases/tag/v1.1.3">v1.1.3</a></li>
  <li>Resolved an issue where certain buttons were missing from the status bar in VSCode 1.79 after the recent update (issue <a href="https://github.com/platformio/platformio-vscode-ide/issues/3736">#3736</a>)</li>
</ul>

<p>See <a href="https://github.com/platformio/platformio-vscode-ide/releases/tag/v3.2.0">Release Notes</a> for more detailed information.</p>

<h2 id="st-stm32-v160">ST STM32 v16.0</h2>

<p>The new release of the <a href="https://registry.platformio.org/platforms/platformio/ststm32">ST STM32</a> v16.0.0 comes with support for the latest Arduino core, updated packages and several minor improvements:</p>

<ul>
  <li>Updated STM32 Arduino Core to the latest v2.5.0 (<a href="https://github.com/stm32duino/Arduino_Core_STM32/releases/tag/2.5.0">release notes</a>)</li>
  <li>Updated OpenOCD package to the latest v0.12</li>
  <li>Switched Arduino Core to GCC v10.3 packages (<a href="https://github.com/platformio/platform-ststm32/issues/301">#301</a>, <a href="https://github.com/platformio/platform-ststm32/issues/486">#486</a>, <a href="https://github.com/platformio/platform-ststm32/issues/605">#605</a>, <a href="https://github.com/platformio/platform-ststm32/issues/650">#650</a>)</li>
  <li>Enabled CMSIS-DAP for genericSTM32F103C6 (<a href="https://github.com/platformio/platform-ststm32/issues/696">#696</a>)</li>
  <li>Various memory size corrections (<a href="https://github.com/platformio/platform-ststm32/issues/617">#617</a>, <a href="https://github.com/platformio/platform-ststm32/issues/649">#649</a>, <a href="https://github.com/platformio/platform-ststm32/issues/656">#656</a>, <a href="https://github.com/platformio/platform-ststm32/issues/699">#699</a>)</li>
  <li>Dropped support for legacy Mbed v5</li>
</ul>

<p><strong>Related resources for the ST STM32 dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/ststm32.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-ststm32/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 id="nordic-nrf52-v100">Nordic nRF52 v10.0</h2>

<p>The latest release of the <a href="https://registry.platformio.org/platforms/platformio/nordicnrf52">Nordic nRF52</a> dev-platform brings support for the latest Adafruit core and updated OpenOCD v0.12 packages:</p>

<ul>
  <li>Updated Arduino Adafruit core to v1.5.0 (<a href="https://github.com/adafruit/Adafruit_nRF52_Arduino/releases/tag/1.5.0">release notes</a>)</li>
  <li>Updated OpenOCD package to the latest v0.12</li>
  <li>Dropped support for legacy Mbed v5</li>
</ul>

<p><strong>Related resources for the Nordic nRF52 dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/nordicnrf52.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-nordicnrf52/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 id="microchip-sam-v82">Microchip SAM v8.2</h2>

<p>The new release of the <a href="https://registry.platformio.org/platforms/platformio/atmelsam">Microchip SAM</a> dev-platform brings updates for several Arduino cores, updated OpenOCD v0.12 and several minor improvements:</p>

<ul>
  <li>Updated Arduino Adafruit Core to v1.7.13 (<a href="https://github.com/adafruit/ArduinoCore-samd/releases/tag/1.7.13">release notes</a>)</li>
  <li>Updated Arduino Seeed Core to v1.8.4 (<a href="https://github.com/Seeed-Studio/ArduinoCore-samd/releases/tag/v1.8.4">release notes</a>)</li>
  <li>Updated Arduino SODAQ Core to v1.8.9</li>
  <li>Updated OpenOCD package to the latest v0.12</li>
  <li>Removed duplicate macro in Seeeduino Wio Terminal manifest</li>
</ul>

<p><strong>Related resources for the Microchip SAM dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/atmelsam.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-atmelsam/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 id="chips-alliance-v13">CHIPS Alliance v1.3</h2>

<p>The new release of the <a href="https://registry.platformio.org/platforms/platformio/chipsalliance">CHIPS Alliance</a> dev-platform comes with support for Verilator-based RVfpga-ViDBo and RVfpga-Pipeline simulation tools:</p>

<ul>
  <li>Added new option for supporting RVfpga-ViDBo and RVfpga-Pipeline (<a href="https://github.com/platformio/platform-chipsalliance/issues/12">#12</a>)</li>
  <li>Fixed “program_fpga” target errors (<a href="https://github.com/platformio/platform-chipsalliance/issues/11">#11</a>)</li>
</ul>

<p><strong>Related resources for the CHIPS Alliance dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/chipsalliance.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-chipsalliance/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 class="no_toc" id="stay-in-touch-with-us">Stay in touch with us</h2>

<p>Stay tuned to this blog or follow us on <a href="https://www.linkedin.com/company/platformio" target="_blank">LinkedIn</a> and Twitter <a href="https://twitter.com/PlatformIO_Org" target="_blank">@PlatformIO_Org</a> to keep up to date with the latest news, articles and tips!</p>]]></content><author><name>Valerii Koval</name></author><category term="blog" /><category term="news" /><summary type="html"><![CDATA[Improved PlatformIO IDE for Microsoft VSCode, Updates for ST STM32, Nordic nRF52 and Microchip SAM dev-platforms]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://piolabs.com/assets/posts/oss-updates/platformio-oss-june-news.jpg" /><media:content medium="image" url="https://piolabs.com/assets/posts/oss-updates/platformio-oss-june-news.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">PlatformIO Open Source May Updates</title><link href="https://piolabs.com/blog/news/platformio-oss-may-2023-updates.html" rel="alternate" type="text/html" title="PlatformIO Open Source May Updates" /><published>2023-06-05T00:00:00+03:00</published><updated>2023-06-05T00:00:00+03:00</updated><id>https://piolabs.com/blog/news/platformio-oss-may-2023-updates</id><content type="html" xml:base="https://piolabs.com/blog/news/platformio-oss-may-2023-updates.html"><![CDATA[<p>Welcome to the May 2023 updates of <a href="https://platformio.org/">PlatformIO Open Source</a> professional collaborative platform for embedded development.</p>

<p>This month we received a lot of helpful feedback from our community, which let us identify the most important parts of our OSS ecosystem that required our attention, so there are plenty of updates pushed in this month that we hope you will like.</p>

<!-- more -->

<p><img class="figure-img img-fluid rounded" src="/assets/posts/oss-updates/platformio-oss-may-news.jpg" alt="PlatformIO Open Source May Updates" /></p>

<p>During May, we published a bugfix release for PlatformIO Core, added support for the latest ESP-IDF v5.0.2, rolled out updates for the Espressif32 and Microchip AVR/megaAVR development platforms, resolved a lot of issues. Some of the key highlights include:</p>

<ul id="markdown-toc">
  <li><a href="#platformio-core-617" id="markdown-toc-platformio-core-617">PlatformIO Core 6.1.7</a></li>
  <li><a href="#esp-idf-v502" id="markdown-toc-esp-idf-v502">ESP-IDF v5.0.2</a></li>
  <li><a href="#espressif32-dev-platform-v63" id="markdown-toc-espressif32-dev-platform-v63">Espressif32 dev-platform v6.3</a></li>
  <li><a href="#microchip-avr-dev-platform-v42" id="markdown-toc-microchip-avr-dev-platform-v42">Microchip AVR dev-platform v4.2</a></li>
  <li><a href="#microchip-megaavr-dev-platform-v19" id="markdown-toc-microchip-megaavr-dev-platform-v19">Microchip megaAVR dev-platform v1.9</a></li>
</ul>

<h2 id="platformio-core-617">PlatformIO Core 6.1.7</h2>

<p><a href="https://docs.platformio.org/en/latest/core/index.html">PlatformIO Core</a> is the heart of the whole PlatformIO ecosystem and we are excited to announce the next v6.1.7 release with lots of great improvements and bugfixes:</p>

<ul>
  <li>Introduced a new <code class="language-plaintext highlighter-rouge">--sample-code</code> option to the <a href="https://docs.platformio.org/en/latest/core/userguide/project/cmd_init.html">pio project init</a> command, which allows users to include sample code in the newly created project</li>
  <li>Added validation for <a href="https://docs.platformio.org/en/latest/projectconf/sections/env/index.html#working-env-name">project working environment names</a> to ensure that they only contain lowercase letters <code class="language-plaintext highlighter-rouge">a-z</code>, numbers <code class="language-plaintext highlighter-rouge">0-9</code>, and special characters <code class="language-plaintext highlighter-rouge">_</code> (underscore) and <code class="language-plaintext highlighter-rouge">-</code> (hyphen)</li>
  <li>Added the ability to show a detailed library dependency tree only in <a href="https://docs.platformio.org/en/latest/core/userguide/cmd_run.html#cmdoption-pio-run-v">verbose mode</a>, which can help you understand the relationship between libraries and troubleshoot issues more effectively (<a href="https://github.com/platformio/platformio-core/issues/4517">issue #4517</a>)</li>
  <li>Added the ability to run only the <a href="https://docs.platformio.org/en/latest/core/userguide/device/cmd_monitor.html">device monitor</a> when using the <a href="https://docs.platformio.org/en/latest/core/userguide/cmd_run.html">pio run -t monitor</a> command, saving you time and resources by skipping the build process</li>
  <li>Implemented a new feature to store device monitor logs in the project’s <code class="language-plaintext highlighter-rouge">logs</code> folder, making it easier to access and review device monitor logs for your projects (<a href="https://github.com/platformio/platformio-core/issues/4596">issue #4596</a>)</li>
  <li>Improved support for projects located on Windows network drives, including Network Shared Folder, Dropbox, OneDrive, Google Drive, and other similar services (<a href="https://github.com/platformio/platformio-core/issues/3417">issue #3417</a>)</li>
  <li>Improved source file filtering functionality for the <a href="https://docs.platformio.org/en/latest/advanced/static-code-analysis/index.html">Static Code Analysis</a> feature, making it easier to analyze only the code you need to</li>
  <li>Upgraded the build engine to the latest version of SCons (4.5.2) to improve build performance, reliability, and compatibility with other tools and systems (<a href="https://github.com/SCons/scons/releases/tag/4.5.2">release notes</a>)</li>
  <li>Implemented a fix for shell injection vulnerabilities when converting INO files to CPP, ensuring your code is safe and secure (<a href="https://github.com/platformio/platformio-core/issues/4532">issue #4532</a>)</li>
  <li>Restored the project generator for the <a href="https://docs.platformio.org/en/latest/integration/ide/netbeans.html">NetBeans IDE</a>, providing you with more flexibility and options for your development workflow</li>
  <li>Resolved installation issues with PIO Remote on Raspberry Pi and other small form-factor PCs (<a href="https://github.com/platformio/platformio-core/issues/4425">issue #4425</a>, <a href="https://github.com/platformio/platformio-core/issues/4493">issue #4493</a>, <a href="https://github.com/platformio/platformio-core/issues/4607">issue #4607</a>)</li>
  <li>Resolved an issue where the <a href="https://docs.platformio.org/en/latest/projectconf/sections/platformio/options/directory/build_cache_dir.html">build_cache_dir</a> setting was not being recognized consistently across multiple environments (<a href="https://github.com/platformio/platformio-core/issues/4574">issue #4574</a>)</li>
  <li>Resolved an issue where organization details could not be updated using the <a href="https://docs.platformio.org/en/latest/core/userguide/org/cmd_update.html">pio org update</a> command</li>
  <li>Resolved an issue where the incorrect debugging environment was generated for VSCode in “Auto” mode (<a href="https://github.com/platformio/platformio-core/issues/4597">issue #4597</a>)</li>
  <li>Resolved an issue where native tests would fail if a custom program name was specified (<a href="https://github.com/platformio/platformio-core/issues/4546">issue #4546</a>)</li>
  <li>Resolved an issue where the PlatformIO <a href="https://docs.platformio.org/en/latest/plus/debugging.html">Debugging</a> solution was not escaping the tool installation process into MI2 correctly (<a href="https://github.com/platformio/platformio-core/issues/4565">issue #4565</a>)</li>
  <li>Resolved an issue where multiple targets were not executed sequentially (<a href="https://github.com/platformio/platformio-core/issues/4604">issue #4604</a>)</li>
  <li>Resolved an issue where upgrading PlatformIO Core fails on Windows with Python 3.11 (<a href="https://github.com/platformio/platformio-core/issues/4540">issue #4540</a>)</li>
</ul>

<p>See <a href="https://github.com/platformio/platformio-core/releases/tag/v6.1.7">Release Notes</a> for more detailed information and use <a href="https://docs.platformio.org/en/latest/core/userguide/cmd_upgrade.html">pio upgrade</a> command to update to the latest version.</p>

<h2 id="esp-idf-v502">ESP-IDF v5.0.2</h2>

<p>We’re happy to announce updated support for the latest patch update of <strong>ESP-IDF v5.0.2</strong> - the official development framework for the ESP32, ESP32-S and ESP32-C Series SoCs. It provides a self-sufficient SDK for any generic application development on these platforms, using programming languages such as C and C++. ESP-IDF currently powers millions of devices in the field, and enables building a variety of network-connected products, ranging from simple light bulbs and toys to big appliances and industrial devices.</p>

<p><strong>Major enhancements in v5.0.2:</strong></p>

<ul>
  <li>Support BLE privacy by controller</li>
  <li>Added custom GATT server functionality and encryption</li>
  <li>Improved the handling of station SA query procedures</li>
</ul>

<p>More information on project configuration for ESP-IDF can be found <a href="https://docs.platformio.org/en/latest/frameworks/espidf.html#configuration">here</a>.</p>

<p><strong>Related resources for ESP-IDF</strong>:</p>

<ul>
  <li><a href="https://github.com/espressif/esp-idf/releases/tag/v5.0.2">Release notes for v5.0.2</a></li>
  <li><a href="https://docs.platformio.org/en/latest/frameworks/espidf.html">Documentation for ESP-IDF</a></li>
  <li><a href="https://docs.platformio.org/en/latest/frameworks/espidf.html#boards">Supported boards</a></li>
</ul>

<h2 id="espressif32-dev-platform-v63">Espressif32 dev-platform v6.3</h2>

<p>The new release of the <a href="https://registry.platformio.org/platforms/platformio/espressif32">Espressif 32</a> dev-platform brings support for the latest ESP-IDF v5.0.2, updated Arduino core v2.0.9 and several minor fixes and improvements:</p>

<ul>
  <li>Added support for Arduino v2.0.9 (<a href="https://github.com/espressif/arduino-esp32/releases/tag/2.0.9">release notes</a>)</li>
  <li>Added support for ESP-IDF v5.0.2 (<a href="https://github.com/espressif/esp-idf/releases/tag/v5.0.2">release notes</a>)</li>
  <li>Better handling of macros exported from the IDF build system (<a href="https://github.com/platformio/platform-espressif32/issues/1080">#1080</a>)</li>
  <li>Improved integration with the upstream version of ESP32 Arduino core (<a href="https://github.com/platformio/platform-espressif32/issues/1092">#1092</a>)</li>
  <li>Fixed flash memory size for ESP32S3 CAM LCD board (<a href="https://github.com/platformio/platform-espressif32/issues/1095">#1095</a>)</li>
</ul>

<p>See <a href="https://github.com/platformio/platform-espressif32/releases/tag/v6.3.0">Release Notes</a> for more detailed information.</p>

<p><strong>Related resources for the Espressif32 dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/espressif32.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-espressif32/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 id="microchip-avr-dev-platform-v42">Microchip AVR dev-platform v4.2</h2>

<p>The latest release of the <a href="https://registry.platformio.org/platforms/platformio/atmelavr">Microchip AVR</a> v4.2.0 comes with updates for highly customizable Arduino cores by MCUdude and initial support for the <code class="language-plaintext highlighter-rouge">Urboot</code> bootloader:</p>

<ul>
  <li>Updated MCUdude’s cores (#302):
    <ul>
      <li>MajorCore <code class="language-plaintext highlighter-rouge">v2.2.2</code> (<a href="https://github.com/MCUdude/MajorCore/releases/tag/v2.2.2">release notes</a>)</li>
      <li>MegaCore <code class="language-plaintext highlighter-rouge">v2.2.3</code> (<a href="https://github.com/MCUdude/MegaCore/releases/tag/v2.2.3">release notes</a>)</li>
      <li>MightyCore <code class="language-plaintext highlighter-rouge">v2.2.2</code> (<a href="https://github.com/MCUdude/MightyCore/releases/tag/v2.2.2">release notes</a>)</li>
      <li>MiniCore <code class="language-plaintext highlighter-rouge">v2.2.2</code> (<a href="https://github.com/MCUdude/MiniCore/releases/tag/v2.2.2">release notes</a>)</li>
      <li>MicroCore <code class="language-plaintext highlighter-rouge">v2.3.0</code> (<a href="https://github.com/MCUdude/MicroCore/releases/tag/v2.3.0">release notes</a>)</li>
    </ul>
  </li>
  <li>Added initial support for the <code class="language-plaintext highlighter-rouge">Urboot</code> bootloader for MicroCore (<a href="https://github.com/platformio/platform-atmelavr/pull/311">#311</a>)</li>
  <li>Fixed an issue with missing <code class="language-plaintext highlighter-rouge">tool-avrdude</code> package when bootloader target is selected (<a href="https://github.com/platformio/platform-atmelavr/issues/269">#269</a>)</li>
</ul>

<p>See <a href="https://github.com/platformio/platform-atmelavr/releases/tag/v4.2.0">Release Notes</a> for more detailed information.</p>

<p><strong>Related resources for the Microchip AVR dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/atmelavr.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-atmelavr/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 id="microchip-megaavr-dev-platform-v19">Microchip megaAVR dev-platform v1.9</h2>

<p>The new release of the <a href="https://registry.platformio.org/platforms/platformio/atmelmegaavr">Microchip megaAVR</a> v1.9.0 brings several updated Arduino cores:</p>

<ul>
  <li>Updated <code class="language-plaintext highlighter-rouge">MegaCoreX</code> to v1.1.2 (<a href="https://github.com/MCUdude/MegaCoreX/releases/tag/v1.1.2">release notes</a>)</li>
  <li>Updated <code class="language-plaintext highlighter-rouge">megatinycore</code> to v2.6.7 (<a href="https://github.com/SpenceKonde/megaTinyCore/releases/tag/2.6.7">release notes</a>)</li>
  <li>Updated <code class="language-plaintext highlighter-rouge">Arduino</code> core to v1.8.8 (<a href="https://github.com/arduino/ArduinoCore-megaavr/releases/tag/1.8.8">release notes</a>)</li>
</ul>

<p><strong>Related resources for the Microchip megaAVR dev-platform</strong>:</p>

<ul>
  <li><a href="https://docs.platformio.org/en/latest/platforms/atmelmegaavr.html">Documentation</a></li>
  <li><a href="https://github.com/platformio/platform-atmelmegaavr/tree/develop/examples">Project Examples</a></li>
</ul>

<h2 class="no_toc" id="stay-in-touch-with-us">Stay in touch with us</h2>

<p>Stay tuned to this blog or follow us on <a href="https://www.linkedin.com/company/platformio" target="_blank">LinkedIn</a> and Twitter <a href="https://twitter.com/PlatformIO_Org" target="_blank">@PlatformIO_Org</a> to keep up to date with the latest news, articles and tips!</p>]]></content><author><name>Valerii Koval</name></author><category term="blog" /><category term="news" /><summary type="html"><![CDATA[PlatformIO Core bugfix release, Support for the latest ESP-IDF, Updated Arduino cores Espressif32 and Microchip AVR/megaAVR]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://piolabs.com/assets/posts/oss-updates/platformio-oss-may-news.jpg" /><media:content medium="image" url="https://piolabs.com/assets/posts/oss-updates/platformio-oss-may-news.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry></feed>